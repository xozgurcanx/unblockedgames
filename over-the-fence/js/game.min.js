var requirejs,require,define;!function(global){function isFunction(a){return"[object Function]"===ostring.call(a)}function isArray(a){return"[object Array]"===ostring.call(a)}function each(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function hasProp(a,b){return hasOwn.call(a,b)}function getOwn(a,b){return hasProp(a,b)&&a[b]}function eachProp(a,b){var c;for(c in a)if(hasProp(a,c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){(c||!hasProp(a,e))&&(d&&"string"!=typeof b?(a[e]||(a[e]={}),mixin(a[e],b,c,d)):a[e]=b)}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(a){throw a}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function b(a){var b,c;for(b=0;a[b];b+=1)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function c(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p=c&&c.split("/"),q=p,r=x.map,s=r&&r["*"];if(a&&"."===a.charAt(0)&&(c?(q=getOwn(x.pkgs,c)?p=[c]:p.slice(0,p.length-1),a=q.concat(a.split("/")),b(a),f=getOwn(x.pkgs,e=a[0]),a=a.join("/"),f&&a===e+"/"+f.main&&(a=e)):0===a.indexOf("./")&&(a=a.substring(2))),d&&r&&(p||s)){for(h=a.split("/"),i=h.length;i>0;i-=1){if(k=h.slice(0,i).join("/"),p)for(j=p.length;j>0;j-=1)if(g=getOwn(r,p.slice(0,j).join("/")),g&&(g=getOwn(g,k))){l=g,m=i;break}if(l)break;!n&&s&&getOwn(s,k)&&(n=getOwn(s,k),o=i)}!l&&n&&(l=n,m=o),l&&(h.splice(0,m,l),a=h.join("/"))}return a}function d(a){isBrowser&&each(scripts(),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===u.contextName?(b.parentNode.removeChild(b),!0):void 0})}function e(a){var b=getOwn(x.paths,a);return b&&isArray(b)&&b.length>1?(b.shift(),u.require.undef(a),u.require([a]),!0):void 0}function f(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function g(a,b,d,e){var g,h,i,j,k=null,l=b?b.name:null,m=a,n=!0,o="";return a||(n=!1,a="_@r"+(E+=1)),j=f(a),k=j[0],a=j[1],k&&(k=c(k,l,e),h=getOwn(C,k)),a&&(k?o=h&&h.normalize?h.normalize(a,function(a){return c(a,l,e)}):c(a,l,e):(o=c(a,l,e),j=f(o),k=j[0],o=j[1],d=!0,g=u.nameToUrl(o))),i=!k||h||d?"":"_unnormalized"+(F+=1),{prefix:k,name:o,parentMap:b,unnormalized:!!i,url:g,originalName:m,isDefine:n,id:(k?k+"!"+o:o)+i}}function h(a){var b=a.id,c=getOwn(y,b);return c||(c=y[b]=new u.Module(a)),c}function i(a,b,c){var d=a.id,e=getOwn(y,d);!hasProp(C,d)||e&&!e.defineEmitComplete?(e=h(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(C[d])}function j(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=getOwn(y,b);c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function k(){globalDefQueue.length&&(apsp.apply(B,[B.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function l(a){delete y[a],delete z[a]}function m(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,each(a.depMaps,function(d,e){var f=d.id,g=getOwn(y,f);!g||a.depMatched[e]||c[f]||(getOwn(b,f)?(a.defineDep(e,C[f]),a.check()):m(g,b,c))}),c[d]=!0)}function n(){var a,b,c,f,g=1e3*x.waitSeconds,h=g&&u.startTime+g<(new Date).getTime(),i=[],k=[],l=!1,o=!0;if(!s){if(s=!0,eachProp(z,function(c){if(a=c.map,b=a.id,c.enabled&&(a.isDefine||k.push(c),!c.error))if(!c.inited&&h)e(b)?(f=!0,l=!0):(i.push(b),d(b));else if(!c.inited&&c.fetched&&a.isDefine&&(l=!0,!a.prefix))return o=!1}),h&&i.length)return c=makeError("timeout","Load timeout for modules: "+i,null,i),c.contextName=u.contextName,j(c);o&&each(k,function(a){m(a,{},{})}),h&&!f||!l||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,n()},50)),s=!1}}function o(a){hasProp(C,a[0])||h(g(a[0],null,!0)).init(a[1],a[2])}function p(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function q(a){var b=a.currentTarget||a.srcElement;return p(b,u.onScriptLoad,"load","onreadystatechange"),p(b,u.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}function r(){var a;for(k();B.length;){if(a=B.shift(),null===a[0])return j(makeError("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));o(a)}}var s,t,u,v,w,x={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},y={},z={},A={},B=[],C={},D={},E=1,F=1;return v={require:function(a){return a.require?a.require:a.require=u.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?a.exports:a.exports=C[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var b,c=getOwn(x.pkgs,a.map.id);return b=c?getOwn(x.config,a.map.id+"/"+c.main):getOwn(x.config,a.map.id),b||{}},exports:C[a.map.id]}}},t=function(a){this.events=getOwn(A,a.id)||{},this.map=a,this.shim=getOwn(x.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},t.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,u.startTime=(new Date).getTime();var a=this.map;return this.shim?void u.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()})):a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;D[a]||(D[a]=!0,u.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id,d=this.depExports,e=this.exports,f=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(f)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{e=u.execCb(c,f,d,e)}catch(g){a=g}else e=u.execCb(c,f,d,e);if(this.map.isDefine&&(b=this.module,b&&void 0!==b.exports&&b.exports!==this.exports?e=b.exports:void 0===e&&this.usingExports&&(e=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",j(this.error=a)}else e=f;this.exports=e,this.map.isDefine&&!this.ignore&&(C[c]=e,req.onResourceLoad&&req.onResourceLoad(u,this.map,this.depMaps)),l(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=g(a.prefix);this.depMaps.push(d),i(d,"defined",bind(this,function(d){var e,f,k,m=this.map.name,n=this.map.parentMap?this.map.parentMap.name:null,o=u.makeRequire(a.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(d.normalize&&(m=d.normalize(m,function(a){return c(a,n,!0)})||""),f=g(a.prefix+"!"+m,this.map.parentMap),i(f,"defined",bind(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),k=getOwn(y,f.id),void(k&&(this.depMaps.push(f),this.events.error&&k.on("error",bind(this,function(a){this.emit("error",a)})),k.enable()))):(e=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(y,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&l(a.map.id)}),j(a)}),e.fromText=bind(this,function(c,d){var f=a.name,i=g(f),k=useInteractive;d&&(c=d),k&&(useInteractive=!1),h(i),hasProp(x.config,b)&&(x.config[f]=x.config[b]);try{req.exec(c)}catch(l){return j(makeError("fromtexteval","fromText eval for "+b+" failed: "+l,l,[b]))}k&&(useInteractive=!0),this.depMaps.push(i),u.completeLoad(f),o([f],e)}),void d.load(a.name,o,e,x))})),u.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){z[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,d,e;if("string"==typeof a){if(a=g(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,e=getOwn(v,a.id))return void(this.depExports[b]=e(this));this.depCount+=1,i(a,"defined",bind(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&i(a,"error",bind(this,this.errback))}c=a.id,d=y[c],hasProp(v,c)||!d||d.enabled||u.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=getOwn(y,a.id);b&&!b.enabled&&u.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},u={config:x,contextName:a,registry:y,defined:C,urlFetched:D,defQueue:B,Module:t,makeModuleMap:g,nextTick:req.nextTick,onError:j,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=x.pkgs,c=x.shim,d={paths:!0,config:!0,map:!0};eachProp(a,function(a,b){d[b]?"map"===b?(x.map||(x.map={}),mixin(x[b],a,!0,!0)):mixin(x[b],a,!0):x[b]=a}),a.shim&&(eachProp(a.shim,function(a,b){isArray(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=u.makeShimExports(a)),c[b]=a}),x.shim=c),a.packages&&(each(a.packages,function(a){var c;a="string"==typeof a?{name:a}:a,c=a.location,b[a.name]={name:a.name,location:c||a.name,main:(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),x.pkgs=b),eachProp(y,function(a,b){a.inited||a.map.unnormalized||(a.map=g(b))}),(a.deps||a.callback)&&u.require(a.deps||[],a.callback)},makeShimExports:function(a){function b(){var b;return a.init&&(b=a.init.apply(global,arguments)),b||a.exports&&getGlobal(a.exports)}return b},makeRequire:function(b,e){function f(c,d,i){var k,l,m;return e.enableBuildCallback&&d&&isFunction(d)&&(d.__requireJsBuild=!0),"string"==typeof c?isFunction(d)?j(makeError("requireargs","Invalid require call"),i):b&&hasProp(v,c)?v[c](y[b.id]):req.get?req.get(u,c,b,f):(l=g(c,b,!1,!0),k=l.id,hasProp(C,k)?C[k]:j(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a+(b?"":". Use require([])")))):(r(),u.nextTick(function(){r(),m=h(g(null,b)),m.skipMap=e.skipMap,m.init(c,d,i,{enabled:!0}),n()}),f)}return e=e||{},mixin(f,{isBrowser:isBrowser,toUrl:function(a){var d,e=a.lastIndexOf("."),f=a.split("/")[0],g="."===f||".."===f;return-1!==e&&(!g||e>1)&&(d=a.substring(e,a.length),a=a.substring(0,e)),u.nameToUrl(c(a,b&&b.id,!0),d,!0)},defined:function(a){return hasProp(C,g(a,b,!1,!0).id)},specified:function(a){return a=g(a,b,!1,!0).id,hasProp(C,a)||hasProp(y,a)}}),b||(f.undef=function(a){k();var c=g(a,b,!0),e=getOwn(y,a);d(a),delete C[a],delete D[c.url],delete A[a],e&&(e.events.defined&&(A[a]=e.events),l(a))}),f},enable:function(a){var b=getOwn(y,a.id);b&&h(a).enable()},completeLoad:function(a){var b,c,d,f=getOwn(x.shim,a)||{},g=f.exports;for(k();B.length;){if(c=B.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);o(c)}if(d=getOwn(y,a),!b&&!hasProp(C,a)&&d&&!d.inited){if(!(!x.enforceDefine||g&&getGlobal(g)))return e(a)?void 0:j(makeError("nodefine","No define call for "+a,null,[a]));o([a,f.deps||[],f.exportsFn])}n()},nameToUrl:function(a,b,c){var d,e,f,g,h,i,j,k,l;if(req.jsExtRegExp.test(a))k=a+(b||"");else{for(d=x.paths,e=x.pkgs,h=a.split("/"),i=h.length;i>0;i-=1){if(j=h.slice(0,i).join("/"),f=getOwn(e,j),l=getOwn(d,j)){isArray(l)&&(l=l[0]),h.splice(0,i,l);break}if(f){g=a===f.name?f.location+"/"+f.main:f.location,h.splice(0,i,g);break}}k=h.join("/"),k+=b||(/^data\:|\?/.test(k)||c?"":".js"),k=("/"===k.charAt(0)||k.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+k}return x.urlArgs?k+((-1===k.indexOf("?")?"?":"&")+x.urlArgs):k},load:function(a,b){req.load(u,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=q(a);u.completeLoad(b.id)}},onScriptError:function(a){var b=q(a);return e(b.id)?void 0:j(makeError("scripterror","Script error for: "+b.id,a,[b.id]))}},u.require=u.makeRequire(),u}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(a){return"interactive"===a.readyState?interactiveScript=a:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.9",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return isArray(a)||"string"==typeof a||(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=getOwn(contexts,g),e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},req.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(a){req[a]=function(){var b=contexts[defContextName];return b.require[a].apply(b,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(a){var b=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return b.type=a.scriptType||"text/javascript",b.charset="utf-8",b.async=!0,b},req.load=function(a,b,c){var d,e=a&&a.config||{};if(isBrowser)return d=req.createNode(e,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&d.attachEvent.toString().indexOf("[native code")<0||isOpera?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(useInteractive=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,currentlyAddingScript=d,baseElement?head.insertBefore(d,baseElement):head.appendChild(d),currentlyAddingScript=null,d;if(isWebWorker)try{importScripts(c),a.completeLoad(b)}catch(f){a.onError(makeError("importscripts","importScripts failed for "+b+" at "+c,f,[b]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(a){return head||(head=a.parentNode),dataMain=a.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),isArray(b)||(c=b,b=null),!b&&isFunction(c)&&(b=[],c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),(e?e.defQueue:globalDefQueue).push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this);var spine={};spine.BoneData=function(a,b){this.name=a,this.parent=b},spine.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0},spine.SlotData=function(a,b){this.name=a,this.boneData=b},spine.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},spine.Bone=function(a,b){this.data=a,this.parent=b,this.setToSetupPose()},spine.Bone.yDown=!1,spine.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(a,b){var c=this.parent;null!=c?(this.worldX=this.x*c.m00+this.y*c.m01+c.worldX,this.worldY=this.x*c.m10+this.y*c.m11+c.worldY,this.data.inheritScale?(this.worldScaleX=c.worldScaleX*this.scaleX,this.worldScaleY=c.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?c.worldRotation+this.rotation:this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var d=this.worldRotation*Math.PI/180,e=Math.cos(d),f=Math.sin(d);this.m00=e*this.worldScaleX,this.m10=f*this.worldScaleX,this.m01=-f*this.worldScaleY,this.m11=e*this.worldScaleY,a&&(this.m00=-this.m00,this.m01=-this.m01),b!=spine.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY}},spine.Slot=function(a,b,c){this.data=a,this.skeleton=b,this.bone=c,this.setToSetupPose()},spine.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(a){this.attachment=a,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(a){this._attachmentTime=this.skeleton.time-a},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var a=this.data;this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a;for(var b=this.skeleton.data.slots,c=0,d=b.length;d>c;c++)if(b[c]==a){this.setAttachment(a.attachmentName?this.skeleton.getAttachmentBySlotIndex(c,a.attachmentName):null);break}}},spine.Skin=function(a){this.name=a,this.attachments={}},spine.Skin.prototype={addAttachment:function(a,b,c){this.attachments[a+":"+b]=c},getAttachment:function(a,b){return this.attachments[a+":"+b]},_attachAll:function(a,b){for(var c in b.attachments){var d=c.indexOf(":"),e=parseInt(c.substring(0,d)),f=c.substring(d+1),g=a.slots[e];if(g.attachment&&g.attachment.name==f){var h=this.getAttachment(e,f);h&&g.setAttachment(h)}}}},spine.Animation=function(a,b,c){this.name=a,this.timelines=b,this.duration=c},spine.Animation.prototype={apply:function(a,b,c,d,e){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var f=this.timelines,g=0,h=f.length;h>g;g++)f[g].apply(a,b,c,e,1)},mix:function(a,b,c,d,e,f){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var g=this.timelines,h=0,i=g.length;i>h;h++)g[h].apply(a,b,c,e,f)}},spine.binarySearch=function(a,b,c){var d=0,e=Math.floor(a.length/c)-2;if(0==e)return c;for(var f=e>>>1;;){if(a[(f+1)*c]<=b?d=f+1:e=f,d==e)return(d+1)*c;f=d+e>>>1}},spine.linearSearch=function(a,b,c){for(var d=0,e=a.length-c;e>=d;d+=c)if(a[d]>b)return d;return-1},spine.Curves=function(a){this.curves=[],this.curves.length=6*(a-1)},spine.Curves.prototype={setLinear:function(a){this.curves[6*a]=0},setStepped:function(a){this.curves[6*a]=-1},setCurve:function(a,b,c,d,e){var f=.1,g=f*f,h=g*f,i=3*f,j=3*g,k=6*g,l=6*h,m=2*-b+d,n=2*-c+e,o=3*(b-d)+1,p=3*(c-e)+1,q=6*a,r=this.curves;r[q]=b*i+m*j+o*h,r[q+1]=c*i+n*j+p*h,r[q+2]=m*k+o*l,r[q+3]=n*k+p*l,r[q+4]=o*l,r[q+5]=p*l},getCurvePercent:function(a,b){b=0>b?0:b>1?1:b;var c=6*a,d=this.curves,e=d[c];if(!e)return b;if(-1==e)return 0;for(var f=d[c+1],g=d[c+2],h=d[c+3],i=d[c+4],j=d[c+5],k=e,l=f,m=8;;){if(k>=b){var n=k-e,o=l-f;return o+(l-o)*(b-n)/(k-n)}if(0==m)break;m--,e+=g,f+=h,g+=i,h+=j,k+=e,l+=f}return l+(1-l)*(b-k)/(1-k)}},spine.RotateTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=2*a},spine.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-2]){for(var h=g.data.rotation+f[f.length-1]-g.rotation;h>180;)h-=360;for(;-180>h;)h+=360;return void(g.rotation+=h*e)}var i=spine.binarySearch(f,c,2),j=f[i-1],k=f[i],l=1-(c-k)/(f[i-2]-k);l=this.curves.getCurvePercent(i/2-1,l);for(var h=f[i+1]-j;h>180;)h-=360;for(;-180>h;)h+=360;for(h=g.data.rotation+(j+h*l)-g.rotation;h>180;)h-=360;for(;-180>h;)h+=360;g.rotation+=h*e}}},spine.TranslateTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=3*a},spine.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-3])return g.x+=(g.data.x+f[f.length-2]-g.x)*e,void(g.y+=(g.data.y+f[f.length-1]-g.y)*e);var h=spine.binarySearch(f,c,3),i=f[h-2],j=f[h-1],k=f[h],l=1-(c-k)/(f[h+-3]-k);l=this.curves.getCurvePercent(h/3-1,l),g.x+=(g.data.x+i+(f[h+1]-i)*l-g.x)*e,g.y+=(g.data.y+j+(f[h+2]-j)*l-g.y)*e}}},spine.ScaleTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=3*a},spine.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-3])return g.scaleX+=(g.data.scaleX-1+f[f.length-2]-g.scaleX)*e,void(g.scaleY+=(g.data.scaleY-1+f[f.length-1]-g.scaleY)*e);var h=spine.binarySearch(f,c,3),i=f[h-2],j=f[h-1],k=f[h],l=1-(c-k)/(f[h+-3]-k);l=this.curves.getCurvePercent(h/3-1,l),g.scaleX+=(g.data.scaleX-1+i+(f[h+1]-i)*l-g.scaleX)*e,g.scaleY+=(g.data.scaleY-1+j+(f[h+2]-j)*l-g.scaleY)*e}}},spine.ColorTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=5*a},spine.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(a,b,c,d,e,f){a*=5,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.slots[this.slotIndex];if(c>=f[f.length-5]){var h=f.length-1;return g.r=f[h-3],g.g=f[h-2],g.b=f[h-1],void(g.a=f[h])}var i=spine.binarySearch(f,c,5),j=f[i-4],k=f[i-3],l=f[i-2],m=f[i-1],n=f[i],o=1-(c-n)/(f[i-5]-n);o=this.curves.getCurvePercent(i/5-1,o);var p=j+(f[i+1]-j)*o,q=k+(f[i+2]-k)*o,r=l+(f[i+3]-l)*o,s=m+(f[i+4]-m)*o;1>e?(g.r+=(p-g.r)*e,g.g+=(q-g.g)*e,g.b+=(r-g.b)*e,g.a+=(s-g.a)*e):(g.r=p,g.g=q,g.b=r,g.a=s)}}},spine.AttachmentTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=a,this.attachmentNames=[],this.attachmentNames.length=a},spine.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},apply:function(a,b,c){var d=this.frames;if(!(c<d[0])){var e;e=c>=d[d.length-1]?d.length-1:spine.binarySearch(d,c,1)-1;var f=this.attachmentNames[e];a.slots[this.slotIndex].setAttachment(f?a.getAttachmentBySlotIndex(this.slotIndex,f):null)}}},spine.EventTimeline=function(a){this.frames=[],this.frames.length=a,this.events=[],this.events.length=a},spine.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.events[a]=c},apply:function(a,b,c,d,e){if(d){var f=this.frames,g=f.length;if(!(b>=f[g-1])){b>c&&(this.apply(a,b,Number.MAX_VALUE,d,e),b=0);var h;if(b<=f[0]||1==g)h=0;else{h=spine.binarySearch(f,b,1);for(var i=f[h];h>0&&f[h-1]==i;)h--}for(var j=this.events;g>h&&c>=f[h];h++)d.push(j[h])}}}},spine.DrawOrderTimeline=function(a){this.frames=[],this.frames.length=a,this.drawOrders=[],this.drawOrders.length=a},spine.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},apply:function(a,b,c){var d=this.frames;if(!(c<d[0])){var e;e=c>=d[d.length-1]?d.length-1:spine.binarySearch(d,c,1)-1;var f=a.drawOrder,g=a.slots,h=this.drawOrders[e];if(h)for(var i=0,j=h.length;j>i;i++)f[i]=a.slots[h[i]];else for(var i=0,j=g.length;j>i;i++)f[i]=g[i]}}},spine.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[]},spine.SkeletonData.prototype={defaultSkin:null,findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return slot[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSkin:function(a){for(var b=this.skins,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findEvent:function(a){for(var b=this.events,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findAnimation:function(a){for(var b=this.animations,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null}},spine.Skeleton=function(a){this.data=a,this.bones=[];for(var b=0,c=a.bones.length;c>b;b++){var d=a.bones[b],e=d.parent?this.bones[a.bones.indexOf(d.parent)]:null;this.bones.push(new spine.Bone(d,e))}this.slots=[],this.drawOrder=[];for(var b=0,c=a.slots.length;c>b;b++){var f=a.slots[b],g=this.bones[a.bones.indexOf(f.boneData)],h=new spine.Slot(f,this,g);this.slots.push(h),this.drawOrder.push(h)}},spine.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var a=this.flipX,b=this.flipY,c=this.bones,d=0,e=c.length;e>d;d++)c[d].updateWorldTransform(a,b)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++)a[b].setToSetupPose()},setSlotsToSetupPose:function(){for(var a=this.slots,b=0,c=a.length;c>b;b++)a[b].setToSetupPose(b)},getRootBone:function(){return 0==this.bones.length?null:this.bones[0]},findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},setSkinByName:function(a){var b=this.data.findSkin(a);if(!b)throw"Skin not found: "+a;this.setSkin(b)},setSkin:function(a){this.skin&&a&&a._attachAll(this,this.skin),this.skin=a},getAttachmentBySlotName:function(a,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a),b)},getAttachmentBySlotIndex:function(a,b){if(this.skin){var c=this.skin.getAttachment(a,b);if(c)return c}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},setAttachment:function(a,b){for(var c=this.slots,d=0,e=c.size;e>d;d++){var f=c[d];if(f.data.name==a){var g=null;if(b&&(g=this.getAttachment(d,b),!g))throw"Attachment not found: "+b+", for slot: "+a;return void f.setAttachment(g)}}throw"Slot not found: "+a},update:function(a){time+=a}},spine.EventData=function(a){this.name=a},spine.EventData.prototype={intValue:0,floatValue:0,stringValue:null},spine.Event=function(a){this.data=a},spine.Event.prototype={intValue:0,floatValue:0,stringValue:null},spine.AttachmentType={region:0,boundingbox:1},spine.RegionAttachment=function(a){this.name=a,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},spine.RegionAttachment.prototype={type:spine.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(a,b,c,d,e){var f=this.uvs;e?(f[2]=a,f[3]=d,f[4]=a,f[5]=b,f[6]=c,f[7]=b,f[0]=c,f[1]=d):(f[0]=a,f[1]=d,f[2]=a,f[3]=b,f[4]=c,f[5]=b,f[6]=c,f[7]=d)},updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,b=this.height/this.regionOriginalHeight*this.scaleY,c=-this.width/2*this.scaleX+this.regionOffsetX*a,d=-this.height/2*this.scaleY+this.regionOffsetY*b,e=c+this.regionWidth*a,f=d+this.regionHeight*b,g=this.rotation*Math.PI/180,h=Math.cos(g),i=Math.sin(g),j=c*h+this.x,k=c*i,l=d*h+this.y,m=d*i,n=e*h+this.x,o=e*i,p=f*h+this.y,q=f*i,r=this.offset;r[0]=j-m,r[1]=l+k,r[2]=j-q,r[3]=p+k,r[4]=n-q,r[5]=p+o,r[6]=n-m,r[7]=l+o},computeVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.offset;d[0]=i[0]*e+i[1]*f+a,d[1]=i[0]*g+i[1]*h+b,d[2]=i[2]*e+i[3]*f+a,d[3]=i[2]*g+i[3]*h+b,d[4]=i[4]*e+i[5]*f+a,d[5]=i[4]*g+i[5]*h+b,d[6]=i[6]*e+i[7]*f+a,d[7]=i[6]*g+i[7]*h+b}},spine.BoundingBoxAttachment=function(a){this.name=a,this.vertices=[]},spine.BoundingBoxAttachment.prototype={type:spine.AttachmentType.boundingBox,computeWorldVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;for(var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.vertices,j=0,k=i.length;k>j;j+=2){var l=i[j],m=i[j+1];d[j]=l*e+m*f+a,d[j+1]=l*g+m*h+b}}},spine.AnimationStateData=function(a){this.skeletonData=a,this.animationToMixTime={}},spine.AnimationStateData.prototype={defaultMix:0,setMixByName:function(a,b,c){var d=this.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;var e=this.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;this.setMix(d,e,c)},setMix:function(a,b,c){this.animationToMixTime[a.name+":"+b.name]=c},getMix:function(a,b){var c=this.animationToMixTime[a.name+":"+b.name];return c?c:this.defaultMix}},spine.TrackEntry=function(){},spine.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:0,endTime:0,timeScale:1,mixTime:0,mixDuration:0,onStart:null,onEnd:null,onComplete:null,onEvent:null},spine.AnimationState=function(a){this.data=a,this.tracks=[],this.events=[]},spine.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(a){a*=this.timeScale;for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){var d=a*c.timeScale,e=c.time+d,f=c.endTime;if(c.time=e,c.previous&&(c.previous.time+=d,c.mixTime+=d),c.loop?c.lastTime%f>e%f:c.lastTime<f&&e>=f){var g=Math.floor(e/f);c.onComplete&&c.onComplete(b,g),this.onComplete&&this.onComplete(b,g)}var h=c.next;h?e-d>h.delay&&this.setCurrent(b,h):!c.loop&&c.lastTime>=c.endTime&&this.clearTrack(b)}}},apply:function(a){for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){this.events.length=0;var d=c.time,e=c.loop;!e&&d>c.endTime&&(d=c.endTime);var f=c.previous;if(f){var g=f.time;!f.loop&&g>f.endTime&&(g=f.endTime),f.animation.apply(a,g,g,f.loop,null);var h=c.mixTime/c.mixDuration;h>=1&&(h=1,c.previous=null),c.animation.mix(a,c.lastTime,d,e,this.events,h)}else c.animation.apply(a,c.lastTime,d,e,this.events);
for(var i=0,j=this.events.length;j>i;i++){var k=this.events[i];null!=c.onEvent&&c.onEvent(b,k),null!=this.onEvent&&this.onEvent(b,k)}c.lastTime=c.time}}},clearTracks:function(){for(var a=0,b=this.tracks.length;b>a;a++)this.clearTrack(a);this.tracks.length=0},clearTrack:function(a){if(!(a>=this.tracks.length)){var b=this.tracks[a];b&&(null!=b.onEnd&&b.onEnd(a),null!=this.onEnd&&this.onEnd(a),this.tracks[a]=null)}},_expandToIndex:function(a){if(a<this.tracks.length)return this.tracks[a];for(;a>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(a,b){var c=this._expandToIndex(a);c&&(c.previous=null,null!=c.onEnd&&c.onEnd(a),null!=this.onEnd&&this.onEnd(a),b.mixDuration=this.data.getMix(c.animation,b.animation),b.mixDuration>0&&(b.mixTime=0,b.previous=c)),this.tracks[a]=b,null!=b.onStart&&b.onStart(a),null!=this.onStart&&this.onStart(a)},setAnimationByName:function(a,b,c){var d=this.data.skeletonData.findAnimation(b);if(!d)throw"Animation not found: "+b;return this.setAnimation(a,d,c)},setAnimation:function(a,b,c){var d=new spine.TrackEntry;return d.animation=b,d.loop=c,d.endTime=b.duration,this.setCurrent(a,d),d},addAnimationByName:function(a,b,c,d){var e=this.data.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;return this.addAnimation(a,e,c,d)},addAnimation:function(a,b,c,d){var e=new spine.TrackEntry;e.animation=b,e.loop=c,e.endTime=b.duration;var f=this._expandToIndex(a);if(f){for(;f.next;)f=f.next;f.next=e}else this.tracks[a]=e;return 0>=d&&(f?d+=f.endTime-this.data.getMix(f.animation,b):d=0),e.delay=d,e},getCurrent:function(a){return a>=this.tracks.length?null:this.tracks[a]}},spine.SkeletonJson=function(a){this.attachmentLoader=a},spine.SkeletonJson.prototype={scale:1,readSkeletonData:function(a){for(var b=new spine.SkeletonData,c=a.bones,d=0,e=c.length;e>d;d++){var f=c[d],g=null;if(f.parent&&(g=b.findBone(f.parent),!g))throw"Parent bone not found: "+f.parent;var h=new spine.BoneData(f.name,g);h.length=(f.length||0)*this.scale,h.x=(f.x||0)*this.scale,h.y=(f.y||0)*this.scale,h.rotation=f.rotation||0,h.scaleX=f.scaleX||1,h.scaleY=f.scaleY||1,h.inheritScale=f.inheritScale||!0,h.inheritRotation=f.inheritRotation||!0,b.bones.push(h)}for(var i=a.slots,d=0,e=i.length;e>d;d++){var j=i[d],h=b.findBone(j.bone);if(!h)throw"Slot bone not found: "+j.bone;var k=new spine.SlotData(j.name,h),l=j.color;l&&(k.r=spine.SkeletonJson.toColor(l,0),k.g=spine.SkeletonJson.toColor(l,1),k.b=spine.SkeletonJson.toColor(l,2),k.a=spine.SkeletonJson.toColor(l,3)),k.attachmentName=j.attachment,k.additiveBlending=j.additive,b.slots.push(k)}var m=a.skins;for(var n in m)if(m.hasOwnProperty(n)){var o=m[n],p=new spine.Skin(n);for(var q in o)if(o.hasOwnProperty(q)){var r=b.findSlotIndex(q),s=o[q];for(var t in s)if(s.hasOwnProperty(t)){var u=this.readAttachment(p,t,s[t]);null!=u&&p.addAttachment(r,t,u)}}b.skins.push(p),"default"==p.name&&(b.defaultSkin=p)}var v=a.events;for(var w in v)if(v.hasOwnProperty(w)){var x=v[w],y=new spine.EventData(w);y.intValue=x["int"]||0,y.floatValue=x["float"]||0,y.stringValue=x.string||null,b.events.push(y)}var z=a.animations;for(var A in z)z.hasOwnProperty(A)&&this.readAnimation(A,z[A],b);return b},readAttachment:function(a,b,c){b=c.name||b;var d=spine.AttachmentType[c.type||"region"],e=this.attachmentLoader.newAttachment(a,d,b);if(d==spine.AttachmentType.region)e.x=(c.x||0)*this.scale,e.y=(c.y||0)*this.scale,e.scaleX=c.scaleX||1,e.scaleY=c.scaleY||1,e.rotation=c.rotation||0,e.width=(c.width||32)*this.scale,e.height=(c.height||32)*this.scale,e.updateOffset();else if(d==spine.AttachmentType.boundingBox)for(var f=c.vertices,g=0,h=f.length;h>g;g++)e.vertices.push(f[g]*scale);return e},readAnimation:function(a,b,c){var d=[],e=0,f=b.bones;for(var g in f)if(f.hasOwnProperty(g)){var h=c.findBoneIndex(g);if(-1==h)throw"Bone not found: "+g;var i=f[g];for(var j in i)if(i.hasOwnProperty(j)){var k=i[j];if("rotate"==j){var l=new spine.RotateTimeline(k.length);l.boneIndex=h;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n];l.setFrame(m,p.time,p.angle),spine.SkeletonJson.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[2*l.getFrameCount()-2])}else{if("translate"!=j&&"scale"!=j)throw"Invalid timeline type for a bone: "+j+" ("+g+")";var l,q=1;"scale"==j?l=new spine.ScaleTimeline(k.length):(l=new spine.TranslateTimeline(k.length),q=this.scale),l.boneIndex=h;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n],r=(p.x||0)*q,s=(p.y||0)*q;l.setFrame(m,p.time,r,s),spine.SkeletonJson.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[3*l.getFrameCount()-3])}}}var t=b.slots;for(var u in t)if(t.hasOwnProperty(u)){var v=t[u],w=c.findSlotIndex(u);for(var j in v)if(v.hasOwnProperty(j)){var k=v[j];if("color"==j){var l=new spine.ColorTimeline(k.length);l.slotIndex=w;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n],x=p.color,y=spine.SkeletonJson.toColor(x,0),z=spine.SkeletonJson.toColor(x,1),A=spine.SkeletonJson.toColor(x,2),B=spine.SkeletonJson.toColor(x,3);l.setFrame(m,p.time,y,z,A,B),spine.SkeletonJson.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[5*l.getFrameCount()-5])}else{if("attachment"!=j)throw"Invalid timeline type for a slot: "+j+" ("+u+")";var l=new spine.AttachmentTimeline(k.length);l.slotIndex=w;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n];l.setFrame(m++,p.time,p.name)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}}}var C=b.events;if(C){for(var l=new spine.EventTimeline(C.length),m=0,n=0,o=C.length;o>n;n++){var D=C[n],E=c.findEvent(D.name);if(!E)throw"Event not found: "+D.name;var F=new spine.Event(E);F.intValue=D.hasOwnProperty("int")?D["int"]:E.intValue,F.floatValue=D.hasOwnProperty("float")?D["float"]:E.floatValue,F.stringValue=D.hasOwnProperty("string")?D.string:E.stringValue,l.setFrame(m++,D.time,F)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}var G=b.draworder;if(G){for(var l=new spine.DrawOrderTimeline(G.length),H=c.slots.length,m=0,n=0,o=G.length;o>n;n++){var I=G[n],J=null;if(I.offsets){J=[],J.length=H;for(var K=H-1;K>=0;K--)J[K]=-1;var L=I.offsets,M=[];M.length=H-L.length;for(var N=0,O=0,K=0,P=L.length;P>K;K++){var Q=L[K],w=c.findSlotIndex(Q.slot);if(-1==w)throw"Slot not found: "+Q.slot;for(;N!=w;)M[O++]=N++;J[N+Q.offset]=N++}for(;H>N;)M[O++]=N++;for(var K=H-1;K>=0;K--)-1==J[K]&&(J[K]=M[--O])}l.setFrame(m++,I.time,J)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}c.animations.push(new spine.Animation(a,d,e))}},spine.SkeletonJson.readCurve=function(a,b,c){var d=c.curve;d&&("stepped"==d?a.curves.setStepped(b):d instanceof Array&&a.curves.setCurve(b,d[0],d[1],d[2],d[3]))},spine.SkeletonJson.toColor=function(a,b){if(8!=a.length)throw"Color hexidecimal length must be 8, recieved: "+a;return parseInt(a.substring(2*b,2*b+2),16)/255},spine.Atlas=function(a,b){this.textureLoader=b,this.pages=[],this.regions=[];var c=new spine.AtlasReader(a),d=[];d.length=4;for(var e=null;;){var f=c.readLine();if(null==f)break;if(f=c.trim(f),0==f.length)e=null;else if(e){var g=new spine.AtlasRegion;g.name=f,g.page=e,g.rotate="true"==c.readValue(),c.readTuple(d);var h=parseInt(d[0]),i=parseInt(d[1]);c.readTuple(d);var j=parseInt(d[0]),k=parseInt(d[1]);g.u=h/e.width,g.v=i/e.height,g.rotate?(g.u2=(h+k)/e.width,g.v2=(i+j)/e.height):(g.u2=(h+j)/e.width,g.v2=(i+k)/e.height),g.x=h,g.y=i,g.width=Math.abs(j),g.height=Math.abs(k),4==c.readTuple(d)&&(g.splits=[parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3])],4==c.readTuple(d)&&(g.pads=[parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3])],c.readTuple(d))),g.originalWidth=parseInt(d[0]),g.originalHeight=parseInt(d[1]),c.readTuple(d),g.offsetX=parseInt(d[0]),g.offsetY=parseInt(d[1]),g.index=parseInt(c.readValue()),this.regions.push(g)}else{e=new spine.AtlasPage,e.name=f,e.format=spine.Atlas.Format[c.readValue()],c.readTuple(d),e.minFilter=spine.Atlas.TextureFilter[d[0]],e.magFilter=spine.Atlas.TextureFilter[d[1]];var l=c.readValue();e.uWrap=spine.Atlas.TextureWrap.clampToEdge,e.vWrap=spine.Atlas.TextureWrap.clampToEdge,"x"==l?e.uWrap=spine.Atlas.TextureWrap.repeat:"y"==l?e.vWrap=spine.Atlas.TextureWrap.repeat:"xy"==l&&(e.uWrap=e.vWrap=spine.Atlas.TextureWrap.repeat),b.load(e,f),this.pages.push(e)}}},spine.Atlas.prototype={findRegion:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},dispose:function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)this.textureLoader.unload(a[b].rendererObject)},updateUVs:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var e=b[c];e.page==a&&(e.u=e.x/a.width,e.v=e.y/a.height,e.rotate?(e.u2=(e.x+e.height)/a.width,e.v2=(e.y+e.width)/a.height):(e.u2=(e.x+e.width)/a.width,e.v2=(e.y+e.height)/a.height))}}},spine.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},spine.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},spine.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},spine.AtlasPage=function(){},spine.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},spine.AtlasRegion=function(){},spine.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},spine.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)},spine.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw"Invalid line: "+a;return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw"Invalid line: "+b;for(var d=0,e=c+1;3>d;d++){var f=b.indexOf(",",e);if(-1==f){if(0==d)throw"Invalid line: "+b;break}a[d]=this.trim(b.substr(e,f-e)),e=f+1}return a[d]=this.trim(b.substring(e)),d+1}},spine.AtlasAttachmentLoader=function(a){this.atlas=a},spine.AtlasAttachmentLoader.prototype={newAttachment:function(a,b,c){switch(b){case spine.AttachmentType.boundingbox:return new spine.BoundingBoxAttachment(c);case spine.AttachmentType.region:var d=this.atlas.findRegion(c);if(!d)throw"Region not found in atlas: "+c+" ("+b+")";var e=new spine.RegionAttachment(c);return e.rendererObject=d,e.setUVs(d.u,d.v,d.u2,d.v2,d.rotate),e.regionOffsetX=d.offsetX,e.regionOffsetY=d.offsetY,e.regionWidth=d.width,e.regionHeight=d.height,e.regionOriginalWidth=d.originalWidth,e.regionOriginalHeight=d.originalHeight,e}throw"Unknown attachment type: "+b}},spine.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},spine.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(a,b){var c=a.slots,d=c.length,e=a.x,f=a.y,g=this.boundingBoxes,h=this.polygonPool,i=this.polygons;g.length=0;for(var j=0,k=i.length;k>j;j++)h.push(i[j]);i.length=0;for(var j=0;d>j;j++){var l=c[j],m=l.attachment;if(m.type==spine.AttachmentType.boundingBox){g.push(m);var n=h.length;n>0?(polygon=h[n-1],h.splice(n-1,1)):polygon=[],i.push(polygon),polygon.length=m.vertices.length,m.computeWorldVertices(e,f,l.bone,polygon)}}b&&this.aabbCompute()},aabbCompute:function(){for(var a=this.polygons,b=Number.MAX_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=Number.MIN_VALUE,f=0,g=a.length;g>f;f++)for(var h=a[f],i=0,j=h.length;j>i;i+=2){var k=h[i],l=h[i+1];b=Math.min(b,k),c=Math.min(c,l),d=Math.max(d,k),e=Math.max(e,l)}this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},aabbContainsPoint:function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},aabbIntersectsSegment:function(a,b,c,d){var e=this.minX,f=this.minY,g=this.maxX,h=this.maxY;if(e>=a&&e>=c||f>=b&&f>=d||a>=g&&c>=g||b>=h&&d>=h)return!1;var i=(d-b)/(c-a),j=i*(e-a)+b;if(j>f&&h>j)return!0;if(j=i*(g-a)+b,j>f&&h>j)return!0;var k=(f-b)/i+a;return k>e&&g>k?!0:(k=(h-b)/i+a,k>e&&g>k?!0:!1)},aabbIntersectsSkeleton:function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},containsPoint:function(a,b){for(var c=this.polygons,d=0,e=c.length;e>d;d++)if(this.polygonContainsPoint(c[d],a,b))return this.boundingBoxes[d];return null},intersectsSegment:function(a,b,c,d){for(var e=this.polygons,f=0,g=e.length;g>f;f++)if(e[f].intersectsSegment(a,b,c,d))return boundingBoxes[f];return null},polygonContainsPoint:function(a,b,c){for(var d=a.length,e=d-2,f=!1,g=0;d>g;g+=2){var h=a[g+1],i=a[e+1];if(c>h&&i>=c||c>i&&h>=c){var j=a[g];j+(c-h)/(i-h)*(a[e]-j)<b&&(f=!f)}e=g}return f},intersectsSegment:function(a,b,c,d,e){for(var f=a.length,g=b-d,h=c-e,i=b*e-c*d,j=a[f-2],k=a[f-1],l=0;f>l;l+=2){var m=a[l],n=a[l+1],o=j*n-k*m,p=j-m,q=k-n,r=g*q-h*p,s=(i*p-g*o)/r;if((s>=j&&m>=s||s>=m&&j>=s)&&(s>=b&&d>=s||s>=d&&b>=s)){var t=(i*q-h*o)/r;if((t>=k&&n>=t||t>=n&&k>=t)&&(t>=c&&e>=t||t>=e&&c>=t))return!0}j=m,k=n}return!1},getPolygon:function(a){var b=this.boundingBoxes.indexOf(a);return-1==b?null:this.polygons[b]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},function(){var a={},b=null,c=!0,d=!1;if("undefined"!=typeof AudioContext)b=new AudioContext;else if("undefined"!=typeof webkitAudioContext)b=new webkitAudioContext;else if("undefined"!=typeof Audio){c=!1;try{new Audio}catch(e){d=!0}}else c=!1,d=!0;if(c){var f="undefined"==typeof b.createGain?b.createGainNode():b.createGain();f.gain.value=1,f.connect(b.destination)}var g=function(){this._volume=1,this._muted=!1,this.usingWebAudio=c,this._howls=[]};g.prototype={volume:function(a){var b=this;if(a=parseFloat(a),a>=0&&1>=a){b._volume=a,c&&(f.gain.value=a);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].volume=b._howls[d]._volume*b._volume;return b}return c?f.gain.value:b._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(a){var b=this;b._muted=a,c&&(f.gain.value=a?0:b._volume);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].muted=a}};var h=new g,i=null;if(!d){i=new Audio;var j={mp3:!!i.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var k=function(a){var b=this;b._autoplay=a.autoplay||!1,b._buffer=a.buffer||!1,b._duration=a.duration||0,b._format=a.format||null,b._loop=a.loop||!1,b._loaded=!1,b._sprite=a.sprite||{},b._src=a.src||"",b._pos3d=a.pos3d||[0,0,-.5],b._volume=void 0!==a.volume?a.volume:1,b._urls=a.urls||[],b._rate=a.rate||1,b._onload=[a.onload||function(){}],b._onloaderror=[a.onloaderror||function(){}],b._onend=[a.onend||function(){}],b._onpause=[a.onpause||function(){}],b._onplay=[a.onplay||function(){}],b._onendTimer=[],b._webAudio=c&&!b._buffer,b._audioNode=[],b._webAudio&&b._setupAudioNode(),h._howls.push(b),b.load()};if(k.prototype={load:function(){var b=this,c=null;if(d)return void b.on("loaderror");for(var e=0;e<b._urls.length;e++){var f,g;if(b._format)f=b._format;else{if(g=b._urls[e].toLowerCase().split("?")[0],f=g.match(/.+\.([^?]+)(\?|$)/),f=f&&f.length>=2?f:g.match(/data\:audio\/([^?]+);/),!f)return void b.on("loaderror");f=f[1]}if(j[f]){c=b._urls[e];break}}if(!c)return void b.on("loaderror");if(b._src=c,b._webAudio)l(b,c);else{var i=new Audio;b._audioNode.push(i),i.src=c,i._pos=0,i.preload="auto",i.volume=h._muted?0:b._volume*h.volume(),a[c]=b;var k=function(){b._duration=i.duration,0===Object.getOwnPropertyNames(b._sprite).length&&(b._sprite={_default:[0,1e3*b._duration]}),b._loaded||(b._loaded=!0,b.on("load")),b._autoplay&&b.play(),i.removeEventListener("canplaythrough",k,!1)};i.addEventListener("canplaythrough",k,!1),i.load()}return b},urls:function(a){var b=this;return a?(b.stop(),b._urls="string"==typeof a?[a]:a,b._loaded=!1,b.load(),b):b._urls},play:function(a,c){var d=this;return"function"==typeof a&&(c=a),a&&"function"!=typeof a||(a="_default"),d._loaded?d._sprite[a]?(d._inactiveNode(function(e){e._sprite=a;var f,g=e._pos>0?e._pos:d._sprite[a][0]/1e3,i=d._sprite[a][1]/1e3-e._pos,j=!(!d._loop&&!d._sprite[a][2]),k="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){var b={id:k,sprite:a,loop:j};f=setTimeout(function(){!d._webAudio&&j&&d.stop(b.id,b.timer).play(a,b.id),d._webAudio&&!j&&(d._nodeById(b.id).paused=!0,d._nodeById(b.id)._pos=0),d._webAudio||j||d.stop(b.id,b.timer),d.on("end",k)},1e3*i),d._onendTimer.push(f),b.timer=d._onendTimer[d._onendTimer.length-1]}(),d._webAudio){var l=d._sprite[a][0]/1e3,m=d._sprite[a][1]/1e3;e.id=k,e.paused=!1,n(d,[j,l,m],k),d._playStart=b.currentTime,e.gain.value=d._volume,"undefined"==typeof e.bufferSource.start?e.bufferSource.noteGrainOn(0,g,i):e.bufferSource.start(0,g,i)}else{if(4!==e.readyState)return d._clearEndTimer(f),function(){var b=d,f=a,g=c,h=e,i=function(){b.play(f,g),h.removeEventListener("canplaythrough",i,!1)};h.addEventListener("canplaythrough",i,!1)}(),d;e.id=k,e.currentTime=g,e.muted=h._muted,e.volume=d._volume*h.volume(),setTimeout(function(){e.play()},0)}return d.on("play"),"function"==typeof c&&c(k),d}),d):("function"==typeof c&&c(),d):(d.on("load",function(){d.play(a,c)}),d)},pause:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.pause(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=c.pos(null,a),c._webAudio){if(!d.bufferSource)return c;d.paused=!0,"undefined"==typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause();return c.on("pause"),c},stop:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.stop(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=0,c._webAudio){if(!d.bufferSource)return c;d.paused=!0,"undefined"==typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause(),d.currentTime=0;return c},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=0:c.volume=0),b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=b._volume:c.volume=b._volume),b},volume:function(a,b){var c=this;if(a=parseFloat(a),a>=0&&1>=a){if(c._volume=a,!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):c._activeNode();return d&&(c._webAudio?d.gain.value=a:d.volume=a*h.volume()),c}return c._volume},loop:function(a){var b=this;return"boolean"==typeof a?(b._loop=a,b):b._loop},sprite:function(a){var b=this;return"object"==typeof a?(b._sprite=a,b):b._sprite},pos:function(a,c){var d=this;if(!d._loaded)return d.on("load",function(){d.pos(a)}),"number"==typeof a?d:d._pos||0;a=parseFloat(a);var e=c?d._nodeById(c):d._activeNode();if(e)return d._webAudio?a>=0?(d.pause(c),e._pos=a,d.play(e._sprite,c),d):e._pos+(b.currentTime-d._playStart):a>=0?(e.currentTime=a,d):e.currentTime;if(a>=0)return d;for(var f=0;f<d._audioNode.length;f++)if(d._audioNode[f].paused&&4===d._audioNode[f].readyState)return d._webAudio?d._audioNode[f]._pos:d._audioNode[f].currentTime},pos3d:function(a,b,c,d){var e=this;if(b="undefined"!=typeof b&&b?b:0,c="undefined"!=typeof c&&c?c:-.5,!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(!(a>=0||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,b,c],f.panner.setPosition(a,b,c))}return e},fade:function(a,b,c,d,e){var f=this,g=Math.abs(a-b),h=a>b?"down":"up",i=g/.01,j=c/i;if(!f._loaded)return f.on("load",function(){f.fade(a,b,c,d,e)}),f;f.volume(a,e);for(var k=1;i>=k;k++)!function(){var a=f._volume+("up"===h?.01:-.01)*k,c=Math.round(1e3*a)/1e3,g=b;setTimeout(function(){f.volume(c,e),c===g&&d&&d()},j*k)}()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var e=this;return e.fade(e._volume,a,b,function(){c&&c(),e.pause(d),e.on("end")},d)},_nodeById:function(a){for(var b=this,c=b._audioNode[0],d=0;d<b._audioNode.length;d++)if(b._audioNode[d].id===a){c=b._audioNode[d];break}return c},_activeNode:function(){for(var a=this,b=null,c=0;c<a._audioNode.length;c++)if(!a._audioNode[c].paused){b=a._audioNode[c];break}return a._drainPool(),b},_inactiveNode:function(a){for(var b=this,c=null,d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState){a(b._audioNode[d]),c=!0;break}if(b._drainPool(),!c){var e;b._webAudio?(e=b._setupAudioNode(),a(e)):(b.load(),e=b._audioNode[b._audioNode.length-1],e.addEventListener("loadedmetadata",function(){a(e)}))}},_drainPool:function(){var a,b=this,c=0;for(a=0;a<b._audioNode.length;a++)b._audioNode[a].paused&&c++;for(a=b._audioNode.length-1;a>=0&&!(5>=c);a--)b._audioNode[a].paused&&(b._webAudio&&b._audioNode[a].disconnect(0),c--,b._audioNode.splice(a,1))},_clearEndTimer:function(a){var b=this,c=b._onendTimer.indexOf(a);c=c>=0?c:0,b._onendTimer[c]&&(clearTimeout(b._onendTimer[c]),b._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this,c=a._audioNode,d=a._audioNode.length;return c[d]="undefined"==typeof b.createGain?b.createGainNode():b.createGain(),c[d].gain.value=a._volume,c[d].paused=!0,c[d]._pos=0,c[d].readyState=4,c[d].connect(f),c[d].panner=b.createPanner(),c[d].panner.setPosition(a._pos3d[0],a._pos3d[1],a._pos3d[2]),c[d].panner.connect(c[d]),c[d]},on:function(a,b){var c=this,d=c["_on"+a];if("function"==typeof b)d.push(b);else for(var e=0;e<d.length;e++)b?d[e].call(c,b):d[e].call(c);return c},off:function(a,b){for(var c=this,d=c["_on"+a],e=b.toString(),f=0;f<d.length;f++)if(e===d[f].toString()){d.splice(f,1);break}return c},unload:function(){for(var b=this,c=b._audioNode,d=0;d<b._audioNode.length;d++)c[d].paused||b.stop(c[d].id),b._webAudio?c[d].disconnect(0):c[d].src="";var e=h._howls.indexOf(b);null!==e&&e>=0&&h._howls.splice(e,1),delete a[b._src],b=null}},c)var l=function(c,d){if(d in a)c._duration=a[d].duration,m(c);else{var e=new XMLHttpRequest;e.open("GET",d,!0),e.responseType="arraybuffer",e.onload=function(){b.decodeAudioData(e.response,function(b){b&&(a[d]=b,m(c,b))},function(){c.on("loaderror")})},e.onerror=function(){c._webAudio&&(c._buffer=!0,c._webAudio=!1,c._audioNode=[],delete c._gainNode,c.load())};try{e.send()}catch(f){e.onerror()}}},m=function(a,b){a._duration=b?b.duration:a._duration,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play()},n=function(c,d,e){var f=c._nodeById(e);f.bufferSource=b.createBufferSource(),f.bufferSource.buffer=a[c._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=d[0],d[0]&&(f.bufferSource.loopStart=d[1],f.bufferSource.loopEnd=d[1]+d[2]),f.bufferSource.playbackRate.value=c._rate};"function"==typeof define&&define.amd&&define("howler",function(){return{Howler:h,Howl:k}}),window.Howler=h,window.Howl=k}();var modules=modules||{};modules.devgru=modules.devgru||{},modules.devgru.sugar=function(a,b){"use strict";var c=function(a){return n(a.width)&&n(a.height)},d=function(a){return n(a.x)&&n(a.y)},e=function(a){return r(a,"get")&&j(a.get)&&r(a,"set")&&j(a.set)&&r(a,"transpose")&&j(a.transpose)&&r(a,"add")&&j(a.add)&&r(a,"multiply")&&j(a.multiply)?!0:void 0},f=function(a){return r(a,"get")&&j(a.get)&&r(a,"getValue")&&j(a.getValue)&&r(a,"iterate")&&j(a.iterate)&&r(a,"set")&&j(a.iterate)&&r(a,"unset")&&j(a.iterate)?!0:void 0},g=function(a){return"string"==typeof a||a instanceof String},h=Array.prototype.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},i=function(a){return"[object Object]"===Object.prototype.toString.call(a)},j=function(a){return"[object Function]"===Object.prototype.toString.call(a)},k=function(a,b){var c=a.length;if(c!=b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0},l=function(b,c){var d,e,f,g,h,i,j,k=[],l=a;for(e=0,g=b.length;g>e;++e){if(l=a,i=b[e].split("."),1===i.length)j=a[i];else for(d=0,f=i.length;f>d;++d)h=i[d],d===f-1?j=l[h]:l[h]&&(l=l[h]);if(!j||!this.isFunction(j))throw"devgru.sugar.imports: Module "+b[e]+" not found or not a function";k.push(j)}return c.apply(devgru,k)},m=function(){},n=function(a){return"[object Number]"===Object.prototype.toString.call(a)},o=function(a){return a===!0||a===!1||"[object Boolean]"===Object.prototype.toString.call(a)},p=function(a){return"[object Date]"===Object.prototype.toString.call(a)},q=function(a){return parseFloat(a)===parseInt(a,10)&&!isNaN(a)},r=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},s=function(a){return void 0===a},t=function(a){return void 0!==a},u=function(a){var b;if(""===a||0===a||"0"===a||null===a||a===!1||this.isUndefined(a))return!0;if(this.isArray(a)&&0===a.length)return!0;if(this.isObject(a)){for(b in a)if(this.has(a,b))return!1;return!0}return!1},v=function(a){return"[object Arguments]"===Object.prototype.toString.call(a)},w=function(a,b){return a+Math.floor(Math.random()*(b-a+1))},x=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},y=function(){for(var a=this.toArray(arguments),b=this["is"+this.upperFirst(a.shift())],c=a.length;c--;)if(!b.call(null,a[c]))return!1;return!0},z=function(a,b){var c;if(this.multiIs("array",a,b))return a.concat(b);for(c in b)this.has(b,c)&&(this.has(a,c)&&(a.base=a.base||{},a.base[c]=a[c]),a[c]=this.isObject(b[c])?this.combine({},b[c]):b[c]);return a},A=function(a){return/^\[object (HTMLCollection|NodeList|Object)\]$/.test(toString.call(a))&&this.isNumber(a.length)&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},B=function(a){var b,c=[];if(!a)return[a];if(this.isArgument(a))return Array.prototype.slice.call(a);if(this.isString(a)&&a.split(""),this.isArray(a))return Array.prototype.slice.call(a);if(this.isDomList(a))return Array.prototype.slice.call(a);for(b in a)this.has(a,b)&&c.push(a[b]);return c},C=function(a,b){return this.isString(a)?-1!==a.indexOf(b)?!0:!1:this.isArray(a)?-1!==this.indexOf(a,b)?!0:!1:this.has(a,b)},D=function(a,b){var c=0;if(null===a)return-1;if(a.indexOf)return a.indexOf(b);for(c=a.length;c--;)if(a[c]===b)return c;return-1},E=function(a){return!(!a||1!==a.nodeType)},F=function(a){var b,c=0;if(!a)return 0;if(this.isObject(a))for(b in a)this.has(a,b)&&++c;return(this.isString(a)||this.isArray(a)||this.isArguments(a))&&(c=a.length),this.isNumber(a)&&(c=a.toString().length),c},G=function(a){return this.combine({},a,!0)},H=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},I=Object.prototype.keys||function(a){var b,c=[];if(a==Object(a))for(b in a)this.has(a,b)&&(c[c.length]=b);return c},J=function(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(a,arguments))}},K=function(a,b){var c={};return b=b||function(a){return a},function(){var d=b.apply(null,arguments);return this.has(c,d)?c[d]:c[d]=a.apply(a,arguments)}},L=function(a,b){var c,d;for(c=0,d=a.length;d>c;++c)if(a[c]===b){a.splice(c,1);break}},M=function(c,d,e){var f;return c.style&&this.isEmpty(c.style[d])?c.currentStyle?f=c.currentStyle[d]:a.getComputedStyle&&(f=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)):c.style&&(f=c.style[d]),e?parseFloat(f):f},N=function(a){return typeof a==typeof Function},O=function(a,c,d){var e;return d&&(d.style.display="none"),e=b.elementFromPoint(a,c),e&&this&&this.containsClass(e,"omit")&&(e=O(a,c,e)),d&&(d.style.display=""),e},P=function(a,c,d){var e,f=!1,g=[];for(d&&(d.style.display="none"),f=b.elementFromPoint(a,c);f&&"BODY"!==f.tagName&&"HTML"!==f.tagName;)g.push(f),U(f,"animated"),f.style.display="none",f=b.elementFromPoint(a,c);for(e=0;e<g.length;++e)g[e].style.display="block";return d&&(d.style.display="block"),g},Q=function(a,b){return a.getAttribute("data-"+b)},R=function(a,b,c){return a.setAttribute("data-"+b,c)},S=function(a,c){return(S=b.documentElement.classList?function(a,b){return a.classList.contains(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return a.className.match(c)})(a,c)},T=function(a,c){var d,e,f=this;return(T=b.documentElement.classList?function(a,b){if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.classList.add(b[d]);else a.classList.add(b)}:function(a,b){if(!a)return!1;if(!S(a,b))if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.className+=(a.className?" ":"")+b[d];else a.className+=(a.className?" ":"")+b})(a,c)},U=function(a,c){return(U=b.documentElement.classList?function(a,b){a.classList.remove(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"$2")})(a,c)},V=function(a){a.className="",a.setAttribute("class","")},W=function(a,c){return(W=b.documentElement.classList&&b.documentElement.classList.toggle?function(a,b){return a.classList.toggle(b)}:function(a,b){return S(a,b)?(U(a,b),!1):(T(a,b),!0)})(a,c)},X=function(a,b){if(document.createEvent){var c=document.createEvent("MouseEvents");return c.initEvent(b,!0,!1),a.dispatchEvent(c),!0}return document.createEventObject?(a.fireEvent("on"+b),!0):"function"==typeof a["on"+b]?(a["on"+b](),!0):!1},Y=function(a){return b.querySelector(a)},Z=function(a,b){function c(){var f=(new Date).getTime();f-d>=b?a():e=requestAnimationFrame(c)}var d=(new Date).getTime(),e=null;return void 0===b&&(b=1),c(),{cancel:function(){"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(e)}}},$=function(a,b,c,d){var e,f,g={start:["animationstart","animationstart","webkitAnimationStart","oanimationstart","MSAnimationStart"],iteration:["animationiteration","animationiteration","webkitAnimationIteration","oanimationiteration","MSAnimationIteration"],end:["animationend","animationend","webkitAnimationEnd","oanimationend","MSAnimationEnd"],tend:["transitionend","transitionend","webkitTransitionEnd","otransitionend","MSTransitionEnd"]},h=g[b]||[],d=d||"add";for(f=0,e=h.length;e>f;++f)"add"===d?a.addEventListener(h[f],c,!1):"remove"===d&&a.removeEventListener(h[f],c,!1)},_=function(c){var d=b.readyState;"complete"===d||"interactive"===d?c():a.addEventListener?a.addEventListener("DOMContentLoaded",c):a.attachEvent("onload",c)},ab=function(){var a=function(a,c){return b(a.slice(),c)},b=function(a,b){"function"!=typeof b&&(b=function(a,b){return String(a).localeCompare(b)});var d=a.length;if(1>=d)return a;for(var e=new Array(d),f=1;d>f;f*=2){c(a,b,f,e);var g=a;a=e,e=g}return a},c=function(a,b,c,d){var e,f,g,h,i,j=a.length,k=0,l=2*c;for(e=0;j>e;e+=l)for(f=e+c,g=f+c,f>j&&(f=j),g>j&&(g=j),h=e,i=f;;)if(f>h&&g>i)d[k++]=b(a[h],a[i])<=0?a[h++]:a[i++];else if(f>h)d[k++]=a[h++];else{if(!(g>i))break;d[k++]=a[i++]}};return a.inplace=function(a,d){var e=b(a,d);return e!==a&&c(e,null,a.length,a),a},a}();return Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=obj.__proto__||obj.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=window,d=0;d<b.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[b[d]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[b[d]+"CancelAnimationFrame"]||c[b[d]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=c.setTimeout(function(){b(d+e)},e);return a=d+e,f}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)})}(),CanvasRenderingContext2D.prototype.clear=CanvasRenderingContext2D.prototype.clear||function(a){a&&(this.save(),this.setTransform(1,0,0,1,0,0)),this.clearRect(0,0,this.canvas.width,this.canvas.height),a&&this.restore()},{isVector:d,isDimension:c,isMatrix:e,isString:g,isArray:h,isArray2D:f,isObject:i,isFunction:j,emptyFn:m,isNumber:n,isBoolean:o,isDate:p,isInt:q,has:r,isUndefined:s,isDefined:t,isEmpty:u,isArgument:v,getRandom:w,upperFirst:x,multiIs:y,combine:z,imports:l,isDomList:A,toArray:B,contains:C,indexOf:D,isElement:E,size:F,clone:G,isRegex:H,keys:I,once:J,memoize:K,removeObject:L,getStyle:M,isFunctionByType:N,getNodeOnPoint:O,getNodesOnPoint:P,getData:Q,setData:R,containsClass:S,addClass:T,removeClass:U,removeClasses:V,toggleClass:W,triggerEvent:X,$:Y,setAnimationFrameTimeout:Z,animationEvent:$,domReady:_,arrayMatch:k,sort:{stable:ab}}
}(window,window.document);var adapters=adapters||{};adapters.devgru=function(a,b){"use strict";return{module:{create:a.define,get:a.require,config:a.requirejs.config},sugar:b.sugar,audio:Howl}}(window,modules.devgru),function(a){var b=function(a){"use strict";return{module:a.devgru.module,sugar:a.devgru.sugar,audio:a.devgru.audio}}(adapters);a.devgru={module:b.module},a.game={},b.module.create("devgru",function(){return b})}(window),devgru.module.create("devgru/basecomponent",["devgru"],function(a){"use strict";var b=a.sugar;return function(a,c){var d,e,f;return b.isString(a)&&(d=a,e=c||{}),{set:function(c){return b.isObject(c)?(f=c,e[a]=c,b.isFunction(c.register)&&c.register(),e):void 0},getName:function(){return d},getBaseObject:function(){return e},getComponent:function(){return f},register:function(a){e.register(a,f[a],d)},unregister:function(a){e.unregister(a,d)}}}}),devgru.module.create("devgru/baseobject",["devgru","devgru/math/vector","devgru/math/rectangle","devgru/math/dimension","devgru/math/matrix"],function(a,b,c,d,e){var f=a.sugar,g=0;return function(){var a,h,i,j,k,l=!0,m=!0,n=Array.prototype.slice.call(arguments),o=null,p=b(0,0),q=b(0,0),r=d(0,0),s=n.length,t=0,u=["update","draw","pointerDown","pointerMove","pointerUp"],v=["animatable","spritable","spineable"],w=v.length,x={destroy:{},draw:{},update:{},pointerDown:{},pointerMove:{},pointerUp:{}},y=[],z=[],A=null,B=++g,C=function(a,b){var c;i=x[a];for(c in i)"draw"===a&&f.contains(v,c)||i[c].call(F,b)},D=function(a){var b,c,d,g=f.clone(a),h=g.position.toMatrix(),i=e(3,3),j=e(3,3),k=e(3,3);i.set(2,0,-p.x),i.set(2,1,-p.y),h.multiply(i);for(d in x.draw)"rotatable"===d&&(b=Math.sin(-F.rotatable.getAngleRadian()),c=Math.cos(-F.rotatable.getAngleRadian()),k.set(0,0,c),k.set(1,0,-b),k.set(0,1,b),k.set(1,1,c),h.multiply(k)),"scalable"===d&&(j.set(0,0,1/F.scalable.getScale().x),j.set(1,1,1/F.scalable.getScale().y),h.multiply(j));return g.position.x=h.get(0,0),g.position.y=h.get(0,1),g.parent=a,g},E=function(){var a,b;for(a=0;a<z.length;++a)b=z[a],f.isFunction(b.destroy)&&b.destroy(),f.removeObject(y,b);z.length=0},F={add:function(a){return f.combine(this,a)},setName:function(b){a=b},getName:function(){return a},update:function(a){var b,c;if(l)for(C("update",a),E(),b=0,c=y.length;c>b;++b)y[b].update(a)},count:0,updateWhenPaused:!1,draw:function(a){var c,d,e=a.scroll||b(0,0),f=a.context;if(m){for(f.save(),f.translate(Math.round(p.x),Math.round(p.y)),null===A&&f.translate(Math.round(-e.x),Math.round(-e.y)),C("draw",a),f.translate(Math.round(-q.x),Math.round(-q.y)),j=0;w>j;++j)k=x.draw[v[j]],k&&k(a);for(f.translate(Math.round(q.x),Math.round(q.y)),c=0,d=y.length;d>c;++c)y[c].draw(a);f.restore()}},pointerDown:function(a){var b,c,d=y.length;if(l&&(C("pointerDown",a),d))for(c=D(a),b=0;d>b;++b)y[b].pointerDown(c)},pointerMove:function(a){var b,c,d=y.length;if(l&&(C("pointerMove",a),d))for(c=D(a),b=0;d>b;++b)y[b].pointerMove(c)},pointerUp:function(a){var b,c,d=y.length;if(l&&(C("pointerUp",a),d))for(c=D(a),b=0;d>b;++b)y[b].pointerUp(c)},register:function(a,b,c){f.contains(u,a)&&f.isFunction(b)&&(x[a][c]=b)},unregister:function(a,b){f.contains(u,a)&&f.isFunction(x[a][b])&&delete x[a][b]},getPosition:function(){return p},setPosition:function(a){f.isVector(a)&&(p.x=a.x,p.y=a.y,this.updateBoundingBox())},setPositionObject:function(a){f.isVector(a)&&(p=a,this.updateBoundingBox())},getDimension:function(){return r},setDimension:function(a){f.isDimension(a)&&(r=a,this.updateBoundingBox())},getBoundingBox:function(){return h},setBoundingBox:function(a){h=a},updateBoundingBox:function(){var a=F.scalable?F.scalable.getScale():b(1,1),d=p.x-q.x*a.x,e=p.y-q.y*a.y,f=p.x+(r.width-q.x)*a.x,g=p.y+(r.height-q.y)*a.y;a.x<0&&(f=[d,d=f][0]),a.y<0&&(g=[e,e=g][0]),h=c(d,e,f,g)},setOrigin:function(a){f.isVector(a)&&(q.x=f.isNumber(a.x)?a.x:q.x,q.y=f.isNumber(a.y)?a.y:q.y,this.updateBoundingBox())},getOrigin:function(){return q},isActive:function(){return l},setActive:function(a){if(!f.isBoolean(a))throw"value should be a boolean";l=a},isVisible:function(){return m},setVisible:function(a){if(!f.isBoolean(a))throw"value should be a boolean";m=a},addChild:function(a){y.push(a),a.setParent(this),a.init&&a.init()},removeChild:function(a){z.push(a)},getChildren:function(){return y},setParent:function(a){A=a},getParent:function(){return A},getID:function(){return B}};for(t;s>t;++t)(o=n[t])(F);return F}}),devgru.module.create("devgru/component/animatable",["devgru","devgru/math/vector","devgru/basecomponent","devgru/component/spritable"],function(a,b,c,d){"use strict";var e=a.sugar;return function(a){var b,f,g,h,i,j,k,l,m,n,o,p,q=c("animatable",a),r=d(a).spritable,s={},t=0,u=1,v=60,w=1/v,x=w,y=function(){l||(r.setImage(f.image),l=f.image),u=f.endFrame-f.startFrame,w=f.fps?1/f.fps:1/b.fps,x=w,j=f.startFrame,k=f.endFrame,t=j,m=f.loopCount||void 0,p=f.onComplete||void 0,n=0,o=!0};return q.set({setup:function(a){if(a){if(!a.animation)throw"Specify settings.animation";if(b=a.animation,a.animation.animations&&(s=a.animation.animations),!(e.isDefined(a.animation.frameCount)||e.isDefined(a.animation.frameWidth)&&e.isDefined(a.animation.frameHeight)))throw"Specify settings.animation.frameCount"}r.setup(a),a.image&&(l=a.image,g=a.animation.frameWidth||a.image.width/a.animation.frameCount,h=a.animation.frameHeight||a.image.height,i=a.image.width/g)},update:function(a){o&&(x-=a.deltaT,0>=x&&(x=w,++t,t>k&&(e.isDefined(m)&&(++n,n===m&&(o=!1,e.isDefined(p)&&p.call(this.animatable))),t=j)))},draw:function(b){{var c=(a.getPosition(),Math.floor(t/i)*h),d=t%i*g;a.getOrigin()}b.context.drawImage(l,d,c,g,h,0,0,g,h)},setAnimation:function(a){s[a]&&(f=s[a],y())},getDimension:function(){var b=a.getDimension();return b.width=g,b},getBoundingBox:function(){var b=a.getBoundingBox();return b.x2=b.x1+g,b},getFrameWidth:function(){return g},register:function(){q.register("draw"),q.register("update")},unregister:function(){q.unregister("draw"),q.unregister("update")}}),a}}),devgru.module.create("devgru/component/clickable",["devgru","devgru/basecomponent"],function(a,b){"use strict";return function(a){var c=b("clickable",a),d=function(b){return a.getBoundingBox().hasPosition(b.position)},e=function(b){d(b)&&(a.onClickDown&&a.onClickDown(b),a.onClick&&a.onClick(b))},f=function(b){d(b)&&a.onClickUp&&a.onClickUp(b)};return c.set({pointerDown:function(a){e(a)},pointerUp:function(a){f(a)},register:function(){c.register("pointerDown"),c.register("pointerUp")},unregister:function(){c.unregister("pointerDown"),c.unregister("pointerUp")}}),a}}),devgru.module.create("devgru/component/draggable",["devgru","devgru/math/vector","devgru/event/system","devgru/basecomponent"],function(a,b,c,d){"use strict";var e=[],f=30;return function(a){var g,h=d("draggable",a),i=!1,j=b(0,0),k=function(a){var b,c=0,d=e.length,f=!0;for(c;d>c;++c)if(b=e[c],b!==a&&b.z>a.z){f=!1;break}return f},l=function(b){return a.getBoundingBox().hasPosition(b.position)},m=function(b){l(b)&&i===!1&&(e.push(a),setTimeout(function(){return k(a)?(i=!0,g=b.pointerId,j=b.position.substract(a.getPosition()),a.dragStart&&a.dragStart(b),!1):void 0},f))},n=function(b){i===!0&&g===b.pointerId&&(a.setPosition(b.position.substract(j)),a.dragMove&&a.dragMove(b))},o=function(b){return i===!0?(c.fire("draggable.drop",a,b),e=[],g=void 0,i=!1,a.dragEnd&&a.dragEnd(b,function(){}),!1):void 0};return h.set({pointerDown:function(a){m(a)},pointerMove:function(a){n(a)},pointerUp:function(a){o(a)},dragStartTimeout:function(a){f=a},register:function(){h.register("pointerDown"),h.register("pointerMove"),h.register("pointerUp")},unregister:function(){h.unregister("pointerDown"),h.unregister("pointerMove"),h.unregister("pointerUp")}}),a}}),devgru.module.create("devgru/component/droptarget",["devgru","devgru/event/system","devgru/basecomponent"],function(a,b,c){"use strict";return function(a){var d=c("droptarget",a),e=function(b,c){return a.getBoundingBox().hasPosition(c.position)},f=function(b,c){e(a,c)&&a.onDrop&&a.onDrop(b,c)};return d.set({setup:function(){b.on("draggable.drop",f)},destroy:function(){b.off("draggable.drop",f)}}),a}}),devgru.module.create("devgru/component/fadable",["devgru","devgru/basecomponent"],function(a,b){"use strict";var c=a.sugar;return function(a){var d,e,f=b("fadable",a),g=!1,h=!1,i=.5,j=null;return f.set({update:function(a){var b=a.deltaT;g===!0?e-b*i>d?d+=i*b:(d=e,g=!1,null!==j&&j()):h===!0&&(d>e+b*i?d-=i*b:(d=e,h=!1,null!==j&&j()))},draw:function(a){a.context.globalAlpha=d},fade:function(a,b,f){d=b,e=f,g=f>b?!0:!1,h=b>f?!0:!1,c.isDefined(a)&&(j=a)},fadeIn:function(a,b){d=0,e=b||1,g=!0,c.isDefined(a)&&(j=a)},fadeOut:function(a,b){d=1,e=b||0,h=!0,c.isDefined(a)&&(j=a)},setAlpha:function(a){c.isNumber(a)&&(d=a)},getAlpha:function(){return d},setTargetAlpha:function(a){c.isNumber(a)&&(e=a)},getTargetAlpha:function(){return e},setFadeSpeed:function(a){c.isNumber(a)&&(i=a)},getFadeSpeed:function(){return i},atTarget:function(){return!g&&!h},register:function(){f.register("draw"),f.register("update")},unregister:function(){f.unregister("draw"),f.unregister("update")}}),a}}),devgru.module.create("devgru/component/hoverable",["devgru","devgru/basecomponent"],function(a,b){"use strict";return function(a){var c=b("hoverable",a),d="not hovered",e=function(b){return a.getBoundingBox().hasPosition(b.position)},f=function(b){e(b)?"not hovered"===d&&(a.hoverOver&&a.hoverOver(b),d="hovered"):"hovered"===d&&(a.hoverOut&&a.hoverOut(b),d="not hovered")};return c.set({pointerMove:function(a){f(a)},register:function(){c.register("pointerMove")},unregister:function(){c.unregister("pointerMove")}}),a}}),devgru.module.create("devgru/component/kineticable",["devgru","devgru/basecomponent","devgru/math","devgru/math/vector","devgru/math/dimension","devgru/math/rectangle","devgru/math/circle","devgru/sat"],function(a,b,c,d,e,f,g,h){"use strict";var i=a.sugar;return function(a){var j,k,l,m=b("kineticable",a),n=c(),o=d(0,0),p=d(0,0),q=d(0,0),r=d(0,0),s=d(0,0),t=e(0,0),u=!0,v=0,w=d(1,1);return m.set({setup:function(b){i.isDefined(b)&&(i.isDefined(b.gravity)&&this.setGravity(b.gravity),i.isDefined(b.bounce)&&this.setBounce(b.bounce),i.isDefined(b.velocity)&&this.setVelocity(b.velocity),i.isDefined(b.maxVelocity)&&this.setMaxVelocity(b.maxVelocity),i.isDefined(b.radius)&&this.setRadius(b.radius),i.isDefined(b.dynamic)&&this.setDynamic(b.dynamic)),q=a.getPosition(),k=a.getOrigin(),i.isDefined(a.scalable)&&(w=a.scalable.getScale()),t=i.isDefined(a.animatable)?a.animatable.getDimension():a.getDimension(),t.width*=w.x,t.height*=w.y,i.isUndefined(j)&&(l=Math.max(t.width,t.height),j=Math.sqrt(-l/2*(-l/2)+-l/2*(-l/2)))},update:function(){r.x=r.y=0,o.add(p),0!==s.x&&Math.abs(o.x)>s.x&&(o.x=s.x*n.sign(o.x)),0!==s.y&&Math.abs(o.y)>s.y&&(o.y=s.y*n.sign(o.y)),q.add(o),a.setPosition(q)},setVelocity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";o=a},setGravity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";p=a},setDimension:function(a){if(!i.isDimension(t))throw"The argument must be a Dimension";t=a},setDynamic:function(a){if(!i.isBoolean(a))throw"The argument must be a Boolean";u=a},setBounce:function(a){if(!i.isNumber(a))throw"The argument must be a Number";v=a},setRadius:function(a){if(!i.isNumber(a))throw"The argument must be a Number";j=a},setPosition:function(b){if(!i.isVector(b))throw"The argument must be a Vector";a.setPosition(b)},setSide:function(a){if(!i.isVector(a))throw"The argument must be a Vector";r=a},setMaxVelocity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";s=a},getVelocity:function(){return o},getGravity:function(){return p},getPosition:function(){return q},getDimension:function(){return t},isDynamic:function(){return u},getBounce:function(){return v},getRadious:function(){return j},getMaxVelocity:function(){return s},isTouching:function(a){return a===h.TOP&&r.y>0||a===h.BOTTOM&&r.y<0||a===h.LEFT&&r.x>0||a===h.RIGHT&&r.x<0},toRectangle:function(){return f(q.x-k.x*Math.abs(w.x),q.y-k.y*Math.abs(w.y),t.width,t.height)},toCircle:function(){return g(q.x+t.width/2,q.y+t.height/2,j)},getSide:function(){return r},register:function(){m.register("update")},unregister:function(){m.unregister("update")}}),a}}),devgru.module.create("devgru/component/movable",["devgru","devgru/basecomponent","devgru/math/vector"],function(a,b){"use strict";var c=a.sugar;return function(a){var d,e=b("movable",a),f=null,g=100,h=!0,i=0;return e.set({update:function(b){var c=b.deltaT;if(null!==f){var e,j,k;d=a.getPosition(),j=f.x-d.x,k=f.y-d.y,Math.sqrt(j*j+k*k)<g*c?(h=!0,d=f,a.setPosition(d)):(e=Math.atan2(k,j),d.x+=Math.cos(e)*g*c,d.y+=Math.sin(e)*g*c,i=180*e/Math.PI,a.setPosition(d))}},hasTarget:function(){return null!==f},atTarget:function(){return h},getRotation:function(){return i},setTarget:function(a){if(!c.isObject(a)&&c.isDefined(a.x)&&c.isDefined(a.y))throw"Invalid target supplied";h=!1,f=a},setMoveSpeed:function(a){if(!c.isNumber(a))throw"Invalid speed supplied";g=a},register:function(){e.register("update")},unregister:function(){e.unregister("update")}}),a}}),devgru.module.create("devgru/component/plugin/spineable",["devgru","devgru/basecomponent","devgru/math/rectangle","devgru/math/vector","devgru/math/dimension","devgru/loader"],function(a,b,c,d,e,f){"use strict";var g=a.sugar;return function(a){var h,i=b("spineable",a),j={},k={},l={},m={},n={},o={},p="",q="",r=((new Date).getTime(),Array(8)),s=(c(0,0,0,0),{}),t={},u={},v={},w=function(b){var c=0;if(!g.isDefined(b))throw"Specify settings object to Spine";if(!g.isDefined(b.animation))throw"Specify animation to Spine";for("string"==typeof b.animation&&(b.animation=[b.animation]),c;c<b.animation.length;++c)p=b.animation[c],x(b.animation[c]),y(b.animation[c]);b.position&&a&&a.setPosition(b.position)},x=function(a){var b=f.getBinary(a),c={},d=f.getImage(a);j[p]=new spine.Atlas(b,{load:function(a){var b=d;a.image=b,a.width=b.width,a.height=b.height,c=a}}),j[p].updateUVs(c)},y=function(b){var c,d=0;for(l[p]=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(j[p])),h.skeletonResolution&&(l[p].scale=h.skeletonResolution),m[p]=l[p].readSkeletonData(f.getJSON(b)),k[p]=new spine.Skeleton(m[p]),spine.Bone.yDown=!0,a&&(k[p].getRootBone().x=a.getPosition().x,k[p].getRootBone().y=a.getPosition().y),k[p].updateWorldTransform(),n[p]=new spine.AnimationStateData(m[p]),o[p]=new spine.AnimationState(n[p]),d;d<m[p].animations.length;++d){if(c=m[p].animations[d].name,g.has(v,c))throw"Animation with name "+c+" already exists";v[c]=p}z()},z=function(){var b=k[p],e=0,f=b.slots.length,g={},h={},i=c(0,0,0,0),j=b.getRootBone(),l=c(0,0,0,0);for(a&&(l.x1=a.getPosition().x,l.y1=a.getPosition().y),e;f>e;++e)g=b.slots[e],h=g.attachment,h instanceof spine.RegionAttachment&&(h.computeVertices(b.x,b.y,g.bone,r),i.x1=r[2],i.y1=r[3],i.setWidth(h.width),i.setHeight(h.height),l.union(i));s[p]=l,t[p]=d(0,0),t[p].x=l.x1-j.x,t[p].y=l.y1-j.y,u[p]=d(0,0),A()},A=function(){var b=s[p],c=b.getWidth(),d=b.getHeight();a&&a.setDimension(e(c,d))};return i.set({draw:function(b){var c,e,f,g,h,i,j,l,m,n,o,q,s=b.context,v={},w={},x=k[p],y=0,z=x.drawOrder.length,A=t[p],B=u[p],C=d(0,0);for(a&&(C=a.getPosition()),q=d(A.x+B.x,A.y+B.y),y;z>y;++y)v=x.drawOrder[y],w=v.attachment,w instanceof spine.RegionAttachment&&(w.computeVertices(x.x,x.y,v.bone,r),c=r[2]-q.x,e=r[3]-q.y,f=w.rendererObject.width,g=w.rendererObject.height,h=w.rendererObject.x,i=w.rendererObject.y,j=w.scaleX,l=w.scaleY,m=v.bone.scaleX,n=v.bone.scaleY,o=-(v.bone.worldRotation+w.rotation)*Math.PI/180,s.save(),s.translate(Math.round(c),Math.round(e)),s.rotate(o),s.globalAlpha=v.a,s.scale(m*j,n*l),s.drawImage(w.rendererObject.page.image,h,i,f,g,0,0,f,g),s.restore())},update:function(a){var b=k[p];return o[p].update(a.deltaT),o[p].apply(b),b.updateWorldTransform(),!0},setup:function(a){h=a,w(h)},setAnimation:function(b,c,d,e){if(!g.has(v,b))throw"There is no skeleton which contains an animation called "+b;return q===b?!1:(a.spineable.setSkeleton(v[b]),o[p].onComplete=g.isDefined(e)?e:null,g.isDefined(c)||(c=!0),g.isDefined(d)||(d=1),q=b,o[p].setAnimationByName(0,b,c),o[p].timeScale=d,k[p].setSlotsToSetupPose(),!0)},getAnimation:function(){return q},getRootBone:function(){return k[p].getRootBone()},getSkeletonResolution:function(){return l[p].scale},addSkeleton:function(a){w(a)},setSkeleton:function(a){p!==a&&(p=a,A())},getSkeleton:function(){return p},setOrigin:function(a,b){if(g.has(u,b))throw"This skeleton doesn't exist: "+b;u[b]=a,p===b&&A()},getOrigin:function(){return u[p]},resetOrigin:function(){u[p]={x:-t[p].x,y:-t[p].y},A()},register:function(){i.register("draw"),i.register("update")},unregister:function(){i.unregister("draw"),i.unregister("update")}}),a}}),devgru.module.create("devgru/component/rotatable",["devgru","devgru/basecomponent","devgru/math/vector"],function(a,b){"use strict";var c=a.sugar;return function(a){var d=b("rotatable",a),e=0,f=100,g=0,h=1,i=180/Math.PI,j=!0,k=Math.PI/180,l=!1;return d.set({update:function(b){var c,d,i,k,m=b.deltaT,n=a.rotatable;l&&e!==g&&(c=n.getTargetDegree(),d=n.getAngleDegree(),i=f*h,k=c>d?c-d:d-c,Math.floor(Math.abs(k))<Math.abs(i*m)?(e=g,j=!0):(d+=i*m,n.setAngleDegree(d)))},draw:function(a){a.context.rotate(e)},setAngleDegree:function(a){e=c.isNumber(a)?a:e,e*=k},setAngleRadian:function(a){e=c.isNumber(a)?a:e},setTargetDegree:function(a,b){g=c.isNumber(a)?a:g,g*=k,c.isDefined(b)&&(h=b?1:-1),j=!1,l=!0},setTargetRadian:function(a,b){g=c.isNumber(a)?a:g,c.isDefined(b)&&(h=b?1:-1),j=!1,l=!0},setSpeed:function(a){f=c.isNumber(a)?a:f,f=Math.floor(f)},getAngleDegree:function(){return e*i},getAngleRadian:function(){return e},getTargetDegree:function(){return g*i},getTargetRadian:function(){return g},atTarget:function(){return j},register:function(){d.register("draw"),d.register("update")},unregister:function(){d.unregister("draw"),d.unregister("update")}}),a}}),devgru.module.create("devgru/component/scalable",["devgru","devgru/basecomponent","devgru/math/vector","devgru/math/dimension"],function(a,b,c,d){"use strict";var e=a.sugar;return function(a){var f=b("scalable",a),g=c(1,1),h=c(1,1),i=1,j=!0;return f.set({update:function(a){if(!j){var b,c,d,e=a.deltaT,f=this.scalable;c=h.x-g.x,d=h.y-g.y,Math.sqrt(c*c+d*d)<i*e?(j=!0,f.setScale(h)):(b=Math.atan2(d,c),g.x+=Math.cos(b)*i*e,g.y+=Math.sin(b)*i*e)}},draw:function(a){a.context.scale(g.x,g.y)},setScale:function(b){g.x=e.isNumber(b.x)?b.x:g.x,g.y=e.isNumber(b.y)?b.y:g.y,h.x=e.isNumber(b.x)?b.x:h.x,h.y=e.isNumber(b.y)?b.y:h.y,a.updateBoundingBox()},setTarget:function(a){h.x=e.isNumber(a.x)?a.x:h.x,h.y=e.isNumber(a.y)?a.y:h.y,j=!1},setSpeed:function(a){i=e.isNumber(a)?a:i,i/=100},getScale:function(){return g},getTarget:function(){return h},getSpeed:function(){return 100*i},atTarget:function(){return j},getDimension:function(){var b;return b=e.isDefined(a.animatable)?a.animatable.getDimension():e.isDefined(a.spritable)?a.getDimension():d(1,1),d(b.width*g.x,b.height*g.y)},register:function(){f.register("draw"),f.register("update")},unregister:function(){f.unregister("draw"),f.unregister("update")}}),a}}),devgru.module.create("devgru/component/spritable",["devgru","devgru/math/vector","devgru/math/dimension","devgru/math/rectangle","devgru/basecomponent"],function(a,b,c,d,e){"use strict";a.sugar;return function(a){var d=e("spritable",a),f=null;return d.set({setup:function(d){var e;d&&(d.image&&(f=d.image),f=d.image,d.position&&(e=d.position,a.setPosition(b(Math.round(e.x),Math.round(e.y)))),d.dimension?a.setDimension(d.dimension):f&&a.setDimension(c(f.naturalWidth,f.naturalHeight)),d.origin&&a.setOrigin(d.origin))},draw:function(b){a.animatable||b.context.drawImage(f,0,0)},setImage:function(b){f=b,a.setDimension(c(f.naturalWidth,f.naturalHeight))},getImage:function(){return f},register:function(){d.register("draw")},unregister:function(){d.unregister("draw")}}),a}}),devgru.module.create("devgru/component/tweenable",["devgru","devgru/basecomponent","devgru/math"],function(a,b,c){"use strict";var d=a.sugar;return function(a){var e=b("tweenable",a),f=c(),g=["easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"];return e.set({getRandomTween:function(){var a=g[f.random(0,g.length)];return d.isString(a)?a:"easeInQuad"},easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOutCubic:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutQuart:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOutQuart:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOutQuint:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOutQuint:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOutSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOutCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f))+b},easeOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return g*Math.pow(2,-10*a)*Math.sin(2*(a*d-e)*Math.PI/f)+c+b},easeInOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(2==(a/=d/2))return b+c;if(f||(f=.3*d*1.5),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return 1>a?-.5*g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)+b:g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)*.5+c+b},easeInBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},easeInBounce:function(a,b,c,d){return c-this.easeOutBounce(d-a,0,c,d)+b},easeOutBounce:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOutBounce:function(a,b,c,d){return d/2>a?.5*this.easeInBounce(2*a,0,c,d)+b:.5*this.easeOutBounce(2*a-d,0,c,d)+.5*c+b}}),a}}),devgru.module.create("devgru/director",["devgru","devgru/game","devgru/screen"],function(a,b){"use strict";var c=a.sugar,d={},e=null,f=function(a){return c.isString(a)&&c.isObject(d[a])?d[a]:void 0},g=function(a,d,g){var h,i,j,k=0,l=0,m=function(){l++,l>=h.getObjects().length+1&&("show"===d&&c.isFunction(h.onShow)?h.onShow():"hide"===d&&c.isFunction(h.onHide)&&h.onHide(),c.isFunction(g)&&g())};if(c.isString(a)){for(h=f(a),"show"===d&&(b.add(h,m),h.setShown(!0)),"hide"===d&&(b.remove(h,m),h.setShown(!1)),i=h.getObjects(),j=i.length,k;j>k;++k)"show"===d?b.add(i[k],m):"hide"===d&&b.remove(i[k],m);"show"===d?e=h:"hide"===d&&(e=null)}},h={addScreen:function(a){c.isFunction(a.getName)&&c.isObject(a)&&(d[a.getName()]=a)},removeScreen:function(a,b){var e;c.isFunction(a.getName)&&c.isObject(a)&&(e=a.getName(),g(e,"hide",b)),c.isObject(d[e])&&delete d[e]},getScreens:function(){return d},getScreen:function(a){return d[a]},showScreen:function(a,b){var d;c.isString(a)&&(null!==e&&(d=e.getName(),g(d,"hide")),g(a,"show",b))},hideScreen:function(a,b){c.isString(a)&&g(a,"hide",b)},getActiveScreen:function(){return e}};return h}),devgru.module.create("devgru/event/system",function(){var a=[],b=function(b,c,d){var e,f,g=a.length;if(g>0)for(e=0;g>e;++e)f=a[e],f&&f.name===c&&f.callback.apply({name:c,emitter:b},d)};return{on:function(b,c){return a.push({name:b,callback:c}),[b,c]},off:function(b,c){var d,e,f;for(d=0,e=a.length;e>d;++d)f=a[d],f&&f.name===b&&f.callback===c&&a.splice(d,1)},fire:function(a){b("system",a,Array.prototype.slice.call(arguments,1,arguments.length))}}}),devgru.module.create("devgru/game",["devgru","devgru/domready","devgru/math/vector","devgru/event/system","devgru/loader","devgru/preloader"],function(a,b,c,d,e,f){"use strict";var g,h,i=a.sugar,j=null,k=null,l=[],m=[],n=[],o=[],p=[],q=(new Date).getTime(),r=null,s=null,t=!1,u=null,v=null,w=!1,x=null,y={},z=c(0,0),A=!1,B=!1,C=!1,D=null,E=0,F=0,G=5e5,H=!0,I=0,J={},K=function(){r=document.querySelector("#"+h),null===r&&(r=document.createElement("canvas"),r.id=h,r.width=x.width,r.height=x.height,null!==document.getElementById("wrapper")?document.getElementById("wrapper").appendChild(r):document.body.appendChild(r)),L(),r.getContext&&(w=!0,s=r.getContext("2d"),t&&(u=document.createElement("canvas"),u.width=r.width,u.height=r.height,v=u.getContext("2d"))),J={canvas:r,context:t?v:s,backBufferCanvas:t?u:r,canvasScale:y,canvasDimension:x,scroll:z}},L=function(){var a,b,c=r.height/r.width,d=window.innerHeight/window.innerWidth;c>d?(b=window.innerHeight,a=b/c):(a=window.innerWidth,b=a*c),y.x=a/x.width,y.y=b/x.height,r.style.width=a+"px",r.style.height=b+"px"},M=function(){I===db.SORT_TYPE_STABLE?i.sort.stable.inplace(l,function(a,b){return a.z-b.z}):l.sort(function(a,b){return a.z-b.z})},N=function(){var a,b,c,d;if(m.length){for(c=0;c<m.length;++c)a=m[c],a.z=a.z||0,l.push(a),a.init&&a.init();if(m=[],o.length){for(d=0;d<o.length;++d)b=o[d],b&&b.callback(b.object);o=[]}}},O=function(){var a,b,c,d;if(n.length){for(c=0;c<n.length;++c)a=n[c],a.destroy&&a.destroy(),i.removeObject(l,a);if(n=[],p.length){for(d=0;d<p.length;++d)b=p[d],b&&b.callback(b.object);p=[]}}},P=function(){t&&v.clear(!0),s.clear(!0)},Q=function(a){var b,c,d,e,f;if(A&&requestAnimationFrame(Q),w){if(P(),O(),N(),H&&M(),b=(a-q)/1e3,C&&(c=Math.round(1e3/(a-q),2),E+=c,++F,e=Math.round(E/F),E>G&&(E=F=0),D.innerHTML="<strong>devgru debug bar</strong>",D.innerHTML+="<br />version: 0.9.7",D.innerHTML+="<br />frame rate: "+c+" fps",D.innerHTML+="<br />average frame rate: "+e+"fps",D.innerHTML+="<br />objects: "+l.length,g&&g.name&&(D.innerHTML+="<br />game name: "+g.name)),1>b)for(J.deltaT=b,J.fps=c,J.avg=e,J.objectLength=l.length,f=0;f<l.length;++f)d=l[f],d.update&&(B&&d.updateWhenPaused||!B)&&d.update(J),d.draw&&d.draw(J);t&&s.drawImage(u,0,0),q=a}},R=function(){K(),bb(),Q(0)},S=function(a){var b,c,d;if(A)for(b=0,c=l.length;c>b;++b)d=l[b],d.pointerDown&&(B&&d.updateWhenPaused||!B)&&d.pointerDown(a)},T=function(a){var b,c,d;if(A)for(b=0,c=l.length;c>b;++b)d=l[b],d.pointerMove&&(B&&d.updateWhenPaused||!B)&&d.pointerMove(a)},U=function(a){var b,c,d;if(A)for(b=0,c=l.length;c>b;++b)d=l[b],d.pointerUp&&(B&&d.updateWhenPaused||!B)&&d.pointerUp(a)},V=function(a,b){var d=b?a.changedTouches[0]:a.targetTouches[0];a.preventDefault(),a.position=c((d.pageX-r.offsetLeft)/y.x,(d.pageY-r.offsetTop)/y.y)},W=function(a){a.position=c((a.clientX-r.offsetLeft)/y.x,(a.clientY-r.offsetTop)/y.y)},X=function(a){a.preventDefault(),V(a),S(a)},Y=function(a){a.preventDefault(),V(a),T(a)},Z=function(a){a.preventDefault(),V(a,!0),U(a)},$=function(a){a.preventDefault(),W(a),S(a)},_=function(a){a.preventDefault(),W(a),T(a)},ab=function(a){a.preventDefault(),W(a),U(a)},bb=function(){"ontouchstart"in j?(r.addEventListener("touchstart",X),r.addEventListener("touchmove",Y),r.addEventListener("touchend",Z)):(r.addEventListener("mousedown",$),r.addEventListener("mousemove",_),r.addEventListener("mouseup",ab)),d.on("devgru.pointer.down",S),d.on("devgru.pointer.move",T),d.on("devgru.pointer.up",U),window.addEventListener("resize",L,!1),window.addEventListener("orientationchange",L,!1),document.body.addEventListener("touchstart",function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1}),document.body.addEventListener("touchmove",function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1})},cb=function(){r.removeEventListener("touchstart",X),r.removeEventListener("touchmove",Y),r.removeEventListener("touchend",Z),d.off("devgru.pointer.down",S),d.off("devgru.pointer.move",T),d.off("devgru.pointer.up",U),l=[]},db={SORT_TYPE_DEFAULT:0,SORT_TYPE_STABLE:1,setup:function(a,c){b(function(){if(A)throw"devgru: The main game is already running";A=!0,j=window,k=j.document,h=a.canvas.id,x=a.canvas.dimension,a.game&&(g=a.game),a.develop&&a.develop.debug&&(C=!0,D=document.createElement("div"),D.id="debugBar",document.body.appendChild(D)),i.isDefined(a.doubleBuffering)&&(t=a.doubleBuffering),i.isDefined(a.sort)&&(H=a.sort),i.isDefined(a.sortType)&&(I=a.sortType),a.asset&&a.asset.path?(e.setAssetPath(a.asset.path),a.asset.image&&e.setAssets(e.ASSET_TYPE_IMAGE,a.asset.image),a.asset.audio&&(a.asset.audio.sprite&&e.setAssets(e.ASSET_TYPE_AUDIOSPRITE,a.asset.audio.sprite),e.setAssets(e.ASSET_TYPE_AUDIO,a.asset.audio)),a.asset.json&&e.setAssets(e.ASSET_TYPE_JSON,a.asset.json),a.asset.binary&&e.setAssets(e.ASSET_TYPE_BINARY,a.asset.binary),a.asset.spine&&e.setAssets(e.ASSET_TYPE_SPINE,a.asset.spine),a.asset.remoteImage&&e.setAssets(e.ASSET_TYPE_IMAGE_REMOTE,a.asset.remoteImage),e.load(function(){f.onReady(),R(),c&&c()},f.onAssetLoad)):(R(),c&&c())})},shutdown:function(){cb(),A=!1},add:function(a,b){b&&o.push({object:a,callback:b}),m.push(a)},remove:function(a,b){b&&p.push({object:a,callback:b}),n.push(a)},removeAll:function(){var a,b;for(n.length=0,m.length=0,a=0,b=l.length;b>a;++a)this.remove(l[a])},get:function(a){var b,c,d,e;for(b=0,c=l.length;c>b;++b)if(d=l[b],e=d.getName(),!i.isEmpty(e)&&e===a)return d},canvas:{getDimension:function(){return x},getScale:function(){return y},getContext:function(){return t?context:v}},getObjectCount:function(){return l.length},getScroll:function(){return z},pause:function(a){B=!0,A=!a},resume:function(){B=!1,A||(A=!0,R())}};return db}),devgru.module.create("devgru/loader",["devgru"],function(a){var b,c,d,e=a.audio,f=a.sugar,g=!1,h=0,i=0,j=null,k={},l={image:{},audio:{},json:{},binary:{}},m=function(){++i,d=Math.floor(i/h*100),f.isFunction(c)&&c(d),h===i&&(g=!0,f.isFunction(b)&&b())},n=function(a){throw"An error occurred while trying to load asset "+a},o=function(a,b,c){var d=new Image;d.src=b,d.addEventListener("load",c,!1),l.image[a]=d},p=function(a,b,c){var d,g;if(f.isArray(b))for(g=0;g<b.length;++g)b[g]=j+"audio/"+b[g];else b=[j+"audio/"+b];d=new e({urls:b,onload:c}),l.audio[a]=d},q=function(a,b,c,d){var e=new XMLHttpRequest;e.overrideMimeType&&e.overrideMimeType("application/json"),e.open("GET",b,!0),e.onerror=function(){d(a)},e.ontimeout=function(){d(a)},e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status&&e.responseText?(l.json[a]=JSON.parse(e.responseText),c()):d(a))},e.send(null)},r=function(a,b,c,d){var e,f,g,h=new XMLHttpRequest,i=0;h.open("GET",b,!0),h.onerror=function(){d(a)},h.responseType="arraybuffer",h.onload=function(){if(e=h.response){for(f=new Uint8Array(e),g=[],i;i<f.byteLength;++i)g[i]=String.fromCharCode(f[i]);l.binary[a]=g.join(""),c()}},h.send()},s=function(a,b,c,d){var f,g,h=function(){g=l.json[a+"_json"],g.onload=function(){l.audio[a]=f,c()
},f=new e(g),c()};q(a+"_json",j+"json/"+b,h,d)},t=function(a,b,c,d){var e=!1,f=!1,g=!1,h=function(){e&&f&&g&&c()};o(a,b+".png",function(){e=!0,h()},d),r(a,b+".atlas",function(){g=!0,h()},d),q(a,b+".json",function(){f=!0,h()},d)},u=function(a,b,c){switch(b){case v.ASSET_TYPE_IMAGE_REMOTE:o(a,c,m,n);break;case v.ASSET_TYPE_IMAGE:o(a,j+"image/"+c,m,n);break;case v.ASSET_TYPE_AUDIO:p(a,c,m,n);break;case v.ASSET_TYPE_JSON:q(a,j+"json/"+c,m,n);break;case v.ASSET_TYPE_BINARY:r(a,j+"binary/"+c,m,n);break;case v.ASSET_TYPE_AUDIOSPRITE:s(a,c,m,n);break;case v.ASSET_TYPE_SPINE:t(a,j+"spine/"+c,m,n)}},v={ASSET_TYPE_IMAGE:"image",ASSET_TYPE_AUDIO:"audio",ASSET_TYPE_JSON:"json",ASSET_TYPE_BINARY:"binary",ASSET_TYPE_AUDIOSPRITE:"audiosprite",ASSET_TYPE_SPINE:"spine",ASSET_TYPE_IMAGE_REMOTE:"remoteimage",setAssetPath:function(a){j=a},setAssets:function(a,b){var c;k[a]=b;for(c in b)b.hasOwnProperty(c)&&++h},load:function(a,d){var e,f,h;g=!1,b=a,c=d;for(f in k)if(k.hasOwnProperty(f)){e=k[f];for(h in e)e.hasOwnProperty(h)&&u(h,f,e[h])}k={}},isLoaded:function(){return g},getAssets:function(){return l},getImage:function(a){var b=l.image[a];if(!f.isDefined(b))throw"Asset "+a+" could not be found";return b},getAudio:function(a){var b=l.audio[a];if(!f.isDefined(b))throw"Asset "+a+" could not be found";return b},getJSON:function(a){var b=l.json[a];if(!f.isDefined(b))throw"Asset "+a+" could not be found";return b},getBinary:function(a){var b=l.binary[a];if(!f.isDefined(b))throw"Asset "+a+" could not be found";return b},getAsset:function(a){if(f.has(l.image,a))return l.image[a];if(f.has(l.audio,a))return l.audio[a];if(f.has(l.json,a))return l.json[a];if(f.has(l.binary,a))return l.binary[a];throw"Asset "+a+" could not be found"}};return v}),devgru.module.create("devgru/math",["devgru","devgru/math/rectangle","devgru/math/dimension","devgru/math/matrix","devgru/math/vector"],function(a,b,c,d,e){"use strict";return function(){var f=a.sugar;return{Dimension:c,Matrix:d,Vector:e,random:function(a,b){return~~(Math.random()*(b-a+1))+a},square:function(a){return a*a},sign:function(a){if(f.isNumber(a)){if(a>0)return 1;if(0>a)return-1;if(0===a)return 0}},getHalfRectangle:function(a){var c=b(a.x1+a.x2/2,a.y1+a.y2/2,a.x2/2,a.y2/2);return c}}}}),devgru.module.create("devgru/math/array2d",["devgru"],function(a){"use strict";var b=a.sugar;return function(a,c,d){var e,f,g,h=[];for(f=0;a>f;++f){for(e=[],g=0;c>g;++g)e[g]=d||null;h[f]=e}return{get:function(){return h},getValue:function(a,b){return void 0!==h[a]&&void 0!==h[a][b]?h[a][b]:void 0},iterate:function(d){for(f=0;a>f;++f)for(g=0;c>g;++g){if(!b.isFunction(d))throw"Please supply a callback function";d(f,g,h[f][g])}},set:function(a,b,c){void 0!==h[a]&&void 0!==h[a][b]&&(h[a][b]=c)},unset:function(a,b){void 0!==h[a]&&void 0!==h[a][b]&&(h[a][b]=null)}}}}),devgru.module.create("devgru/math/circle",["devgru"],function(a){var b=a.sugar,c=function(a,d,e){return{x:a||0,y:d||0,radius:e||0,addVector:function(a){if(!b.isVector(a))throw"The argument should be a Vector";this.x+=a.x,this.y+=a.y},substractVector:function(a){if(!b.isVector(a))throw"The argument should be a Vector";this.x-=a.x,this.y-=a.y},clone:function(){return c(this.x,this.y,this.radius)}}};return c}),devgru.module.create("devgru/math/dimension",function(){"use strict";return function(a,b,c){var d={width:a,height:b,depth:c||0};return{width:d.width,height:d.height,depth:d.depth,get:function(){return d}}}}),devgru.module.create("devgru/math/matrix",["devgru"],function(a){"use strict";var b=a.sugar,c=function(a,d){var e,f,g=[],h=b.isDefined(a)?a:0,i=b.isDefined(d)?d:0,j=function(a,b,c){g[b*h+a]=c},k=function(a,b){return g[b*h+a]};for(f=0;i>f;++f)for(e=0;h>e;++e)e===f?j(e,f,1):j(e,f,0);return{stringify:function(){var a="",b="";for(f=0;i>f;++f){for(e=0;h>e;++e)b+=k(e,f)+"	";a+=b+"\n",b=""}return a},get:function(a,b){return k(a,b)},set:function(a,b,c){j(a,b,c)},setValues:function(a){var b=Math.min(g.length,a.length);for(e=0;b>e;++e)g[e]=a[e];return this},getWidth:function(){return h},getHeight:function(){return i},iterate:function(a){for(f=0;i>f;++f)for(e=0;h>e;++e){if(!b.isFunction(a))throw"Please supply a callback function";a(e,f,k(e,f))}},transpose:function(){var a=[];for(e=0;h>e;++e)for(f=0;i>f;++f)a[e*i+f]=k(e,f);return g=a,i=[h,h=i][0],this},add:function(a){if(i!=a.getHeight()||h!=a.getWidth())throw"Matrix sizes incorrect";for(f=0;i>f;++f)for(e=0;h>e;++e)j(e,f,k(e,f)+a.get(e,f));return this},multiply:function(a){var b,c=[],d=h,j=i,l=a.getHeight(),m=a.getWidth(),n=0;if(j!=m)throw"Matrix sizes incorrect";for(f=0;l>f;++f)for(e=0;d>e;++e){for(n=0,b=0;m>b;++b)n+=a.get(b,f)*k(e,b);c[f*d+e]=n}return g=c,h=d,i=l,this},clone:function(){var a=c(h,i);return a.setValues(g),a},"static":{add:function(a,b){var c=a.clone();return c.add(b),c},multiply:function(a,b){var c=b.clone();return c.multiply(a),c}}}};return c}),devgru.module.create("devgru/math/polygon",function(){"use strict";return function(a){return{get:function(){return a},hasPosition:function(b){var c,d=!1,e=a[0].x,f=a[0].x,g=a[0].y,h=a[0].y,i=1,j=0,k=a.length-1;for(i=1;i<a.length;++i)c=a[i],e=Math.min(c.x,e),f=Math.max(c.x,f),g=Math.min(c.y,g),h=Math.max(c.y,h);if(b.x<e||b.x>f||b.y<g||b.y>h)return!1;for(k;j<a.length;k=j++)a[j].y>b.y!=a[k].y>b.y&&b.x<(a[k].x-a[j].x)*(b.y-a[j].y)/(a[k].y-a[j].y)+a[j].x&&(d=!d);return d}}}}),devgru.module.create("devgru/math/rectangle",function(){"use strict";return function(a,b,c,d){return{x1:a,y1:b,x2:c,y2:d,get:function(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2}},hasPosition:function(a){return a.x>=this.x1&&a.x<=this.x2&&a.y>=this.y1&&a.y<=this.y2?!0:void 0},getWidth:function(){return this.x2-this.x1},getHeight:function(){return this.y2-this.y1},setWidth:function(a){this.x2=this.x1+a},setHeight:function(a){this.y2=this.y1+a},union:function(a){this.x1=Math.min(this.x1,a.x1),this.y1=Math.min(this.y1,a.y1),this.x2=Math.max(this.x2,a.x2),this.y2=Math.max(this.y2,a.y2)},intersect:function(a){return this.x1+this.x2>a.x1&&this.x1<a.x1+a.x2&&this.y1+this.y2>a.y1&&this.y1<a.y1+a.y2},intersection:function(a){var b={x1:0,y1:0,x2:0,y2:0};return this.intersect(a)&&(b.x1=Math.max(this.x1,a.x1),b.y1=Math.max(this.y1,a.y1),b.x2=Math.min(this.x1+this.x2,a.x1+a.x2)-b.x1,b.y2=Math.min(this.y1+this.y2,a.y1+a.y2)-b.y1),b}}}}),devgru.module.create("devgru/math/vector",["devgru/math"],function(a){"use strict";var b=function(c,d){var e=a();return{x:c,y:d,get:function(){return{x:this.x,y:this.y}},add:function(a){return this.x+=a.x,this.y+=a.y,this},substract:function(a){return this.x-=a.x,this.y-=a.y,this},angle:function(a){return Math.atan2(a.y-this.y,a.x-this.x)},dotProduct:function(a){return this.x*a.x+this.y*a.y},distance:function(a){return Math.sqrt((this.x-a.x)*(this.x-a.x)+(this.y-a.y)*(this.y-a.y))},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return this.x*=a,this.y*=a,this},length:function(){return Math.sqrt(e.square(this.x)+e.square(this.y))},normalize:function(a){return this.x/=a>0?a:1,this.y/=a>0?a:1,this},copy:function(a){return this.x=a.x,this.y=a.y,this},clone:function(){return b(this.x,this.y)},toMatrix:function(){var a=e.Matrix(1,3);return a.set(0,0,this.x),a.set(0,1,this.y),a.set(0,2,1),a},"static":{add:function(a,b){var c=a.clone();return c.add(b),c},substract:function(a,b){var c=a.clone();return c.substract(b),c},angle:function(a,b){return a.angle(b)},dotProduct:function(a,b){return a.dotProduct(b)},distance:function(a,b){return a.distance(b)},multiply:function(a,b){var c=a.clone();return c.multiply(b),c},scale:function(a,b){var c=a.clone();return c.scale(b),c},length:function(a){var b=a.clone();return b.length()},normalize:function(a,b){var c=a.clone();return c.normalize(b),c},copy:function(a,b){var c=a.clone();return c.copy(b),c},clone:function(a){return a.clone()}}}};return b}),devgru.module.create("devgru/preloader",["devgru"],function(a){var b=(a.sugar,document.getElementById("loader")),c=document.getElementById("loadbar"),d=document.getElementById("percentagebar"),e=function(a){null!==c&&(c.style.width=a+"%"),null!==d&&(d.innerHTML=a+"%")},f={onReady:function(){null!==b&&(b.style.display="none")},onAssetLoad:function(a){e(a)}};return null!==d&&(d.innerHTML="0%"),f}),devgru.module.create("devgru/sat",["devgru","devgru/math","devgru/math/vector","devgru/math/rectangle","devgru/math/dimension","devgru/game"],function(a,b,c,d){"use strict";var e=a.sugar,f=b(),g=function(a,b,c,d){var e;return c.copy(a),c.substract(b),e=c.length(),e>a.radius+b.radius?(c.x=c.y=0,!1):(c.normalize(e),d.copy(c),c.scale(a.radius+b.radius-e),!0)},h=function(a,b,d,e,g){if(a.intersect(b)){var h=a.intersection(b),i=c(0,0);return h.x2>h.y2?(i.y=f.sign(a.y1-b.y1),d.y+=h.y2*i.y,e.y=i.y):(i.x=f.sign(a.x1-b.x1),d.x+=h.x2*i.x,e.x=i.x),g.x1=h.x1,g.y1=h.y1,g.x2=h.x2,g.y2=h.y2,!0}return!1},i=function(a,b){return a.intersect(b)},j=function(a,b){var c=Math.sqrt(f.square(a.x-b.x)+f.square(a.y-b.y));return c<a.radius+b.radius},k=function(a,b){var c=a.kineticable.getVelocity(),d=a.kineticable.getBounce(),e=b.scale(c.dotProduct(b)),f=c.static.substract(c,e),g=f.substract(e),h=g.substract(c).scale(d);c.add(h),a.kineticable.setVelocity(c)},l=function(a,b){var d,e,f=a.kineticable.toCircle(),h=b.kineticable.toCircle(),i=c(0,0),j=c(0,0),l=c(0,0),m=c(0,0);return g(f,h,j,m)?(b.kineticable.isDynamic()&&(e=b.kineticable.getPosition(),e.substract(j),k(b,m)),a.kineticable.isDynamic()&&(g(h,f,i,l),d=a.kineticable.getPosition(),d.substract(i),k(a,l)),!0):!1},m=function(a,b){var e,f,g,i,j=a.kineticable.toRectangle(),k=b.kineticable.toRectangle(),l=c(0,0),m=c(0,0),n=c(0,0),o=c(0,0),p=d(0,0,0,0);return h(j,k,m,o,p)?(b.kineticable.isDynamic()&&(f=b.kineticable.getVelocity(),i=b.kineticable.getPosition(),i.substract(m),o.scale(-1),b.kineticable.setPosition(i),b.kineticable.setSide(o),0!==o.y?(o.y>0&&f.y<0||o.y<0&&f.y>0&&p.y2>1)&&(f.y*=-b.kineticable.getBounce()):0!==o.x&&(o.x>0&&f.x<0||o.x<0&&f.x>0&&p.x2>1)&&(f.x*=-b.kineticable.getBounce())),a.kineticable.isDynamic()&&(e=a.kineticable.getVelocity(),g=a.kineticable.getPosition(),h(k,j,l,n,p),g.substract(l),n.scale(-1),a.kineticable.setPosition(g),a.kineticable.setSide(n),0!==n.y?(n.y>0&&e.y<0||n.y<0&&e.y>0)&&(e.y*=-a.kineticable.getBounce()):0!==n.x&&(n.x>0&&e.x<0||n.x<0&&e.x>0)&&(e.x*=-a.kineticable.getBounce())),!0):!1},n={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,RECTANGLE_TO_RECTANGLE:10,CIRCLE_TO_CIRCLE:20,collideGroupVsGroup:function(a,b,c){var d,f;if(!e.isArray(a)||!e.isArray(b))throw"The colliding groups must be Arrays.";for(d=0,f=a.length;f>d;++d)n.collideGroup(a[d],b,c)},collideGroup:function(a,b,c){var d,f;if(!e.isArray(b))throw"The colliding group must be an Array.";if(!e.isDefined(a.kineticable))throw"Collisions can only be tested between Kineticable.";for(d=0,f=b.length;f>d;++d)b.indexOf(a)!==d&&n.collide(a,b[d],c)},collide:function(a,b,c){if(e.isDefined(a.kineticable)&&e.isDefined(b.kineticable)){if(a.isActive()&&b.isActive()){switch(c=c||n.RECTANGLE_TO_RECTANGLE){case n.RECTANGLE_TO_RECTANGLE:return m(a,b);case n.CIRCLE_TO_CIRCLE:return l(a,b);default:throw"The type of collision is not valid."}return!1}return!1}throw"Collisions can only be tested between Kineticable."},overlap:function(a,b,c){if(e.isDefined(a.kineticable)&&e.isDefined(b.kineticable)){if(a.isActive()&&b.isActive()){switch(c=c||n.RECTANGLE_TO_RECTANGLE){case n.RECTANGLE_TO_RECTANGLE:return i(a,b);case n.CIRCLE_TO_CIRCLE:return j(a,b);default:return i(a,b)}return!1}return!1}throw"Collisions can only be tested between Kineticable."},overlapGroupVsGroup:function(a,b,c){var d,f;if(!e.isArray(a)||!e.isArray(b))throw"The colliding groups must be Arrays.";for(d=0,f=a.length;f>d;++d)n.overlapGroup(a[d],b,c)},overlapGroup:function(a,b,c){var d,f;if(!e.isArray(b))throw"The colliding group must be an Array.";if(!e.isDefined(a.kineticable))throw"Collisions can only be tested between Kineticable.";for(d=0,f=b.length;f>d;++d)b.indexOf(a)!==d&&n.overlap(a,b[d],c)},update:function(){}};return n}),devgru.module.create("devgru/screen",["devgru","devgru/game"],function(a,b){"use strict";var c=a.sugar;return function(a){var d=[],e=!1,f={add:function(a){return c.combine(this,a)},addObject:function(a,f){c.isObject(a)&&(d.push(a),e&&b.add(a,function(){c.isFunction(f)&&f()}))},removeObject:function(a,f){var g;c.isObject(a)&&(g=d.indexOf(a),g>=0&&(d.splice(g,1),e&&b.remove(a,f)))},getObjects:function(){return d},getName:function(){return a},setShown:function(a){if(!c.isBoolean(a))throw"Argument is not a boolean";e=a}};return f}}),devgru.module.create("devgru/spatial",["devgru","devgru/game","devgru/math","devgru/math/vector","devgru/math/dimension"],function(a,b,c,d){"use strict";return function(){var e,f,g,h=a.sugar,i=(c(),function(a,b){var c=parseInt(Math.floor(a.x/f)+Math.floor(a.y/f)*(e.width/f));h.contains(b,c)||b.push(c)}),j=function(a){var b=[],c=a.spritable.getPosition(),e=a.spritable.getDimension(),f=d(c.x,c.y),g=d(c.x+e.width,c.y+e.height);return i(d(f.x,f.y),b),i(d(g.x,f.y),b),i(d(g.x,g.y),b),i(d(f.x,g.y),b),b},k=function(){var a,b=0;for(g={},a=e.width/f*(e.height/f),b;a>b;++b)g[b]=[]},l={setup:function(a){a=a||{},e=h.isDefined(a.gridDimension)?a.gridDimension:b.canvas.getDimension(),f=h.isDefined(a.gridSize)?a.gridSize:e.height/3,k()},setDebug:function(a){a===!0&&b.add(l),a===!1&&b.remove(l)},clearObjects:function(){k()},addObject:function(a){var b=j(a),c=0,d=b.length;for(c;d>c;++c)g[b[c]].push(a)},addArray:function(a){var b,c;for(b=0,c=a.length;c>b;++b)l.addObject(a[b])},getNearbyObjects:function(a){var b=[],c=j(a),d=0,e=c.length;for(d;e>d;++d)b.push(g[c[d]]);return b},handleNearbyObjects:function(a,b){var c,d,e,f,g;if(h.isFunction(b))for(c=l.getNearbyObjects(a),d=0,e=c.length;e>d;++d)if(c[d])for(f=0,g=c[d].length;g>f;++f)c[d].indexOf(a)!==f&&b(c[d][f])},draw:function(a,b){var c=0,d=0;for(b.save(),b.beginPath(),c;c<=e.width;c+=f)b.moveTo(c,0),b.lineTo(c,e.height);for(d;d<=e.height;d+=f)b.moveTo(0,d),b.lineTo(e.width,d);b.strokeStyle="black",b.stroke(),b.closePath(),b.restore()}};return l}});var modules=modules||{};modules.devgru=modules.devgru||{},modules.devgru.sugar=function(a,b){"use strict";var c=function(a){return n(a.width)&&n(a.height)},d=function(a){return n(a.x)&&n(a.y)},e=function(a){return r(a,"get")&&j(a.get)&&r(a,"set")&&j(a.set)&&r(a,"transpose")&&j(a.transpose)&&r(a,"add")&&j(a.add)&&r(a,"multiply")&&j(a.multiply)?!0:void 0},f=function(a){return r(a,"get")&&j(a.get)&&r(a,"getValue")&&j(a.getValue)&&r(a,"iterate")&&j(a.iterate)&&r(a,"set")&&j(a.iterate)&&r(a,"unset")&&j(a.iterate)?!0:void 0},g=function(a){return"string"==typeof a||a instanceof String},h=Array.prototype.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},i=function(a){return"[object Object]"===Object.prototype.toString.call(a)},j=function(a){return"[object Function]"===Object.prototype.toString.call(a)},k=function(a,b){var c=a.length;if(c!=b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0},l=function(b,c){var d,e,f,g,h,i,j,k=[],l=a;for(e=0,g=b.length;g>e;++e){if(l=a,i=b[e].split("."),1===i.length)j=a[i];else for(d=0,f=i.length;f>d;++d)h=i[d],d===f-1?j=l[h]:l[h]&&(l=l[h]);if(!j||!this.isFunction(j))throw"devgru.sugar.imports: Module "+b[e]+" not found or not a function";k.push(j)}return c.apply(devgru,k)},m=function(){},n=function(a){return"[object Number]"===Object.prototype.toString.call(a)},o=function(a){return a===!0||a===!1||"[object Boolean]"===Object.prototype.toString.call(a)},p=function(a){return"[object Date]"===Object.prototype.toString.call(a)},q=function(a){return parseFloat(a)===parseInt(a,10)&&!isNaN(a)},r=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},s=function(a){return void 0===a},t=function(a){return void 0!==a},u=function(a){var b;if(""===a||0===a||"0"===a||null===a||a===!1||this.isUndefined(a))return!0;if(this.isArray(a)&&0===a.length)return!0;if(this.isObject(a)){for(b in a)if(this.has(a,b))return!1;return!0}return!1},v=function(a){return"[object Arguments]"===Object.prototype.toString.call(a)},w=function(a,b){return a+Math.floor(Math.random()*(b-a+1))},x=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},y=function(){for(var a=this.toArray(arguments),b=this["is"+this.upperFirst(a.shift())],c=a.length;c--;)if(!b.call(null,a[c]))return!1;return!0},z=function(a,b){var c;if(this.multiIs("array",a,b))return a.concat(b);for(c in b)this.has(b,c)&&(this.has(a,c)&&(a.base=a.base||{},a.base[c]=a[c]),a[c]=this.isObject(b[c])?this.combine({},b[c]):b[c]);return a},A=function(a){return/^\[object (HTMLCollection|NodeList|Object)\]$/.test(toString.call(a))&&this.isNumber(a.length)&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},B=function(a){var b,c=[];if(!a)return[a];if(this.isArgument(a))return Array.prototype.slice.call(a);if(this.isString(a)&&a.split(""),this.isArray(a))return Array.prototype.slice.call(a);if(this.isDomList(a))return Array.prototype.slice.call(a);for(b in a)this.has(a,b)&&c.push(a[b]);return c},C=function(a,b){return this.isString(a)?-1!==a.indexOf(b)?!0:!1:this.isArray(a)?-1!==this.indexOf(a,b)?!0:!1:this.has(a,b)},D=function(a,b){var c=0;if(null===a)return-1;if(a.indexOf)return a.indexOf(b);for(c=a.length;c--;)if(a[c]===b)return c;return-1},E=function(a){return!(!a||1!==a.nodeType)},F=function(a){var b,c=0;if(!a)return 0;if(this.isObject(a))for(b in a)this.has(a,b)&&++c;return(this.isString(a)||this.isArray(a)||this.isArguments(a))&&(c=a.length),this.isNumber(a)&&(c=a.toString().length),c},G=function(a){return this.combine({},a,!0)},H=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},I=Object.prototype.keys||function(a){var b,c=[];if(a==Object(a))for(b in a)this.has(a,b)&&(c[c.length]=b);return c},J=function(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(a,arguments))}},K=function(a,b){var c={};return b=b||function(a){return a},function(){var d=b.apply(null,arguments);return this.has(c,d)?c[d]:c[d]=a.apply(a,arguments)}},L=function(a,b){var c,d;for(c=0,d=a.length;d>c;++c)if(a[c]===b){a.splice(c,1);break}},M=function(c,d,e){var f;return c.style&&this.isEmpty(c.style[d])?c.currentStyle?f=c.currentStyle[d]:a.getComputedStyle&&(f=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)):c.style&&(f=c.style[d]),e?parseFloat(f):f},N=function(a){return typeof a==typeof Function},O=function(a,c,d){var e;return d&&(d.style.display="none"),e=b.elementFromPoint(a,c),e&&this&&this.containsClass(e,"omit")&&(e=O(a,c,e)),d&&(d.style.display=""),e},P=function(a,c,d){var e,f=!1,g=[];for(d&&(d.style.display="none"),f=b.elementFromPoint(a,c);f&&"BODY"!==f.tagName&&"HTML"!==f.tagName;)g.push(f),U(f,"animated"),f.style.display="none",f=b.elementFromPoint(a,c);for(e=0;e<g.length;++e)g[e].style.display="block";return d&&(d.style.display="block"),g},Q=function(a,b){return a.getAttribute("data-"+b)},R=function(a,b,c){return a.setAttribute("data-"+b,c)},S=function(a,c){return(S=b.documentElement.classList?function(a,b){return a.classList.contains(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return a.className.match(c)})(a,c)},T=function(a,c){var d,e,f=this;return(T=b.documentElement.classList?function(a,b){if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.classList.add(b[d]);else a.classList.add(b)}:function(a,b){if(!a)return!1;if(!S(a,b))if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.className+=(a.className?" ":"")+b[d];else a.className+=(a.className?" ":"")+b})(a,c)},U=function(a,c){return(U=b.documentElement.classList?function(a,b){a.classList.remove(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"$2")})(a,c)},V=function(a){a.className="",a.setAttribute("class","")},W=function(a,c){return(W=b.documentElement.classList&&b.documentElement.classList.toggle?function(a,b){return a.classList.toggle(b)}:function(a,b){return S(a,b)?(U(a,b),!1):(T(a,b),!0)})(a,c)},X=function(a,b){if(document.createEvent){var c=document.createEvent("MouseEvents");return c.initEvent(b,!0,!1),a.dispatchEvent(c),!0}return document.createEventObject?(a.fireEvent("on"+b),!0):"function"==typeof a["on"+b]?(a["on"+b](),!0):!1},Y=function(a){return b.querySelector(a)},Z=function(a,b){function c(){var f=(new Date).getTime();f-d>=b?a():e=requestAnimationFrame(c)}var d=(new Date).getTime(),e=null;return void 0===b&&(b=1),c(),{cancel:function(){"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(e)}}},$=function(a,b,c,d){var e,f,g={start:["animationstart","animationstart","webkitAnimationStart","oanimationstart","MSAnimationStart"],iteration:["animationiteration","animationiteration","webkitAnimationIteration","oanimationiteration","MSAnimationIteration"],end:["animationend","animationend","webkitAnimationEnd","oanimationend","MSAnimationEnd"],tend:["transitionend","transitionend","webkitTransitionEnd","otransitionend","MSTransitionEnd"]},h=g[b]||[],d=d||"add";for(f=0,e=h.length;e>f;++f)"add"===d?a.addEventListener(h[f],c,!1):"remove"===d&&a.removeEventListener(h[f],c,!1)},_=function(c){var d=b.readyState;"complete"===d||"interactive"===d?c():a.addEventListener?a.addEventListener("DOMContentLoaded",c):a.attachEvent("onload",c)},ab=function(){var a=function(a,c){return b(a.slice(),c)},b=function(a,b){"function"!=typeof b&&(b=function(a,b){return String(a).localeCompare(b)});var d=a.length;if(1>=d)return a;for(var e=new Array(d),f=1;d>f;f*=2){c(a,b,f,e);var g=a;a=e,e=g}return a},c=function(a,b,c,d){var e,f,g,h,i,j=a.length,k=0,l=2*c;for(e=0;j>e;e+=l)for(f=e+c,g=f+c,f>j&&(f=j),g>j&&(g=j),h=e,i=f;;)if(f>h&&g>i)d[k++]=b(a[h],a[i])<=0?a[h++]:a[i++];else if(f>h)d[k++]=a[h++];else{if(!(g>i))break;d[k++]=a[i++]}};return a.inplace=function(a,d){var e=b(a,d);return e!==a&&c(e,null,a.length,a),a},a}();return Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=obj.__proto__||obj.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=window,d=0;d<b.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[b[d]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[b[d]+"CancelAnimationFrame"]||c[b[d]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=c.setTimeout(function(){b(d+e)},e);return a=d+e,f}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)})}(),CanvasRenderingContext2D.prototype.clear=CanvasRenderingContext2D.prototype.clear||function(a){a&&(this.save(),this.setTransform(1,0,0,1,0,0)),this.clearRect(0,0,this.canvas.width,this.canvas.height),a&&this.restore()},{isVector:d,isDimension:c,isMatrix:e,isString:g,isArray:h,isArray2D:f,isObject:i,isFunction:j,emptyFn:m,isNumber:n,isBoolean:o,isDate:p,isInt:q,has:r,isUndefined:s,isDefined:t,isEmpty:u,isArgument:v,getRandom:w,upperFirst:x,multiIs:y,combine:z,imports:l,isDomList:A,toArray:B,contains:C,indexOf:D,isElement:E,size:F,clone:G,isRegex:H,keys:I,once:J,memoize:K,removeObject:L,getStyle:M,isFunctionByType:N,getNodeOnPoint:O,getNodesOnPoint:P,getData:Q,setData:R,containsClass:S,addClass:T,removeClass:U,removeClasses:V,toggleClass:W,triggerEvent:X,$:Y,setAnimationFrameTimeout:Z,animationEvent:$,domReady:_,arrayMatch:k,sort:{stable:ab}}}(window,window.document),devgru.module.create("devgru/domready",function(){"use strict";function a(a){var b;for(b=0;b<a.length;b+=1)a[b](j)}function b(){var b=k;i&&b.length&&(k=[],a(b))}function c(){i||(i=!0,g&&clearInterval(g),b())}function d(a){return i?a(j):k.push(a),d}var e,f,g,h="undefined"!=typeof window&&window.document,i=!h,j=h?document:null,k=[];if(h){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(window.attachEvent){window.attachEvent("onload",c),f=document.createElement("div");try{e=null===window.frameElement}catch(l){}f.doScroll&&e&&window.external&&(g=setInterval(function(){try{f.doScroll(),c()}catch(a){}},30))}"complete"===document.readyState&&c()}return d.version="2.0.1",d.load=function(a,b,c,e){e.isBuild?c(null):d(c)},d}),(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=[].slice,e=function(a,b,d){c.call(this,a,b,d),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=e.prototype.render},f=1e-10,g=c._internals.isSelector,h=c._internals.isArray,i=e.prototype=c.to({},.1,{}),j=[];e.version="1.11.8",i.constructor=e,i.kill()._gc=!1,e.killTweensOf=e.killDelayedCallsTo=c.killTweensOf,e.getTweensOf=c.getTweensOf,e.ticker=c.ticker,i.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),c.prototype.invalidate.call(this)},i.updateTo=function(a,b){var d,e=this.ratio;b&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(d in a)this.vars[d]=a[d];if(this._initted)if(b)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&c._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var f=this._time;this.render(0,!0,!1),this._initted=!1,this.render(f,!0,!1)}else if(this._time>0){this._initted=!1,this._init();for(var g,h=1/(1-e),i=this._firstPT;i;)g=i.s+i.c,i.c*=h,i.s=g-i.c,i=i._next}return this},i.render=function(a,b,c){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var d,e,g,h,i,k,l,m,n=this._dirty?this.totalDuration():this._totalDuration,o=this._time,p=this._totalTime,q=this._cycle,r=this._duration;if(a>=n?(this._totalTime=n,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=r,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(d=!0,e="onComplete"),0===r&&(m=this._rawPrevTime,this._startTime===this._timeline._duration&&(a=0),(0===a||0>m||m===f)&&m!==a&&(c=!0,m>f&&(e="onReverseComplete")),this._rawPrevTime=m=!b||a||this._rawPrevTime===a?a:f)):1e-7>a?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==p||0===r&&this._rawPrevTime>0&&this._rawPrevTime!==f)&&(e="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0===r&&(this._rawPrevTime>=0&&(c=!0),this._rawPrevTime=m=!b||a||this._rawPrevTime===a?a:f)):this._initted||(c=!0)):(this._totalTime=this._time=a,0!==this._repeat&&(h=r+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=r-this._time),this._time>r?this._time=r:this._time<0&&(this._time=0)),this._easeType?(i=this._time/r,k=this._easeType,l=this._easePower,(1===k||3===k&&i>=.5)&&(i=1-i),3===k&&(i*=2),1===l?i*=i:2===l?i*=i*i:3===l?i*=i*i*i:4===l&&(i*=i*i*i*i),this.ratio=1===k?1-i:2===k?i:this._time/r<.5?i/2:1-i/2):this.ratio=this._ease.getRatio(this._time/r)),o===this._time&&!c&&q===this._cycle)return void(p!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||j)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!d?this.ratio=this._ease.getRatio(this._time/r):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==o&&a>=0&&(this._active=!0),0===p&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===r)&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||j))),g=this._firstPT;g;)g.f?g.t[g.p](g.c*this.ratio+g.s):g.t[g.p]=g.c*this.ratio+g.s,g=g._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||(this._totalTime!==p||d)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||j)),this._cycle!==q&&(b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||j)),e&&(this._gc||(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||j),0===r&&this._rawPrevTime===f&&m!==f&&(this._rawPrevTime=0)))},e.to=function(a,b,c){return new e(a,b,c)},e.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new e(a,b,c)},e.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new e(a,b,d)},e.staggerTo=e.allTo=function(a,b,f,i,k,l,m){i=i||0;var n,o,p,q,r=f.delay||0,s=[],t=function(){f.onComplete&&f.onComplete.apply(f.onCompleteScope||this,arguments),k.apply(m||this,l||j)};for(h(a)||("string"==typeof a&&(a=c.selector(a)||a),g(a)&&(a=d.call(a,0))),n=a.length,p=0;n>p;p++){o={};for(q in f)o[q]=f[q];o.delay=r,p===n-1&&k&&(o.onComplete=t),s[p]=new e(a[p],b,o),r+=i}return s},e.staggerFrom=e.allFrom=function(a,b,c,d,f,g,h){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,e.staggerTo(a,b,c,d,f,g,h)},e.staggerFromTo=e.allFromTo=function(a,b,c,d,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,e.staggerTo(a,b,d,f,g,h,i)},e.delayedCall=function(a,b,c,d,f){return new e(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:f,overwrite:0})},e.set=function(a,b){return new e(a,0,b)},e.isTweening=function(a){return c.getTweensOf(a,!0).length>0};var k=function(a,b){for(var d=[],e=0,f=a._first;f;)f instanceof c?d[e++]=f:(b&&(d[e++]=f),d=d.concat(k(f,b)),e=d.length),f=f._next;return d},l=e.getAllTweens=function(b){return k(a._rootTimeline,b).concat(k(a._rootFramesTimeline,b))};e.killAll=function(a,c,d,e){null==c&&(c=!0),null==d&&(d=!0);var f,g,h,i=l(0!=e),j=i.length,k=c&&d&&e;for(h=0;j>h;h++)g=i[h],(k||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&(a?g.totalTime(g.totalDuration()):g._enabled(!1,!1))},e.killChildTweensOf=function(a,b){if(null!=a){var f,i,j,k,l,m=c._tweenLookup;if("string"==typeof a&&(a=c.selector(a)||a),g(a)&&(a=d.call(a,0)),h(a))for(k=a.length;--k>-1;)e.killChildTweensOf(a[k],b);else{f=[];for(j in m)for(i=m[j].target.parentNode;i;)i===a&&(f=f.concat(m[j].tweens)),i=i.parentNode;for(l=f.length,k=0;l>k;k++)b&&f[k].totalTime(f[k].totalDuration()),f[k]._enabled(!1,!1)}}};var m=function(a,c,d,e){c=c!==!1,d=d!==!1,e=e!==!1;for(var f,g,h=l(e),i=c&&d&&e,j=h.length;--j>-1;)g=h[j],(i||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&g.paused(a)};return e.pauseAll=function(a,b,c){m(!0,a,b,c)},e.resumeAll=function(a,b,c){m(!1,a,b,c)},e.globalTimeScale=function(b){var d=a._rootTimeline,e=c.ticker.time;return arguments.length?(b=b||f,d._startTime=e-(e-d._startTime)*d._timeScale/b,d=a._rootFramesTimeline,e=c.ticker.frame,d._startTime=e-(e-d._startTime)*d._timeScale/b,d._timeScale=a._rootTimeline._timeScale=b,b):d._timeScale},i.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},i.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},i.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},i.duration=function(b){return arguments.length?a.prototype.duration.call(this,b):this._duration},i.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)
},i.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},i.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},i.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},e},!0),window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=function(a){b.call(this,a),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var c,d,e=this.vars;for(d in e)c=e[d],g(c)&&-1!==c.join("").indexOf("{self}")&&(e[d]=this._swapSelfInParams(c));g(e.tweens)&&this.add(e.tweens,0,e.align,e.stagger)},e=1e-10,f=c._internals.isSelector,g=c._internals.isArray,h=[],i=window._gsDefine.globals,j=function(a){var b,c={};for(b in a)c[b]=a[b];return c},k=function(a,b,c,d){a._timeline.pause(a._startTime),b&&b.apply(d||a._timeline,c||h)},l=h.slice,m=d.prototype=new b;return d.version="1.11.8",m.constructor=d,m.kill()._gc=!1,m.to=function(a,b,d,e){var f=d.repeat&&i.TweenMax||c;return b?this.add(new f(a,b,d),e):this.set(a,d,e)},m.from=function(a,b,d,e){return this.add((d.repeat&&i.TweenMax||c).from(a,b,d),e)},m.fromTo=function(a,b,d,e,f){var g=e.repeat&&i.TweenMax||c;return b?this.add(g.fromTo(a,b,d,e),f):this.set(a,e,f)},m.staggerTo=function(a,b,e,g,h,i,k,m){var n,o=new d({onComplete:i,onCompleteParams:k,onCompleteScope:m,smoothChildTiming:this.smoothChildTiming});for("string"==typeof a&&(a=c.selector(a)||a),f(a)&&(a=l.call(a,0)),g=g||0,n=0;n<a.length;n++)e.startAt&&(e.startAt=j(e.startAt)),o.to(a[n],b,j(e),n*g);return this.add(o,h)},m.staggerFrom=function(a,b,c,d,e,f,g,h){return c.immediateRender=0!=c.immediateRender,c.runBackwards=!0,this.staggerTo(a,b,c,d,e,f,g,h)},m.staggerFromTo=function(a,b,c,d,e,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,this.staggerTo(a,b,d,e,f,g,h,i)},m.call=function(a,b,d,e){return this.add(c.delayedCall(0,a,b,d),e)},m.set=function(a,b,d){return d=this._parseTimeOrLabel(d,0,!0),null==b.immediateRender&&(b.immediateRender=d===this._time&&!this._paused),this.add(new c(a,0,b),d)},d.exportRoot=function(a,b){a=a||{},null==a.smoothChildTiming&&(a.smoothChildTiming=!0);var e,f,g=new d(a),h=g._timeline;for(null==b&&(b=!0),h._remove(g,!0),g._startTime=0,g._rawPrevTime=g._time=g._totalTime=h._time,e=h._first;e;)f=e._next,b&&e instanceof c&&e.target===e.vars.onComplete||g.add(e,e._startTime-e._delay),e=f;return h.add(g,0),g},m.add=function(e,f,h,i){var j,k,l,m,n,o;if("number"!=typeof f&&(f=this._parseTimeOrLabel(f,0,!0,e)),!(e instanceof a)){if(e instanceof Array||e&&e.push&&g(e)){for(h=h||"normal",i=i||0,j=f,k=e.length,l=0;k>l;l++)g(m=e[l])&&(m=new d({tweens:m})),this.add(m,j),"string"!=typeof m&&"function"!=typeof m&&("sequence"===h?j=m._startTime+m.totalDuration()/m._timeScale:"start"===h&&(m._startTime-=m.delay())),j+=i;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,f);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=c.delayedCall(0,e)}if(b.prototype.add.call(this,e,f),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(n=this,o=n.rawTime()>e._startTime;n._timeline;)o&&n._timeline.smoothChildTiming?n.totalTime(n._totalTime,!0):n._gc&&n._enabled(!0,!1),n=n._timeline;return this},m.remove=function(b){if(b instanceof a)return this._remove(b,!1);if(b instanceof Array||b&&b.push&&g(b)){for(var c=b.length;--c>-1;)this.remove(b[c]);return this}return"string"==typeof b?this.removeLabel(b):this.kill(null,b)},m._remove=function(a,c){b.prototype._remove.call(this,a,c);var d=this._last;return d?this._time>d._startTime+d._totalDuration/d._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},m.append=function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},m.insert=m.insertMultiple=function(a,b,c,d){return this.add(a,b||0,c,d)},m.appendMultiple=function(a,b,c,d){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),c,d)},m.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},m.addPause=function(a,b,c,d){return this.call(k,["{self}",b,c,d],this,a)},m.removeLabel=function(a){return delete this._labels[a],this},m.getLabelTime=function(a){return null!=this._labels[a]?this._labels[a]:-1},m._parseTimeOrLabel=function(b,c,d,e){var f;if(e instanceof a&&e.timeline===this)this.remove(e);else if(e&&(e instanceof Array||e.push&&g(e)))for(f=e.length;--f>-1;)e[f]instanceof a&&e[f].timeline===this&&this.remove(e[f]);if("string"==typeof c)return this._parseTimeOrLabel(c,d&&"number"==typeof b&&null==this._labels[c]?b-this.duration():0,d);if(c=c||0,"string"!=typeof b||!isNaN(b)&&null==this._labels[b])null==b&&(b=this.duration());else{if(f=b.indexOf("="),-1===f)return null==this._labels[b]?d?this._labels[b]=this.duration()+c:c:this._labels[b]+c;c=parseInt(b.charAt(f-1)+"1",10)*Number(b.substr(f+1)),b=f>1?this._parseTimeOrLabel(b.substr(0,f-1),0,d):this.duration()}return Number(b)+c},m.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),b!==!1)},m.stop=function(){return this.paused(!0)},m.gotoAndPlay=function(a,b){return this.play(a,b)},m.gotoAndStop=function(a,b){return this.pause(a,b)},m.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,f,g,i,j,k=this._dirty?this.totalDuration():this._totalDuration,l=this._time,m=this._startTime,n=this._timeScale,o=this._paused;if(a>=k?(this._totalTime=this._time=k,this._reversed||this._hasPausedChild()||(f=!0,i="onComplete",0===this._duration&&(0===a||this._rawPrevTime<0||this._rawPrevTime===e)&&this._rawPrevTime!==a&&this._first&&(j=!0,this._rawPrevTime>e&&(i="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:e,a=k+1e-4):1e-7>a?(this._totalTime=this._time=0,(0!==l||0===this._duration&&this._rawPrevTime!==e&&(this._rawPrevTime>0||0>a&&this._rawPrevTime>=0))&&(i="onReverseComplete",f=this._reversed),0>a?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&this._first&&(j=!0),this._rawPrevTime=a):(this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:e,a=0,this._initted||(j=!0))):this._totalTime=this._time=this._rawPrevTime=a,this._time!==l&&this._first||c||j){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==l&&a>0&&(this._active=!0),0===l&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||h)),this._time>=l)for(d=this._first;d&&(g=d._next,!this._paused||o);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;else for(d=this._last;d&&(g=d._prev,!this._paused||o);)(d._active||d._startTime<=l&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||h)),i&&(this._gc||(m===this._startTime||n!==this._timeScale)&&(0===this._time||k>=this.totalDuration())&&(f&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[i]&&this.vars[i].apply(this.vars[i+"Scope"]||this,this.vars[i+"Params"]||h)))}},m._hasPausedChild=function(){for(var a=this._first;a;){if(a._paused||a instanceof d&&a._hasPausedChild())return!0;a=a._next}return!1},m.getChildren=function(a,b,d,e){e=e||-9999999999;for(var f=[],g=this._first,h=0;g;)g._startTime<e||(g instanceof c?b!==!1&&(f[h++]=g):(d!==!1&&(f[h++]=g),a!==!1&&(f=f.concat(g.getChildren(!0,b,d)),h=f.length))),g=g._next;return f},m.getTweensOf=function(a,b){for(var d=c.getTweensOf(a),e=d.length,f=[],g=0;--e>-1;)(d[e].timeline===this||b&&this._contains(d[e]))&&(f[g++]=d[e]);return f},m._contains=function(a){for(var b=a.timeline;b;){if(b===this)return!0;b=b.timeline}return!1},m.shiftChildren=function(a,b,c){c=c||0;for(var d,e=this._first,f=this._labels;e;)e._startTime>=c&&(e._startTime+=a),e=e._next;if(b)for(d in f)f[d]>=c&&(f[d]+=a);return this._uncache(!0)},m._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var c=b?this.getTweensOf(b):this.getChildren(!0,!0,!1),d=c.length,e=!1;--d>-1;)c[d]._kill(a,b)&&(e=!0);return e},m.clear=function(a){var b=this.getChildren(!1,!0,!0),c=b.length;for(this._time=this._totalTime=0;--c>-1;)b[c]._enabled(!1,!1);return a!==!1&&(this._labels={}),this._uncache(!0)},m.invalidate=function(){for(var a=this._first;a;)a.invalidate(),a=a._next;return this},m._enabled=function(a,c){if(a===this._gc)for(var d=this._first;d;)d._enabled(a,!0),d=d._next;return b.prototype._enabled.call(this,a,c)},m.duration=function(a){return arguments.length?(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},m.totalDuration=function(a){if(!arguments.length){if(this._dirty){for(var b,c,d=0,e=this._last,f=999999999999;e;)b=e._prev,e._dirty&&e.totalDuration(),e._startTime>f&&this._sortChildren&&!e._paused?this.add(e,e._startTime-e._delay):f=e._startTime,e._startTime<0&&!e._paused&&(d-=e._startTime,this._timeline.smoothChildTiming&&(this._startTime+=e._startTime/this._timeScale),this.shiftChildren(-e._startTime,!1,-9999999999),f=0),c=e._startTime+e._totalDuration/e._timeScale,c>d&&(d=c),e=b;this._duration=this._totalDuration=d,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},m.usesFrames=function(){for(var b=this._timeline;b._timeline;)b=b._timeline;return b===a._rootFramesTimeline},m.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},d},!0),window._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(a,b,c){var d=function(b){a.call(this,b),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},e=1e-10,f=[],g=new c(null,null,1,0),h=d.prototype=new a;return h.constructor=d,h.kill()._gc=!1,d.version="1.11.8",h.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),a.prototype.invalidate.call(this)},h.addCallback=function(a,c,d,e){return this.add(b.delayedCall(0,a,d,e),c)},h.removeCallback=function(a,b){if(a)if(null==b)this._kill(null,a);else for(var c=this.getTweensOf(a,!1),d=c.length,e=this._parseTimeOrLabel(b);--d>-1;)c[d]._startTime===e&&c[d]._enabled(!1,!1);return this},h.tweenTo=function(a,c){c=c||{};var d,e,h,i={ease:g,overwrite:c.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(e in c)i[e]=c[e];return i.time=this._parseTimeOrLabel(a),d=Math.abs(Number(i.time)-this._time)/this._timeScale||.001,h=new b(this,d,i),i.onStart=function(){h.target.paused(!0),h.vars.time!==h.target.time()&&d===h.duration()&&h.duration(Math.abs(h.vars.time-h.target.time())/h.target._timeScale),c.onStart&&c.onStart.apply(c.onStartScope||h,c.onStartParams||f)},h},h.tweenFromTo=function(a,b,c){c=c||{},a=this._parseTimeOrLabel(a),c.startAt={onComplete:this.seek,onCompleteParams:[a],onCompleteScope:this},c.immediateRender=c.immediateRender!==!1;var d=this.tweenTo(b,c);return d.duration(Math.abs(d.vars.time-a)/this._timeScale||.001)},h.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,g,h,i,j,k,l=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,n=this._time,o=this._totalTime,p=this._startTime,q=this._timeScale,r=this._rawPrevTime,s=this._paused,t=this._cycle;if(a>=l?(this._locked||(this._totalTime=l,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(g=!0,i="onComplete",0===this._duration&&(0===a||0>r||r===e)&&r!==a&&this._first&&(j=!0,r>e&&(i="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:e,this._yoyo&&0!==(1&this._cycle)?this._time=a=0:(this._time=m,a=m+1e-4)):1e-7>a?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==n||0===m&&r!==e&&(r>0||0>a&&r>=0)&&!this._locked)&&(i="onReverseComplete",g=this._reversed),0>a?(this._active=!1,0===m&&r>=0&&this._first&&(j=!0),this._rawPrevTime=a):(this._rawPrevTime=m||!b||a||this._rawPrevTime===a?a:e,a=0,this._initted||(j=!0))):(0===m&&0>r&&(j=!0),this._time=this._rawPrevTime=a,this._locked||(this._totalTime=a,0!==this._repeat&&(k=m+this._repeatDelay,this._cycle=this._totalTime/k>>0,0!==this._cycle&&this._cycle===this._totalTime/k&&this._cycle--,this._time=this._totalTime-this._cycle*k,this._yoyo&&0!==(1&this._cycle)&&(this._time=m-this._time),this._time>m?(this._time=m,a=m+1e-4):this._time<0?this._time=a=0:a=this._time))),this._cycle!==t&&!this._locked){var u=this._yoyo&&0!==(1&t),v=u===(this._yoyo&&0!==(1&this._cycle)),w=this._totalTime,x=this._cycle,y=this._rawPrevTime,z=this._time;if(this._totalTime=t*m,this._cycle<t?u=!u:this._totalTime+=m,this._time=n,this._rawPrevTime=0===m?r-1e-4:r,this._cycle=t,this._locked=!0,n=u?0:m,this.render(n,b,0===m),b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||f),v&&(n=u?m+1e-4:-1e-4,this.render(n,!0,!1)),this._locked=!1,this._paused&&!s)return;this._time=z,this._totalTime=w,this._cycle=x,this._rawPrevTime=y}if(!(this._time!==n&&this._first||c||j))return void(o!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==o&&a>0&&(this._active=!0),0===o&&this.vars.onStart&&0!==this._totalTime&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||f)),this._time>=n)for(d=this._first;d&&(h=d._next,!this._paused||s);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=h;else for(d=this._last;d&&(h=d._prev,!this._paused||s);)(d._active||d._startTime<=n&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=h;this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)),i&&(this._locked||this._gc||(p===this._startTime||q!==this._timeScale)&&(0===this._time||l>=this.totalDuration())&&(g&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[i]&&this.vars[i].apply(this.vars[i+"Scope"]||this,this.vars[i+"Params"]||f)))},h.getActive=function(a,b,c){null==a&&(a=!0),null==b&&(b=!0),null==c&&(c=!1);var d,e,f=[],g=this.getChildren(a,b,c),h=0,i=g.length;for(d=0;i>d;d++)e=g[d],e.isActive()&&(f[h++]=e);return f},h.getLabelAfter=function(a){a||0!==a&&(a=this._time);var b,c=this.getLabelsArray(),d=c.length;for(b=0;d>b;b++)if(c[b].time>a)return c[b].name;return null},h.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),c=b.length;--c>-1;)if(b[c].time<a)return b[c].name;return null},h.getLabelsArray=function(){var a,b=[],c=0;for(a in this._labels)b[c++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},h.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},h.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},h.totalDuration=function(b){return arguments.length?-1===this._repeat?this:this.duration((b-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(a.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},h.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},h.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},h.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},h.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},h.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1e-8)},d},!0),function(){var a=180/Math.PI,b=[],c=[],d=[],e={},f=function(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d,this.da=d-a,this.ca=c-a,this.ba=b-a},g=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(a,b,c,d){var e={a:a},f={},g={},h={c:d},i=(a+b)/2,j=(b+c)/2,k=(c+d)/2,l=(i+j)/2,m=(j+k)/2,n=(m-l)/8;return e.b=i+(a-i)/4,f.b=l+n,e.c=f.a=(e.b+f.b)/2,f.c=g.a=(l+m)/2,g.b=m-n,h.b=k+(d-k)/4,g.c=h.a=(g.b+h.b)/2,[e,f,g,h]},i=function(a,e,f,g,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w=a.length-1,x=0,y=a[0].a;for(j=0;w>j;j++)n=a[x],k=n.a,l=n.d,m=a[x+1].d,i?(t=b[j],u=c[j],v=(u+t)*e*.25/(g?.5:d[j]||.5),o=l-(l-k)*(g?.5*e:0!==t?v/t:0),p=l+(m-l)*(g?.5*e:0!==u?v/u:0),q=l-(o+((p-o)*(3*t/(t+u)+.5)/4||0))):(o=l-(l-k)*e*.5,p=l+(m-l)*e*.5,q=l-(o+p)/2),o+=q,p+=q,n.c=r=o,n.b=0!==j?y:y=n.a+.6*(n.c-n.a),n.da=l-k,n.ca=r-k,n.ba=y-k,f?(s=h(k,y,r,l),a.splice(x,1,s[0],s[1],s[2],s[3]),x+=4):x++,y=p;n=a[x],n.b=y,n.c=y+.4*(n.d-y),n.da=n.d-n.a,n.ca=n.c-n.a,n.ba=y-n.a,f&&(s=h(n.a,y,n.c,n.d),a.splice(x,1,s[0],s[1],s[2],s[3]))},j=function(a,d,e,g){var h,i,j,k,l,m,n=[];if(g)for(a=[g].concat(a),i=a.length;--i>-1;)"string"==typeof(m=a[i][d])&&"="===m.charAt(1)&&(a[i][d]=g[d]+Number(m.charAt(0)+m.substr(2)));if(h=a.length-2,0>h)return n[0]=new f(a[0][d],0,0,a[-1>h?0:1][d]),n;for(i=0;h>i;i++)j=a[i][d],k=a[i+1][d],n[i]=new f(j,0,0,k),e&&(l=a[i+2][d],b[i]=(b[i]||0)+(k-j)*(k-j),c[i]=(c[i]||0)+(l-k)*(l-k));return n[i]=new f(a[i][d],0,0,a[i+1][d]),n},k=function(a,f,h,k,l,m){var n,o,p,q,r,s,t,u,v={},w=[],x=m||a[0];l="string"==typeof l?","+l+",":g,null==f&&(f=1);for(o in a[0])w.push(o);if(a.length>1){for(u=a[a.length-1],t=!0,n=w.length;--n>-1;)if(o=w[n],Math.abs(x[o]-u[o])>.05){t=!1;break}t&&(a=a.concat(),m&&a.unshift(m),a.push(a[1]),m=a[a.length-3])}for(b.length=c.length=d.length=0,n=w.length;--n>-1;)o=w[n],e[o]=-1!==l.indexOf(","+o+","),v[o]=j(a,o,e[o],m);for(n=b.length;--n>-1;)b[n]=Math.sqrt(b[n]),c[n]=Math.sqrt(c[n]);if(!k){for(n=w.length;--n>-1;)if(e[o])for(p=v[w[n]],s=p.length-1,q=0;s>q;q++)r=p[q+1].da/c[q]+p[q].da/b[q],d[q]=(d[q]||0)+r*r;for(n=d.length;--n>-1;)d[n]=Math.sqrt(d[n])}for(n=w.length,q=h?4:1;--n>-1;)o=w[n],p=v[o],i(p,f,h,k,e[o]),t&&(p.splice(0,q),p.splice(p.length-q,q));return v},l=function(a,b,c){b=b||"soft";var d,e,g,h,i,j,k,l,m,n,o,p={},q="cubic"===b?3:2,r="soft"===b,s=[];if(r&&c&&(a=[c].concat(a)),null==a||a.length<q+1)throw"invalid Bezier data";for(m in a[0])s.push(m);for(j=s.length;--j>-1;){for(m=s[j],p[m]=i=[],n=0,l=a.length,k=0;l>k;k++)d=null==c?a[k][m]:"string"==typeof(o=a[k][m])&&"="===o.charAt(1)?c[m]+Number(o.charAt(0)+o.substr(2)):Number(o),r&&k>1&&l-1>k&&(i[n++]=(d+i[n-2])/2),i[n++]=d;for(l=n-q+1,n=0,k=0;l>k;k+=q)d=i[k],e=i[k+1],g=i[k+2],h=2===q?0:i[k+3],i[n++]=o=3===q?new f(d,e,g,h):new f(d,(2*e+d)/3,(2*e+g)/3,g);i.length=n}return p},m=function(a,b,c){for(var d,e,f,g,h,i,j,k,l,m,n,o=1/c,p=a.length;--p>-1;)for(m=a[p],f=m.a,g=m.d-f,h=m.c-f,i=m.b-f,d=e=0,k=1;c>=k;k++)j=o*k,l=1-j,d=e-(e=(j*j*g+3*l*(j*h+l*i))*j),n=p*c+k-1,b[n]=(b[n]||0)+d*d},n=function(a,b){b=b>>0||6;var c,d,e,f,g=[],h=[],i=0,j=0,k=b-1,l=[],n=[];for(c in a)m(a[c],g,b);for(e=g.length,d=0;e>d;d++)i+=Math.sqrt(g[d]),f=d%b,n[f]=i,f===k&&(j+=i,f=d/b>>0,l[f]=n,h[f]=j,i=0,n=[]);return{length:j,lengths:h,segments:l}},o=window._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.2",API:2,global:!0,init:function(a,b,c){this._target=a,b instanceof Array&&(b={values:b}),this._func={},this._round={},this._props=[],this._timeRes=null==b.timeResolution?6:parseInt(b.timeResolution,10);var d,e,f,g,h,i=b.values||[],j={},m=i[0],o=b.autoRotate||c.vars.orientToBezier;this._autoRotate=o?o instanceof Array?o:[["x","y","rotation",o===!0?0:Number(o)||0]]:null;for(d in m)this._props.push(d);for(f=this._props.length;--f>-1;)d=this._props[f],this._overwriteProps.push(d),e=this._func[d]="function"==typeof a[d],j[d]=e?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]():parseFloat(a[d]),h||j[d]!==i[0][d]&&(h=j);if(this._beziers="cubic"!==b.type&&"quadratic"!==b.type&&"soft"!==b.type?k(i,isNaN(b.curviness)?1:b.curviness,!1,"thruBasic"===b.type,b.correlate,h):l(i,b.type,j),this._segCount=this._beziers[d].length,this._timeRes){var p=n(this._beziers,this._timeRes);this._length=p.length,this._lengths=p.lengths,this._segments=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(o=this._autoRotate)for(this._initialRotations=[],o[0]instanceof Array||(this._autoRotate=o=[o]),f=o.length;--f>-1;){for(g=0;3>g;g++)d=o[f][g],this._func[d]="function"==typeof a[d]?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]:!1;d=o[f][2],this._initialRotations[f]=this._func[d]?this._func[d].call(this._target):this._target[d]}return this._startRatio=c.vars.runBackwards?1:0,!0},set:function(b){var c,d,e,f,g,h,i,j,k,l,m=this._segCount,n=this._func,o=this._target,p=b!==this._startRatio;if(this._timeRes){if(k=this._lengths,l=this._curSeg,b*=this._length,e=this._li,b>this._l2&&m-1>e){for(j=m-1;j>e&&(this._l2=k[++e])<=b;);this._l1=k[e-1],this._li=e,this._curSeg=l=this._segments[e],this._s2=l[this._s1=this._si=0]}else if(b<this._l1&&e>0){for(;e>0&&(this._l1=k[--e])>=b;);0===e&&b<this._l1?this._l1=0:e++,this._l2=k[e],this._li=e,this._curSeg=l=this._segments[e],this._s1=l[(this._si=l.length-1)-1]||0,this._s2=l[this._si]}if(c=e,b-=this._l1,e=this._si,b>this._s2&&e<l.length-1){for(j=l.length-1;j>e&&(this._s2=l[++e])<=b;);this._s1=l[e-1],this._si=e}else if(b<this._s1&&e>0){for(;e>0&&(this._s1=l[--e])>=b;);0===e&&b<this._s1?this._s1=0:e++,this._s2=l[e],this._si=e}h=(e+(b-this._s1)/(this._s2-this._s1))*this._prec}else c=0>b?0:b>=1?m-1:m*b>>0,h=(b-c*(1/m))*m;for(d=1-h,e=this._props.length;--e>-1;)f=this._props[e],g=this._beziers[f][c],i=(h*h*g.da+3*d*(h*g.ca+d*g.ba))*h+g.a,this._round[f]&&(i=Math.round(i)),n[f]?o[f](i):o[f]=i;if(this._autoRotate){var q,r,s,t,u,v,w,x=this._autoRotate;for(e=x.length;--e>-1;)f=x[e][2],v=x[e][3]||0,w=x[e][4]===!0?1:a,g=this._beziers[x[e][0]],q=this._beziers[x[e][1]],g&&q&&(g=g[c],q=q[c],r=g.a+(g.b-g.a)*h,t=g.b+(g.c-g.b)*h,r+=(t-r)*h,t+=(g.c+(g.d-g.c)*h-t)*h,s=q.a+(q.b-q.a)*h,u=q.b+(q.c-q.b)*h,s+=(u-s)*h,u+=(q.c+(q.d-q.c)*h-u)*h,i=p?Math.atan2(u-s,t-r)*w+v:this._initialRotations[e],n[f]?o[f](i):o[f]=i)}}}),p=o.prototype;o.bezierThrough=k,o.cubicToQuadratic=h,o._autoCSS=!0,o.quadraticToCubic=function(a,b,c){return new f(a,(2*b+a)/3,(2*b+c)/3,c)},o._cssRegister=function(){var a=window._gsDefine.globals.CSSPlugin;if(a){var b=a._internals,c=b._parseToProxy,d=b._setPluginRatio,e=b.CSSPropTween;b._registerComplexSpecialProp("bezier",{parser:function(a,b,f,g,h,i){b instanceof Array&&(b={values:b}),i=new o;var j,k,l,m=b.values,n=m.length-1,p=[],q={};if(0>n)return h;for(j=0;n>=j;j++)l=c(a,m[j],g,h,i,n!==j),p[j]=l.end;for(k in b)q[k]=b[k];return q.values=p,h=new e(a,"bezier",0,0,l.pt,2),h.data=l,h.plugin=i,h.setRatio=d,0===q.autoRotate&&(q.autoRotate=!0),!q.autoRotate||q.autoRotate instanceof Array||(j=q.autoRotate===!0?0:Number(q.autoRotate),q.autoRotate=null!=l.end.left?[["left","top","rotation",j,!1]]:null!=l.end.x?[["x","y","rotation",j,!1]]:!1),q.autoRotate&&(g._transform||g._enableTransforms(!1),l.autoRotate=g._target._gsTransform),i._onInitTween(l.proxy,q,g._tween),h}})}},p._roundProps=function(a,b){for(var c=this._overwriteProps,d=c.length;--d>-1;)(a[c[d]]||a.bezier||a.bezierThrough)&&(this._round[c[d]]=b)},p._kill=function(a){var b,c,d=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],delete this._func[b],c=d.length;--c>-1;)d[c]===b&&d.splice(c,1);return this._super._kill.call(this,a)}}(),window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var c,d,e,f,g=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=g.prototype.setRatio},h={},i=g.prototype=new a("css");i.constructor=g,g.version="1.11.8",g.API=2,g.defaultTransformPerspective=0,g.defaultSkewType="compensated",i="px",g.suffixMap={top:i,right:i,bottom:i,left:i,width:i,height:i,fontSize:i,padding:i,margin:i,perspective:i,lineHeight:""};var j,k,l,m,n,o,p=/(?:\d|\-\d|\.\d|\-\.\d)+/g,q=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,r=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,s=/[^\d\-\.]/g,t=/(?:\d|\-|\+|=|#|\.)*/g,u=/opacity *= *([^)]*)/,v=/opacity:([^;]*)/,w=/alpha\(opacity *=.+?\)/i,x=/^(rgb|hsl)/,y=/([A-Z])/g,z=/-([a-z])/gi,A=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,B=function(a,b){return b.toUpperCase()},C=/(?:Left|Right|Width)/i,D=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,E=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,F=/,(?=[^\)]*(?:\(|$))/gi,G=Math.PI/180,H=180/Math.PI,I={},J=document,K=J.createElement("div"),L=J.createElement("img"),M=g._internals={_specialProps:h},N=navigator.userAgent,O=function(){var a,b=N.indexOf("Android"),c=J.createElement("div");return l=-1!==N.indexOf("Safari")&&-1===N.indexOf("Chrome")&&(-1===b||Number(N.substr(b+8,1))>3),n=l&&Number(N.substr(N.indexOf("Version/")+8,1))<6,m=-1!==N.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N)&&(o=parseFloat(RegExp.$1)),c.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",a=c.getElementsByTagName("a")[0],a?/^0.55/.test(a.style.opacity):!1}(),P=function(a){return u.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Q=function(a){window.console},R="",S="",T=function(a,b){b=b||K;var c,d,e=b.style;if(void 0!==e[a])return a;for(a=a.charAt(0).toUpperCase()+a.substr(1),c=["O","Moz","ms","Ms","Webkit"],d=5;--d>-1&&void 0===e[c[d]+a];);return d>=0?(S=3===d?"ms":c[d],R="-"+S.toLowerCase()+"-",S+a):null},U=J.defaultView?J.defaultView.getComputedStyle:function(){},V=g.getStyle=function(a,b,c,d,e){var f;return O||"opacity"!==b?(!d&&a.style[b]?f=a.style[b]:(c=c||U(a,null))?f=c[b]||c.getPropertyValue(b)||c.getPropertyValue(b.replace(y,"-$1").toLowerCase()):a.currentStyle&&(f=a.currentStyle[b]),null==e||f&&"none"!==f&&"auto"!==f&&"auto auto"!==f?f:e):P(a)},W=M.convertToPixels=function(a,c,d,e,f){if("px"===e||!e)return d;if("auto"===e||!d)return 0;var h,i,j,k=C.test(c),l=a,m=K.style,n=0>d;if(n&&(d=-d),"%"===e&&-1!==c.indexOf("border"))h=d/100*(k?a.clientWidth:a.clientHeight);else{if(m.cssText="border:0 solid red;position:"+V(a,"position")+";line-height:0;","%"!==e&&l.appendChild)m[k?"borderLeftWidth":"borderTopWidth"]=d+e;else{if(l=a.parentNode||J.body,i=l._gsCache,j=b.ticker.frame,i&&k&&i.time===j)return i.width*d/100;m[k?"width":"height"]=d+e}l.appendChild(K),h=parseFloat(K[k?"offsetWidth":"offsetHeight"]),l.removeChild(K),k&&"%"===e&&g.cacheWidths!==!1&&(i=l._gsCache=l._gsCache||{},i.time=j,i.width=h/d*100),0!==h||f||(h=W(a,c,d,e,!0))}return n?-h:h},X=M.calculateOffset=function(a,b,c){if("absolute"!==V(a,"position",c))return 0;var d="left"===b?"Left":"Top",e=V(a,"margin"+d,c);return a["offset"+d]-(W(a,b,parseFloat(e),e.replace(t,""))||0)},Y=function(a,b){var c,d,e={};if(b=b||U(a,null))if(c=b.length)for(;--c>-1;)e[b[c].replace(z,B)]=b.getPropertyValue(b[c]);else for(c in b)e[c]=b[c];else if(b=a.currentStyle||a.style)for(c in b)"string"==typeof c&&void 0===e[c]&&(e[c.replace(z,B)]=b[c]);return O||(e.opacity=P(a)),d=yb(a,b,!1),e.rotation=d.rotation,e.skewX=d.skewX,e.scaleX=d.scaleX,e.scaleY=d.scaleY,e.x=d.x,e.y=d.y,wb&&(e.z=d.z,e.rotationX=d.rotationX,e.rotationY=d.rotationY,e.scaleZ=d.scaleZ),e.filters&&delete e.filters,e},Z=function(a,b,c,d,e){var f,g,h,i={},j=a.style;for(g in c)"cssText"!==g&&"length"!==g&&isNaN(g)&&(b[g]!==(f=c[g])||e&&e[g])&&-1===g.indexOf("Origin")&&("number"==typeof f||"string"==typeof f)&&(i[g]="auto"!==f||"left"!==g&&"top"!==g?""!==f&&"auto"!==f&&"none"!==f||"string"!=typeof b[g]||""===b[g].replace(s,"")?f:0:X(a,g),void 0!==j[g]&&(h=new lb(j,g,j[g],h)));if(d)for(g in d)"className"!==g&&(i[g]=d[g]);return{difs:i,firstMPT:h}},$={width:["Left","Right"],height:["Top","Bottom"]},_=["marginLeft","marginRight","marginTop","marginBottom"],ab=function(a,b,c){var d=parseFloat("width"===b?a.offsetWidth:a.offsetHeight),e=$[b],f=e.length;for(c=c||U(a,null);--f>-1;)d-=parseFloat(V(a,"padding"+e[f],c,!0))||0,d-=parseFloat(V(a,"border"+e[f]+"Width",c,!0))||0;return d},bb=function(a,b){(null==a||""===a||"auto"===a||"auto auto"===a)&&(a="0 0");var c=a.split(" "),d=-1!==a.indexOf("left")?"0%":-1!==a.indexOf("right")?"100%":c[0],e=-1!==a.indexOf("top")?"0%":-1!==a.indexOf("bottom")?"100%":c[1];return null==e?e="0":"center"===e&&(e="50%"),("center"===d||isNaN(parseFloat(d))&&-1===(d+"").indexOf("="))&&(d="50%"),b&&(b.oxp=-1!==d.indexOf("%"),b.oyp=-1!==e.indexOf("%"),b.oxr="="===d.charAt(1),b.oyr="="===e.charAt(1),b.ox=parseFloat(d.replace(s,"")),b.oy=parseFloat(e.replace(s,""))),d+" "+e+(c.length>2?" "+c[2]:"")},cb=function(a,b){return"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)},db=function(a,b){return null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*Number(a.substr(2))+b:parseFloat(a)},eb=function(a,b,c,d){var e,f,g,h,i=1e-6;return null==a?h=b:"number"==typeof a?h=a:(e=360,f=a.split("_"),g=Number(f[0].replace(s,""))*(-1===a.indexOf("rad")?1:H)-("="===a.charAt(1)?0:b),f.length&&(d&&(d[c]=b+g),-1!==a.indexOf("short")&&(g%=e,g!==g%(e/2)&&(g=0>g?g+e:g-e)),-1!==a.indexOf("_cw")&&0>g?g=(g+9999999999*e)%e-(g/e|0)*e:-1!==a.indexOf("ccw")&&g>0&&(g=(g-9999999999*e)%e-(g/e|0)*e)),h=b+g),i>h&&h>-i&&(h=0),h},fb={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},gb=function(a,b,c){return a=0>a?a+1:a>1?a-1:a,255*(1>6*a?b+(c-b)*a*6:.5>a?c:2>3*a?b+(c-b)*(2/3-a)*6:b)+.5|0},hb=function(a){var b,c,d,e,f,g;return a&&""!==a?"number"==typeof a?[a>>16,a>>8&255,255&a]:(","===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),fb[a]?fb[a]:"#"===a.charAt(0)?(4===a.length&&(b=a.charAt(1),c=a.charAt(2),d=a.charAt(3),a="#"+b+b+c+c+d+d),a=parseInt(a.substr(1),16),[a>>16,a>>8&255,255&a]):"hsl"===a.substr(0,3)?(a=a.match(p),e=Number(a[0])%360/360,f=Number(a[1])/100,g=Number(a[2])/100,c=.5>=g?g*(f+1):g+f-g*f,b=2*g-c,a.length>3&&(a[3]=Number(a[3])),a[0]=gb(e+1/3,b,c),a[1]=gb(e,b,c),a[2]=gb(e-1/3,b,c),a):(a=a.match(p)||fb.transparent,a[0]=Number(a[0]),a[1]=Number(a[1]),a[2]=Number(a[2]),a.length>3&&(a[3]=Number(a[3])),a)):fb.black},ib="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(i in fb)ib+="|"+i+"\\b";ib=new RegExp(ib+")","gi");var jb=function(a,b,c,d){if(null==a)return function(a){return a};var e,f=b?(a.match(ib)||[""])[0]:"",g=a.split(f).join("").match(r)||[],h=a.substr(0,a.indexOf(g[0])),i=")"===a.charAt(a.length-1)?")":"",j=-1!==a.indexOf(" ")?" ":",",k=g.length,l=k>0?g[0].replace(p,""):"";return k?e=b?function(a){var b,m,n,o;if("number"==typeof a)a+=l;
else if(d&&F.test(a)){for(o=a.replace(F,"|").split("|"),n=0;n<o.length;n++)o[n]=e(o[n]);return o.join(",")}if(b=(a.match(ib)||[f])[0],m=a.split(b).join("").match(r)||[],n=m.length,k>n--)for(;++n<k;)m[n]=c?m[(n-1)/2|0]:g[n];return h+m.join(j)+j+b+i+(-1!==a.indexOf("inset")?" inset":"")}:function(a){var b,f,m;if("number"==typeof a)a+=l;else if(d&&F.test(a)){for(f=a.replace(F,"|").split("|"),m=0;m<f.length;m++)f[m]=e(f[m]);return f.join(",")}if(b=a.match(r)||[],m=b.length,k>m--)for(;++m<k;)b[m]=c?b[(m-1)/2|0]:g[m];return h+b.join(j)+i}:function(a){return a}},kb=function(a){return a=a.split(","),function(b,c,d,e,f,g,h){var i,j=(c+"").split(" ");for(h={},i=0;4>i;i++)h[a[i]]=j[i]=j[i]||j[(i-1)/2>>0];return e.parse(b,h,f,g)}},lb=(M._setPluginRatio=function(a){this.plugin.setRatio(a);for(var b,c,d,e,f=this.data,g=f.proxy,h=f.firstMPT,i=1e-6;h;)b=g[h.v],h.r?b=Math.round(b):i>b&&b>-i&&(b=0),h.t[h.p]=b,h=h._next;if(f.autoRotate&&(f.autoRotate.rotation=g.rotation),1===a)for(h=f.firstMPT;h;){if(c=h.t,c.type){if(1===c.type){for(e=c.xs0+c.s+c.xs1,d=1;d<c.l;d++)e+=c["xn"+d]+c["xs"+(d+1)];c.e=e}}else c.e=c.s+c.xs0;h=h._next}},function(a,b,c,d,e){this.t=a,this.p=b,this.v=c,this.r=e,d&&(d._prev=this,this._next=d)}),mb=(M._parseToProxy=function(a,b,c,d,e,f){var g,h,i,j,k,l=d,m={},n={},o=c._transform,p=I;for(c._transform=null,I=b,d=k=c.parse(a,b,d,e),I=p,f&&(c._transform=o,l&&(l._prev=null,l._prev&&(l._prev._next=null)));d&&d!==l;){if(d.type<=1&&(h=d.p,n[h]=d.s+d.c,m[h]=d.s,f||(j=new lb(d,"s",h,j,d.r),d.c=0),1===d.type))for(g=d.l;--g>0;)i="xn"+g,h=d.p+"_"+i,n[h]=d.data[i],m[h]=d[i],f||(j=new lb(d,i,h,j,d.rxp[i]));d=d._next}return{proxy:m,end:n,firstMPT:j,pt:k}},M.CSSPropTween=function(a,b,d,e,g,h,i,j,k,l,m){this.t=a,this.p=b,this.s=d,this.c=e,this.n=i||b,a instanceof mb||f.push(this.n),this.r=j,this.type=h||0,k&&(this.pr=k,c=!0),this.b=void 0===l?d:l,this.e=void 0===m?d+e:m,g&&(this._next=g,g._prev=this)}),nb=g.parseComplex=function(a,b,c,d,e,f,g,h,i,k){c=c||f||"",g=new mb(a,b,0,0,g,k?2:1,null,!1,h,c,d),d+="";var l,m,n,o,r,s,t,u,v,w,y,z,A=c.split(", ").join(",").split(" "),B=d.split(", ").join(",").split(" "),C=A.length,D=j!==!1;for((-1!==d.indexOf(",")||-1!==c.indexOf(","))&&(A=A.join(" ").replace(F,", ").split(" "),B=B.join(" ").replace(F,", ").split(" "),C=A.length),C!==B.length&&(A=(f||"").split(" "),C=A.length),g.plugin=i,g.setRatio=k,l=0;C>l;l++)if(o=A[l],r=B[l],u=parseFloat(o),u||0===u)g.appendXtra("",u,cb(r,u),r.replace(q,""),D&&-1!==r.indexOf("px"),!0);else if(e&&("#"===o.charAt(0)||fb[o]||x.test(o)))z=","===r.charAt(r.length-1)?"),":")",o=hb(o),r=hb(r),v=o.length+r.length>6,v&&!O&&0===r[3]?(g["xs"+g.l]+=g.l?" transparent":"transparent",g.e=g.e.split(B[l]).join("transparent")):(O||(v=!1),g.appendXtra(v?"rgba(":"rgb(",o[0],r[0]-o[0],",",!0,!0).appendXtra("",o[1],r[1]-o[1],",",!0).appendXtra("",o[2],r[2]-o[2],v?",":z,!0),v&&(o=o.length<4?1:o[3],g.appendXtra("",o,(r.length<4?1:r[3])-o,z,!1)));else if(s=o.match(p)){if(t=r.match(q),!t||t.length!==s.length)return g;for(n=0,m=0;m<s.length;m++)y=s[m],w=o.indexOf(y,n),g.appendXtra(o.substr(n,w-n),Number(y),cb(t[m],y),"",D&&"px"===o.substr(w+y.length,2),0===m),n=w+y.length;g["xs"+g.l]+=o.substr(n)}else g["xs"+g.l]+=g.l?" "+o:o;if(-1!==d.indexOf("=")&&g.data){for(z=g.xs0+g.data.s,l=1;l<g.l;l++)z+=g["xs"+l]+g.data["xn"+l];g.e=z+g["xs"+l]}return g.l||(g.type=-1,g.xs0=g.e),g.xfirst||g},ob=9;for(i=mb.prototype,i.l=i.pr=0;--ob>0;)i["xn"+ob]=0,i["xs"+ob]="";i.xs0="",i._next=i._prev=i.xfirst=i.data=i.plugin=i.setRatio=i.rxp=null,i.appendXtra=function(a,b,c,d,e,f){var g=this,h=g.l;return g["xs"+h]+=f&&h?" "+a:a||"",c||0===h||g.plugin?(g.l++,g.type=g.setRatio?2:1,g["xs"+g.l]=d||"",h>0?(g.data["xn"+h]=b+c,g.rxp["xn"+h]=e,g["xn"+h]=b,g.plugin||(g.xfirst=new mb(g,"xn"+h,b,c,g.xfirst||g,0,g.n,e,g.pr),g.xfirst.xs0=0),g):(g.data={s:b+c},g.rxp={},g.s=b,g.c=c,g.r=e,g)):(g["xs"+h]+=b+(d||""),g)};var pb=function(a,b){b=b||{},this.p=b.prefix?T(a)||a:a,h[a]=h[this.p]=this,this.format=b.formatter||jb(b.defaultValue,b.color,b.collapsible,b.multi),b.parser&&(this.parse=b.parser),this.clrs=b.color,this.multi=b.multi,this.keyword=b.keyword,this.dflt=b.defaultValue,this.pr=b.priority||0},qb=M._registerComplexSpecialProp=function(a,b,c){"object"!=typeof b&&(b={parser:c});var d,e,f=a.split(","),g=b.defaultValue;for(c=c||[g],d=0;d<f.length;d++)b.prefix=0===d&&b.prefix,b.defaultValue=c[d]||g,e=new pb(f[d],b)},rb=function(a){if(!h[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";qb(a,{parser:function(a,c,d,e,f,g,i){var j=(window.GreenSockGlobals||window).com.greensock.plugins[b];return j?(j._cssRegister(),h[d].parse(a,c,d,e,f,g,i)):(Q("Error: "+b+" js file not loaded."),f)}})}};i=pb.prototype,i.parseComplex=function(a,b,c,d,e,f){var g,h,i,j,k,l,m=this.keyword;if(this.multi&&(F.test(c)||F.test(b)?(h=b.replace(F,"|").split("|"),i=c.replace(F,"|").split("|")):m&&(h=[b],i=[c])),i){for(j=i.length>h.length?i.length:h.length,g=0;j>g;g++)b=h[g]=h[g]||this.dflt,c=i[g]=i[g]||this.dflt,m&&(k=b.indexOf(m),l=c.indexOf(m),k!==l&&(c=-1===l?i:h,c[g]+=" "+m));b=h.join(", "),c=i.join(", ")}return nb(a,this.p,b,c,this.clrs,this.dflt,d,this.pr,e,f)},i.parse=function(a,b,c,d,f,g){return this.parseComplex(a.style,this.format(V(a,this.p,e,!1,this.dflt)),this.format(b),f,g)},g.registerSpecialProp=function(a,b,c){qb(a,{parser:function(a,d,e,f,g,h){var i=new mb(a,e,0,0,g,2,e,!1,c);return i.plugin=h,i.setRatio=b(a,d,f._tween,e),i},priority:c})};var sb="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective".split(","),tb=T("transform"),ub=R+"transform",vb=T("transformOrigin"),wb=null!==T("perspective"),xb=M.Transform=function(){this.skewY=0},yb=M.getTransform=function(a,b,c,d){if(a._gsTransform&&c&&!d)return a._gsTransform;var e,f,h,i,j,k,l,m,n,o,p,q,r,s=c?a._gsTransform||new xb:new xb,t=s.scaleX<0,u=2e-5,v=1e5,w=179.99,x=w*G,y=wb?parseFloat(V(a,vb,b,!1,"0 0 0").split(" ")[2])||s.zOrigin||0:0;for(tb?e=V(a,ub,b,!0):a.currentStyle&&(e=a.currentStyle.filter.match(D),e=e&&4===e.length?[e[0].substr(4),Number(e[2].substr(4)),Number(e[1].substr(4)),e[3].substr(4),s.x||0,s.y||0].join(","):""),f=(e||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],h=f.length;--h>-1;)i=Number(f[h]),f[h]=(j=i-(i|=0))?(j*v+(0>j?-.5:.5)|0)/v+i:i;if(16===f.length){var z=f[8],A=f[9],B=f[10],C=f[12],E=f[13],F=f[14];if(s.zOrigin&&(F=-s.zOrigin,C=z*F-f[12],E=A*F-f[13],F=B*F+s.zOrigin-f[14]),!c||d||null==s.rotationX){var I,J,K,L,M,N,O,P=f[0],Q=f[1],R=f[2],S=f[3],T=f[4],U=f[5],W=f[6],X=f[7],Y=f[11],Z=Math.atan2(W,B),$=-x>Z||Z>x;s.rotationX=Z*H,Z&&(L=Math.cos(-Z),M=Math.sin(-Z),I=T*L+z*M,J=U*L+A*M,K=W*L+B*M,z=T*-M+z*L,A=U*-M+A*L,B=W*-M+B*L,Y=X*-M+Y*L,T=I,U=J,W=K),Z=Math.atan2(z,P),s.rotationY=Z*H,Z&&(N=-x>Z||Z>x,L=Math.cos(-Z),M=Math.sin(-Z),I=P*L-z*M,J=Q*L-A*M,K=R*L-B*M,A=Q*M+A*L,B=R*M+B*L,Y=S*M+Y*L,P=I,Q=J,R=K),Z=Math.atan2(Q,U),s.rotation=Z*H,Z&&(O=-x>Z||Z>x,L=Math.cos(-Z),M=Math.sin(-Z),P=P*L+T*M,J=Q*L+U*M,U=Q*-M+U*L,W=R*-M+W*L,Q=J),O&&$?s.rotation=s.rotationX=0:O&&N?s.rotation=s.rotationY=0:N&&$&&(s.rotationY=s.rotationX=0),s.scaleX=(Math.sqrt(P*P+Q*Q)*v+.5|0)/v,s.scaleY=(Math.sqrt(U*U+A*A)*v+.5|0)/v,s.scaleZ=(Math.sqrt(W*W+B*B)*v+.5|0)/v,s.skewX=0,s.perspective=Y?1/(0>Y?-Y:Y):0,s.x=C,s.y=E,s.z=F}}else if(!(wb&&!d&&f.length&&s.x===f[4]&&s.y===f[5]&&(s.rotationX||s.rotationY)||void 0!==s.x&&"none"===V(a,"display",b))){var _=f.length>=6,ab=_?f[0]:1,bb=f[1]||0,cb=f[2]||0,db=_?f[3]:1;s.x=f[4]||0,s.y=f[5]||0,k=Math.sqrt(ab*ab+bb*bb),l=Math.sqrt(db*db+cb*cb),m=ab||bb?Math.atan2(bb,ab)*H:s.rotation||0,n=cb||db?Math.atan2(cb,db)*H+m:s.skewX||0,o=k-Math.abs(s.scaleX||0),p=l-Math.abs(s.scaleY||0),Math.abs(n)>90&&Math.abs(n)<270&&(t?(k*=-1,n+=0>=m?180:-180,m+=0>=m?180:-180):(l*=-1,n+=0>=n?180:-180)),q=(m-s.rotation)%180,r=(n-s.skewX)%180,(void 0===s.skewX||o>u||-u>o||p>u||-u>p||q>-w&&w>q&&q*v|!1||r>-w&&w>r&&r*v|!1)&&(s.scaleX=k,s.scaleY=l,s.rotation=m,s.skewX=n),wb&&(s.rotationX=s.rotationY=s.z=0,s.perspective=parseFloat(g.defaultTransformPerspective)||0,s.scaleZ=1)}s.zOrigin=y;for(h in s)s[h]<u&&s[h]>-u&&(s[h]=0);return c&&(a._gsTransform=s),s},zb=function(a){var b,c,d=this.data,e=-d.rotation*G,f=e+d.skewX*G,g=1e5,h=(Math.cos(e)*d.scaleX*g|0)/g,i=(Math.sin(e)*d.scaleX*g|0)/g,j=(Math.sin(f)*-d.scaleY*g|0)/g,k=(Math.cos(f)*d.scaleY*g|0)/g,l=this.t.style,m=this.t.currentStyle;if(m){c=i,i=-j,j=-c,b=m.filter,l.filter="";var n,p,q=this.t.offsetWidth,r=this.t.offsetHeight,s="absolute"!==m.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+i+", M21="+j+", M22="+k,w=d.x,x=d.y;if(null!=d.ox&&(n=(d.oxp?q*d.ox*.01:d.ox)-q/2,p=(d.oyp?r*d.oy*.01:d.oy)-r/2,w+=n-(n*h+p*i),x+=p-(n*j+p*k)),s?(n=q/2,p=r/2,v+=", Dx="+(n-(n*h+p*i)+w)+", Dy="+(p-(n*j+p*k)+x)+")"):v+=", sizingMethod='auto expand')",l.filter=-1!==b.indexOf("DXImageTransform.Microsoft.Matrix(")?b.replace(E,v):v+" "+b,(0===a||1===a)&&1===h&&0===i&&0===j&&1===k&&(s&&-1===v.indexOf("Dx=0, Dy=0")||u.test(b)&&100!==parseFloat(RegExp.$1)||-1===b.indexOf("gradient("&&b.indexOf("Alpha"))&&l.removeAttribute("filter")),!s){var y,z,A,B=8>o?1:-1;for(n=d.ieOffsetX||0,p=d.ieOffsetY||0,d.ieOffsetX=Math.round((q-((0>h?-h:h)*q+(0>i?-i:i)*r))/2+w),d.ieOffsetY=Math.round((r-((0>k?-k:k)*r+(0>j?-j:j)*q))/2+x),ob=0;4>ob;ob++)z=_[ob],y=m[z],c=-1!==y.indexOf("px")?parseFloat(y):W(this.t,z,parseFloat(y),y.replace(t,""))||0,A=c!==d[z]?2>ob?-d.ieOffsetX:-d.ieOffsetY:2>ob?n-d.ieOffsetX:p-d.ieOffsetY,l[z]=(d[z]=Math.round(c-A*(0===ob||2===ob?1:B)))+"px"}}},Ab=M.set3DTransformRatio=function(){var a,b,c,d,e,f,g,h,i,j,k,l,n,o,p,q,r,s,t,u,v,w,x,y=this.data,z=this.t.style,A=y.rotation*G,B=y.scaleX,C=y.scaleY,D=y.scaleZ,E=y.perspective;if(m){var F=1e-4;F>B&&B>-F&&(B=D=2e-5),F>C&&C>-F&&(C=D=2e-5),!E||y.z||y.rotationX||y.rotationY||(E=0)}if(A||y.skewX)s=Math.cos(A),t=Math.sin(A),a=s,e=t,y.skewX&&(A-=y.skewX*G,s=Math.cos(A),t=Math.sin(A),"simple"===y.skewType&&(u=Math.tan(y.skewX*G),u=Math.sqrt(1+u*u),s*=u,t*=u)),b=-t,f=s;else{if(!(y.rotationY||y.rotationX||1!==D||E))return void(z[tb]="translate3d("+y.x+"px,"+y.y+"px,"+y.z+"px)"+(1!==B||1!==C?" scale("+B+","+C+")":""));a=f=1,b=e=0}k=1,c=d=g=h=i=j=l=n=o=0,p=E?-1/E:0,q=y.zOrigin,r=1e5,A=y.rotationY*G,A&&(s=Math.cos(A),t=Math.sin(A),i=k*-t,n=p*-t,c=a*t,g=e*t,k*=s,p*=s,a*=s,e*=s),A=y.rotationX*G,A&&(s=Math.cos(A),t=Math.sin(A),u=b*s+c*t,v=f*s+g*t,w=j*s+k*t,x=o*s+p*t,c=b*-t+c*s,g=f*-t+g*s,k=j*-t+k*s,p=o*-t+p*s,b=u,f=v,j=w,o=x),1!==D&&(c*=D,g*=D,k*=D,p*=D),1!==C&&(b*=C,f*=C,j*=C,o*=C),1!==B&&(a*=B,e*=B,i*=B,n*=B),q&&(l-=q,d=c*l,h=g*l,l=k*l+q),d=(u=(d+=y.x)-(d|=0))?(u*r+(0>u?-.5:.5)|0)/r+d:d,h=(u=(h+=y.y)-(h|=0))?(u*r+(0>u?-.5:.5)|0)/r+h:h,l=(u=(l+=y.z)-(l|=0))?(u*r+(0>u?-.5:.5)|0)/r+l:l,z[tb]="matrix3d("+[(a*r|0)/r,(e*r|0)/r,(i*r|0)/r,(n*r|0)/r,(b*r|0)/r,(f*r|0)/r,(j*r|0)/r,(o*r|0)/r,(c*r|0)/r,(g*r|0)/r,(k*r|0)/r,(p*r|0)/r,d,h,l,E?1+-l/E:1].join(",")+")"},Bb=M.set2DTransformRatio=function(a){var b,c,d,e,f,g=this.data,h=this.t,i=h.style;return g.rotationX||g.rotationY||g.z||g.force3D?(this.setRatio=Ab,void Ab.call(this,a)):void(g.rotation||g.skewX?(b=g.rotation*G,c=b-g.skewX*G,d=1e5,e=g.scaleX*d,f=g.scaleY*d,i[tb]="matrix("+(Math.cos(b)*e|0)/d+","+(Math.sin(b)*e|0)/d+","+(Math.sin(c)*-f|0)/d+","+(Math.cos(c)*f|0)/d+","+g.x+","+g.y+")"):i[tb]="matrix("+g.scaleX+",0,0,"+g.scaleY+","+g.x+","+g.y+")")};qb("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType",{parser:function(a,b,c,d,f,h,i){if(d._transform)return f;var j,k,l,m,n,o,p,q=d._transform=yb(a,e,!0,i.parseTransform),r=a.style,s=1e-6,t=sb.length,u=i,v={};if("string"==typeof u.transform&&tb)l=r.cssText,r[tb]=u.transform,r.display="block",j=yb(a,null,!1),r.cssText=l;else if("object"==typeof u){if(j={scaleX:db(null!=u.scaleX?u.scaleX:u.scale,q.scaleX),scaleY:db(null!=u.scaleY?u.scaleY:u.scale,q.scaleY),scaleZ:db(u.scaleZ,q.scaleZ),x:db(u.x,q.x),y:db(u.y,q.y),z:db(u.z,q.z),perspective:db(u.transformPerspective,q.perspective)},p=u.directionalRotation,null!=p)if("object"==typeof p)for(l in p)u[l]=p[l];else u.rotation=p;j.rotation=eb("rotation"in u?u.rotation:"shortRotation"in u?u.shortRotation+"_short":"rotationZ"in u?u.rotationZ:q.rotation,q.rotation,"rotation",v),wb&&(j.rotationX=eb("rotationX"in u?u.rotationX:"shortRotationX"in u?u.shortRotationX+"_short":q.rotationX||0,q.rotationX,"rotationX",v),j.rotationY=eb("rotationY"in u?u.rotationY:"shortRotationY"in u?u.shortRotationY+"_short":q.rotationY||0,q.rotationY,"rotationY",v)),j.skewX=null==u.skewX?q.skewX:eb(u.skewX,q.skewX),j.skewY=null==u.skewY?q.skewY:eb(u.skewY,q.skewY),(k=j.skewY-q.skewY)&&(j.skewX+=k,j.rotation+=k)}for(wb&&null!=u.force3D&&(q.force3D=u.force3D,o=!0),q.skewType=u.skewType||q.skewType||g.defaultSkewType,n=q.force3D||q.z||q.rotationX||q.rotationY||j.z||j.rotationX||j.rotationY||j.perspective,n||null==u.scale||(j.scaleZ=1);--t>-1;)c=sb[t],m=j[c]-q[c],(m>s||-s>m||null!=I[c])&&(o=!0,f=new mb(q,c,q[c],m,f),c in v&&(f.e=v[c]),f.xs0=0,f.plugin=h,d._overwriteProps.push(f.n));return m=u.transformOrigin,(m||wb&&n&&q.zOrigin)&&(tb?(o=!0,c=vb,m=(m||V(a,c,e,!1,"50% 50%"))+"",f=new mb(r,c,0,0,f,-1,"transformOrigin"),f.b=r[c],f.plugin=h,wb?(l=q.zOrigin,m=m.split(" "),q.zOrigin=(m.length>2&&(0===l||"0px"!==m[2])?parseFloat(m[2]):l)||0,f.xs0=f.e=r[c]=m[0]+" "+(m[1]||"50%")+" 0px",f=new mb(q,"zOrigin",0,0,f,-1,f.n),f.b=l,f.xs0=f.e=q.zOrigin):f.xs0=f.e=r[c]=m):bb(m+"",q)),o&&(d._transformType=n||3===this._transformType?3:2),f},prefix:!0}),qb("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),qb("borderRadius",{defaultValue:"0px",parser:function(a,b,c,f,g){b=this.format(b);var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],y=a.style;for(p=parseFloat(a.offsetWidth),q=parseFloat(a.offsetHeight),h=b.split(" "),i=0;i<x.length;i++)this.p.indexOf("border")&&(x[i]=T(x[i])),l=k=V(a,x[i],e,!1,"0px"),-1!==l.indexOf(" ")&&(k=l.split(" "),l=k[0],k=k[1]),m=j=h[i],n=parseFloat(l),s=l.substr((n+"").length),t="="===m.charAt(1),t?(o=parseInt(m.charAt(0)+"1",10),m=m.substr(2),o*=parseFloat(m),r=m.substr((o+"").length-(0>o?1:0))||""):(o=parseFloat(m),r=m.substr((o+"").length)),""===r&&(r=d[c]||s),r!==s&&(u=W(a,"borderLeft",n,s),v=W(a,"borderTop",n,s),"%"===r?(l=u/p*100+"%",k=v/q*100+"%"):"em"===r?(w=W(a,"borderLeft",1,"em"),l=u/w+"em",k=v/w+"em"):(l=u+"px",k=v+"px"),t&&(m=parseFloat(l)+o+r,j=parseFloat(k)+o+r)),g=nb(y,x[i],l+" "+k,m+" "+j,!1,"0px",g);return g},prefix:!0,formatter:jb("0px 0px 0px 0px",!1,!0)}),qb("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,c,d,f,g){var h,i,j,k,l,m,n="background-position",p=e||U(a,null),q=this.format((p?o?p.getPropertyValue(n+"-x")+" "+p.getPropertyValue(n+"-y"):p.getPropertyValue(n):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0"),r=this.format(b);if(-1!==q.indexOf("%")!=(-1!==r.indexOf("%"))&&(m=V(a,"backgroundImage").replace(A,""),m&&"none"!==m)){for(h=q.split(" "),i=r.split(" "),L.setAttribute("src",m),j=2;--j>-1;)q=h[j],k=-1!==q.indexOf("%"),k!==(-1!==i[j].indexOf("%"))&&(l=0===j?a.offsetWidth-L.width:a.offsetHeight-L.height,h[j]=k?parseFloat(q)/100*l+"px":parseFloat(q)/l*100+"%");q=h.join(" ")}return this.parseComplex(a.style,q,r,f,g)},formatter:bb}),qb("backgroundSize",{defaultValue:"0 0",formatter:bb}),qb("perspective",{defaultValue:"0px",prefix:!0}),qb("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),qb("transformStyle",{prefix:!0}),qb("backfaceVisibility",{prefix:!0}),qb("userSelect",{prefix:!0}),qb("margin",{parser:kb("marginTop,marginRight,marginBottom,marginLeft")}),qb("padding",{parser:kb("paddingTop,paddingRight,paddingBottom,paddingLeft")}),qb("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,c,d,f,g){var h,i,j;return 9>o?(i=a.currentStyle,j=8>o?" ":",",h="rect("+i.clipTop+j+i.clipRight+j+i.clipBottom+j+i.clipLeft+")",b=this.format(b).split(",").join(j)):(h=this.format(V(a,this.p,e,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,h,b,f,g)}}),qb("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),qb("autoRound,strictUnits",{parser:function(a,b,c,d,e){return e}}),qb("border",{defaultValue:"0px solid #000",parser:function(a,b,c,d,f,g){return this.parseComplex(a.style,this.format(V(a,"borderTopWidth",e,!1,"0px")+" "+V(a,"borderTopStyle",e,!1,"solid")+" "+V(a,"borderTopColor",e,!1,"#000")),this.format(b),f,g)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(ib)||["#000"])[0]}}),qb("borderWidth",{parser:kb("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),qb("float,cssFloat,styleFloat",{parser:function(a,b,c,d,e){var f=a.style,g="cssFloat"in f?"cssFloat":"styleFloat";return new mb(f,g,0,0,e,-1,c,!1,0,f[g],b)}});var Cb=function(a){var b,c=this.t,d=c.filter||V(this.data,"filter"),e=this.s+this.c*a|0;100===e&&(-1===d.indexOf("atrix(")&&-1===d.indexOf("radient(")&&-1===d.indexOf("oader(")?(c.removeAttribute("filter"),b=!V(this.data,"filter")):(c.filter=d.replace(w,""),b=!0)),b||(this.xn1&&(c.filter=d=d||"alpha(opacity="+e+")"),-1===d.indexOf("opacity")?0===e&&this.xn1||(c.filter=d+" alpha(opacity="+e+")"):c.filter=d.replace(u,"opacity="+e))};qb("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,c,d,f,g){var h=parseFloat(V(a,"opacity",e,!1,"1")),i=a.style,j="autoAlpha"===c;return"string"==typeof b&&"="===b.charAt(1)&&(b=("-"===b.charAt(0)?-1:1)*parseFloat(b.substr(2))+h),j&&1===h&&"hidden"===V(a,"visibility",e)&&0!==b&&(h=0),O?f=new mb(i,"opacity",h,b-h,f):(f=new mb(i,"opacity",100*h,100*(b-h),f),f.xn1=j?1:0,i.zoom=1,f.type=2,f.b="alpha(opacity="+f.s+")",f.e="alpha(opacity="+(f.s+f.c)+")",f.data=a,f.plugin=g,f.setRatio=Cb),j&&(f=new mb(i,"visibility",0,0,f,-1,null,!1,0,0!==h?"inherit":"hidden",0===b?"hidden":"inherit"),f.xs0="inherit",d._overwriteProps.push(f.n),d._overwriteProps.push(c)),f}});var Db=function(a,b){b&&(a.removeProperty?("ms"===b.substr(0,2)&&(b="M"+b.substr(1)),a.removeProperty(b.replace(y,"-$1").toLowerCase())):a.removeAttribute(b))},Eb=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.className=0===a?this.b:this.e;for(var b=this.data,c=this.t.style;b;)b.v?c[b.p]=b.v:Db(c,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.className!==this.e&&(this.t.className=this.e)};qb("className",{parser:function(a,b,d,f,g,h,i){var j,k,l,m,n,o=a.className,p=a.style.cssText;if(g=f._classNamePT=new mb(a,d,0,0,g,2),g.setRatio=Eb,g.pr=-11,c=!0,g.b=o,k=Y(a,e),l=a._gsClassPT){for(m={},n=l.data;n;)m[n.p]=1,n=n._next;l.setRatio(1)}return a._gsClassPT=g,g.e="="!==b.charAt(1)?b:o.replace(new RegExp("\\s*\\b"+b.substr(2)+"\\b"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),f._tween._duration&&(a.className=g.e,j=Z(a,k,Y(a),i,m),a.className=o,g.data=j.firstMPT,a.style.cssText=p,g=g.xfirst=f.parse(a,j.difs,g,h)),g}});var Fb=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var b,c,d,e,f=this.t.style,g=h.transform.parse;if("all"===this.e)f.cssText="",e=!0;else for(b=this.e.split(","),d=b.length;--d>-1;)c=b[d],h[c]&&(h[c].parse===g?e=!0:c="transformOrigin"===c?vb:h[c].p),Db(f,c);e&&(Db(f,tb),this.t._gsTransform&&delete this.t._gsTransform)}};for(qb("clearProps",{parser:function(a,b,d,e,f){return f=new mb(a,d,0,0,f,2),f.setRatio=Fb,f.e=b,f.pr=-10,f.data=e._tween,c=!0,f}}),i="bezier,throwProps,physicsProps,physics2D".split(","),ob=i.length;ob--;)rb(i[ob]);i=g.prototype,i._firstPT=null,i._onInitTween=function(a,b,h){if(!a.nodeType)return!1;this._target=a,this._tween=h,this._vars=b,j=b.autoRound,c=!1,d=b.suffixMap||g.suffixMap,e=U(a,""),f=this._overwriteProps;var i,m,o,p,q,r,s,t,u,w=a.style;if(k&&""===w.zIndex&&(i=V(a,"zIndex",e),("auto"===i||""===i)&&(w.zIndex=0)),"string"==typeof b&&(p=w.cssText,i=Y(a,e),w.cssText=p+";"+b,i=Z(a,i,Y(a)).difs,!O&&v.test(b)&&(i.opacity=parseFloat(RegExp.$1)),b=i,w.cssText=p),this._firstPT=m=this.parse(a,b,null),this._transformType){for(u=3===this._transformType,tb?l&&(k=!0,""===w.zIndex&&(s=V(a,"zIndex",e),("auto"===s||""===s)&&(w.zIndex=0)),n&&(w.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(u?"visible":"hidden"))):w.zoom=1,o=m;o&&o._next;)o=o._next;t=new mb(a,"transform",0,0,null,2),this._linkCSSP(t,null,o),t.setRatio=u&&wb?Ab:tb?Bb:zb,t.data=this._transform||yb(a,e,!0),f.pop()}if(c){for(;m;){for(r=m._next,o=p;o&&o.pr>m.pr;)o=o._next;(m._prev=o?o._prev:q)?m._prev._next=m:p=m,(m._next=o)?o._prev=m:q=m,m=r}this._firstPT=p}return!0},i.parse=function(a,b,c,f){var g,i,k,l,m,n,o,p,q,r,s=a.style;for(g in b)n=b[g],i=h[g],i?c=i.parse(a,n,g,this,c,f,b):(m=V(a,g,e)+"",q="string"==typeof n,"color"===g||"fill"===g||"stroke"===g||-1!==g.indexOf("Color")||q&&x.test(n)?(q||(n=hb(n),n=(n.length>3?"rgba(":"rgb(")+n.join(",")+")"),c=nb(s,g,m,n,!0,"transparent",c,0,f)):!q||-1===n.indexOf(" ")&&-1===n.indexOf(",")?(k=parseFloat(m),o=k||0===k?m.substr((k+"").length):"",(""===m||"auto"===m)&&("width"===g||"height"===g?(k=ab(a,g,e),o="px"):"left"===g||"top"===g?(k=X(a,g,e),o="px"):(k="opacity"!==g?0:1,o="")),r=q&&"="===n.charAt(1),r?(l=parseInt(n.charAt(0)+"1",10),n=n.substr(2),l*=parseFloat(n),p=n.replace(t,"")):(l=parseFloat(n),p=q?n.substr((l+"").length)||"":""),""===p&&(p=g in d?d[g]:o),n=l||0===l?(r?l+k:l)+p:b[g],o!==p&&""!==p&&(l||0===l)&&k&&(k=W(a,g,k,o),"%"===p?(k/=W(a,g,100,"%")/100,b.strictUnits!==!0&&(m=k+"%")):"em"===p?k/=W(a,g,1,"em"):"px"!==p&&(l=W(a,g,l,p),p="px"),r&&(l||0===l)&&(n=l+k+p)),r&&(l+=k),!k&&0!==k||!l&&0!==l?void 0!==s[g]&&(n||n+""!="NaN"&&null!=n)?(c=new mb(s,g,l||k||0,0,c,-1,g,!1,0,m,n),c.xs0="none"!==n||"display"!==g&&-1===g.indexOf("Style")?n:m):Q("invalid "+g+" tween value: "+b[g]):(c=new mb(s,g,k,l-k,c,0,g,j!==!1&&("px"===p||"zIndex"===g),0,m,n),c.xs0=p)):c=nb(s,g,m,n,!0,null,c,0,f)),f&&c&&!c.plugin&&(c.plugin=f);return c},i.setRatio=function(a){var b,c,d,e=this._firstPT,f=1e-6;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;e;){if(b=e.c*a+e.s,e.r?b=Math.round(b):f>b&&b>-f&&(b=0),e.type)if(1===e.type)if(d=e.l,2===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2;else if(3===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3;else if(4===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4;else if(5===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4+e.xn4+e.xs5;else{for(c=e.xs0+b+e.xs1,d=1;d<e.l;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}else-1===e.type?e.t[e.p]=e.xs0:e.setRatio&&e.setRatio(a);else e.t[e.p]=b+e.xs0;e=e._next}else for(;e;)2!==e.type?e.t[e.p]=e.b:e.setRatio(a),e=e._next;else for(;e;)2!==e.type?e.t[e.p]=e.e:e.setRatio(a),e=e._next},i._enableTransforms=function(a){this._transformType=a||3===this._transformType?3:2,this._transform=this._transform||yb(this._target,e,!0)},i._linkCSSP=function(a,b,c,d){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next,d=!0),c?c._next=a:d||null!==this._firstPT||(this._firstPT=a),a._next=b,a._prev=c),a},i._kill=function(b){var c,d,e,f=b;if(b.autoAlpha||b.alpha){f={};for(d in b)f[d]=b[d];f.opacity=1,f.autoAlpha&&(f.visibility=1)}return b.className&&(c=this._classNamePT)&&(e=c.xfirst,e&&e._prev?this._linkCSSP(e._prev,c._next,e._prev._prev):e===this._firstPT&&(this._firstPT=c._next),c._next&&this._linkCSSP(c._next,c._next._next,e._prev),this._classNamePT=null),a.prototype._kill.call(this,f)};var Gb=function(a,b,c){var d,e,f,g;if(a.slice)for(e=a.length;--e>-1;)Gb(a[e],b,c);else for(d=a.childNodes,e=d.length;--e>-1;)f=d[e],g=f.type,f.style&&(b.push(Y(f)),c&&c.push(f)),1!==g&&9!==g&&11!==g||!f.childNodes.length||Gb(f,b,c)};return g.cascadeTo=function(a,c,d){var e,f,g,h=b.to(a,c,d),i=[h],j=[],k=[],l=[],m=b._internals.reservedProps;for(a=h._targets||h.target,Gb(a,j,l),h.render(c,!0),Gb(a,k),h.render(0,!0),h._enabled(!0),e=l.length;--e>-1;)if(f=Z(l[e],j[e],k[e]),f.firstMPT){f=f.difs;for(g in d)m[g]&&(f[g]=d[g]);i.push(b.to(l[e],c,f))}return i},a.activate([g]),g},!0),function(){var a=window._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(a,b,c){return this._tween=c,!0}}),b=a.prototype;b._onInitAllProps=function(){for(var a,b,c,d=this._tween,e=d.vars.roundProps instanceof Array?d.vars.roundProps:d.vars.roundProps.split(","),f=e.length,g={},h=d._propLookup.roundProps;--f>-1;)g[e[f]]=1;for(f=e.length;--f>-1;)for(a=e[f],b=d._firstPT;b;)c=b._next,b.pg?b.t._roundProps(g,!0):b.n===a&&(this._add(b.t,a,b.s,b.c),c&&(c._prev=b._prev),b._prev?b._prev._next=c:d._firstPT===b&&(d._firstPT=c),b._next=b._prev=null,d._propLookup[a]=h),b=c;return!1},b._add=function(a,b,c,d){this._addTween(a,b,c,c+d,b,!0),this._overwriteProps.push(b)}}(),window._gsDefine.plugin({propName:"attr",API:2,version:"0.3.0",init:function(a,b,c){var d,e,f;if("function"!=typeof a.setAttribute)return!1;this._target=a,this._proxy={},this._start={},this._end={},this._endRatio=c.vars.runBackwards?0:1;for(d in b)this._start[d]=this._proxy[d]=e=a.getAttribute(d),this._end[d]=f=b[d],this._addTween(this._proxy,d,parseFloat(e),f,d),this._overwriteProps.push(d);return!0},set:function(a){this._super.setRatio.call(this,a);for(var b,c=this._overwriteProps,d=c.length,e=0!==a&&1!==a?this._proxy:a===this._endRatio?this._end:this._start;--d>-1;)b=c[d],this._target.setAttribute(b,e[b]+"")}}),window._gsDefine.plugin({propName:"directionalRotation",API:2,version:"0.2.0",init:function(a,b){"object"!=typeof b&&(b={rotation:b}),this.finals={};var c,d,e,f,g,h,i=b.useRadians===!0?2*Math.PI:360,j=1e-6;for(c in b)"useRadians"!==c&&(h=(b[c]+"").split("_"),d=h[0],e=parseFloat("function"!=typeof a[c]?a[c]:a[c.indexOf("set")||"function"!=typeof a["get"+c.substr(3)]?c:"get"+c.substr(3)]()),f=this.finals[c]="string"==typeof d&&"="===d.charAt(1)?e+parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)):Number(d)||0,g=f-e,h.length&&(d=h.join("_"),-1!==d.indexOf("short")&&(g%=i,g!==g%(i/2)&&(g=0>g?g+i:g-i)),-1!==d.indexOf("_cw")&&0>g?g=(g+9999999999*i)%i-(g/i|0)*i:-1!==d.indexOf("ccw")&&g>0&&(g=(g-9999999999*i)%i-(g/i|0)*i)),(g>j||-j>g)&&(this._addTween(a,c,e,e+g,c),this._overwriteProps.push(c)));return!0},set:function(a){var b;if(1!==a)this._super.setRatio.call(this,a);else for(b=this._firstPT;b;)b.f?b.t[b.p](this.finals[b.p]):b.t[b.p]=this.finals[b.p],b=b._next}})._autoCSS=!0,window._gsDefine("easing.Back",["easing.Ease"],function(a){var b,c,d,e=window.GreenSockGlobals||window,f=e.com.greensock,g=2*Math.PI,h=Math.PI/2,i=f._class,j=function(b,c){var d=i("easing."+b,function(){},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,d},k=a.register||function(){},l=function(a,b,c,d){var e=i("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return k(e,a),e},m=function(a,b,c){this.t=a,this.v=b,c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},n=function(b,c){var d=i("easing."+b,function(a){this._p1=a||0===a?a:1.70158,this._p2=1.525*this._p1},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,e.config=function(a){return new d(a)},d},o=l("Back",n("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),n("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),n("BackInOut",function(a){return(a*=2)<1?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),p=i("easing.SlowMo",function(a,b,c){b=b||0===b?b:.7,null==a?a=.7:a>1&&(a=1),this._p=1!==a?b:0,this._p1=(1-a)/2,this._p2=a,this._p3=this._p1+this._p2,this._calcEnd=c===!0},!0),q=p.prototype=new a;return q.constructor=p,q.getRatio=function(a){var b=a+(.5-a)*this._p;return a<this._p1?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},p.ease=new p(.7,.7),q.config=p.config=function(a,b,c){return new p(a,b,c)},b=i("easing.SteppedEase",function(a){a=a||1,this._p1=1/a,this._p2=a+1},!0),q=b.prototype=new a,q.constructor=b,q.getRatio=function(a){return 0>a?a=0:a>=1&&(a=.999999999),(this._p2*a>>0)*this._p1},q.config=b.config=function(a){return new b(a)},c=i("easing.RoughEase",function(b){b=b||{};for(var c,d,e,f,g,h,i=b.taper||"none",j=[],k=0,l=0|(b.points||20),n=l,o=b.randomize!==!1,p=b.clamp===!0,q=b.template instanceof a?b.template:null,r="number"==typeof b.strength?.4*b.strength:.4;--n>-1;)c=o?Math.random():1/l*n,d=q?q.getRatio(c):c,"none"===i?e=r:"out"===i?(f=1-c,e=f*f*r):"in"===i?e=c*c*r:.5>c?(f=2*c,e=f*f*.5*r):(f=2*(1-c),e=f*f*.5*r),o?d+=Math.random()*e-.5*e:n%2?d+=.5*e:d-=.5*e,p&&(d>1?d=1:0>d&&(d=0)),j[k++]={x:c,y:d};for(j.sort(function(a,b){return a.x-b.x}),h=new m(1,1,null),n=l;--n>-1;)g=j[n],h=new m(g.x,g.y,h);this._prev=new m(0,0,0!==h.t?h:h.next)},!0),q=c.prototype=new a,q.constructor=c,q.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&a<=b.t;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},q.config=function(a){return new c(a)},c.ease=new c,l("Bounce",j("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),j("BounceIn",function(a){return(a=1-a)<1/2.75?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),j("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),l("Circ",j("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),j("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),j("CircInOut",function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),d=function(b,c,d){var e=i("easing."+b,function(a,b){this._p1=a||1,this._p2=b||d,this._p3=this._p2/g*(Math.asin(1/this._p1)||0)},!0),f=e.prototype=new a;return f.constructor=e,f.getRatio=c,f.config=function(a,b){return new e(a,b)},e},l("Elastic",d("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*g/this._p2)+1},.3),d("ElasticIn",function(a){return-(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2))},.3),d("ElasticInOut",function(a){return(a*=2)<1?-.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2):this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*g/this._p2)*.5+1},.45)),l("Expo",j("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),j("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),j("ExpoInOut",function(a){return(a*=2)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),l("Sine",j("SineOut",function(a){return Math.sin(a*h)}),j("SineIn",function(a){return-Math.cos(a*h)+1}),j("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),i("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),k(e.SlowMo,"SlowMo","ease,"),k(c,"RoughEase","ease,"),k(b,"SteppedEase","ease,"),o},!0)}),function(a){"use strict";var b=a.GreenSockGlobals||a;if(!b.TweenLite){var c,d,e,f,g,h=function(a){var c,d=a.split("."),e=b;for(c=0;c<d.length;c++)e[d[c]]=e=e[d[c]]||{};return e},i=h("com.greensock"),j=1e-10,k=[].slice,l=function(){},m=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return null!=c&&(c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b)}}(),n={},o=function(c,d,e,f){this.sc=n[c]?n[c].sc:[],n[c]=this,this.gsClass=null,this.func=e;var g=[];this.check=function(i){for(var j,k,l,m,p=d.length,q=p;--p>-1;)(j=n[d[p]]||new o(d[p],[])).gsClass?(g[p]=j.gsClass,q--):i&&j.sc.push(this);if(0===q&&e)for(k=("com.greensock."+c).split("."),l=k.pop(),m=h(k.join("."))[l]=this.gsClass=e.apply(e,g),f&&(b[l]=m,"function"==typeof define&&define.amd?define((a.GreenSockAMDPath?a.GreenSockAMDPath+"/":"")+c.split(".").join("/"),[],function(){return m}):"undefined"!=typeof module&&module.exports&&(module.exports=m)),p=0;p<this.sc.length;p++)this.sc[p].check()
},this.check(!0)},p=a._gsDefine=function(a,b,c,d){return new o(a,b,c,d)},q=i._class=function(a,b,c){return b=b||function(){},p(a,[],function(){return b},c),b};p.globals=b;var r=[0,0,1,1],s=[],t=q("easing.Ease",function(a,b,c,d){this._func=a,this._type=c||0,this._power=d||0,this._params=b?r.concat(b):r},!0),u=t.map={},v=t.register=function(a,b,c,d){for(var e,f,g,h,j=b.split(","),k=j.length,l=(c||"easeIn,easeOut,easeInOut").split(",");--k>-1;)for(f=j[k],e=d?q("easing."+f,null,!0):i.easing[f]||{},g=l.length;--g>-1;)h=l[g],u[f+"."+h]=u[h+f]=e[h]=a.getRatio?a:a[h]||new a};for(e=t.prototype,e._calcEnd=!1,e.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:.5>a?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:.5>a?d/2:1-d/2},c=["Linear","Quad","Cubic","Quart","Quint,Strong"],d=c.length;--d>-1;)e=c[d]+",Power"+d,v(new t(null,null,1,d),e,"easeOut",!0),v(new t(null,null,2,d),e,"easeIn"+(0===d?",easeNone":"")),v(new t(null,null,3,d),e,"easeInOut");u.linear=i.easing.Linear.easeIn,u.swing=i.easing.Quad.easeInOut;var w=q("events.EventDispatcher",function(a){this._listeners={},this._eventTarget=a||this});e=w.prototype,e.addEventListener=function(a,b,c,d,e){e=e||0;var h,i,j=this._listeners[a],k=0;for(null==j&&(this._listeners[a]=j=[]),i=j.length;--i>-1;)h=j[i],h.c===b&&h.s===c?j.splice(i,1):0===k&&h.pr<e&&(k=i+1);j.splice(k,0,{c:b,s:c,up:d,pr:e}),this!==f||g||f.wake()},e.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;--c>-1;)if(d[c].c===b)return void d.splice(c,1)},e.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,c=this._eventTarget;--b>-1;)d=e[b],d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c)};var x=a.requestAnimationFrame,y=a.cancelAnimationFrame,z=Date.now||function(){return(new Date).getTime()},A=z();for(c=["ms","moz","webkit","o"],d=c.length;--d>-1&&!x;)x=a[c[d]+"RequestAnimationFrame"],y=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];q("Ticker",function(a,b){var c,d,e,h,i,j=this,k=z(),m=b!==!1&&x,n=function(a){A=z(),j.time=(A-k)/1e3;var b,f=j.time-i;(!c||f>0||a===!0)&&(j.frame++,i+=f+(f>=h?.004:h-f),b=!0),a!==!0&&(e=d(n)),b&&j.dispatchEvent("tick")};w.call(j),j.time=j.frame=0,j.tick=function(){n(!0)},j.sleep=function(){null!=e&&(m&&y?y(e):clearTimeout(e),d=l,e=null,j===f&&(g=!1))},j.wake=function(){null!==e&&j.sleep(),d=0===c?l:m&&x?x:function(a){return setTimeout(a,1e3*(i-j.time)+1|0)},j===f&&(g=!0),n(2)},j.fps=function(a){return arguments.length?(c=a,h=1/(c||60),i=this.time+h,void j.wake()):c},j.useRAF=function(a){return arguments.length?(j.sleep(),m=a,void j.fps(c)):m},j.fps(a),setTimeout(function(){m&&(!e||j.frame<5)&&j.useRAF(!1)},1500)}),e=i.Ticker.prototype=new i.events.EventDispatcher,e.constructor=i.Ticker;var B=q("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=b.immediateRender===!0,this.data=b.data,this._reversed=b.reversed===!0,O){g||f.wake();var c=this.vars.useFrames?N:O;c.add(this,c._time),this.vars.paused&&this.paused(!0)}});f=B.ticker=new i.Ticker,e=B.prototype,e._dirty=e._gc=e._initted=e._paused=!1,e._totalTime=e._time=0,e._rawPrevTime=-1,e._next=e._last=e._onUpdate=e._timeline=e.timeline=null,e._paused=!1;var C=function(){g&&z()-A>2e3&&f.wake(),setTimeout(C,2e3)};C(),e.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)},e.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)},e.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)},e.seek=function(a,b){return this.totalTime(Number(a),b!==!1)},e.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,b!==!1,!0)},e.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)},e.render=function(){},e.invalidate=function(){return this},e.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime())>=c&&a<c+this.totalDuration()/this._timeScale},e._enabled=function(a,b){return g||f.wake(),this._gc=!a,this._active=this.isActive(),b!==!0&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1},e._kill=function(){return this._enabled(!1,!1)},e.kill=function(a,b){return this._kill(a,b),this},e._uncache=function(a){for(var b=a?this:this.timeline;b;)b._dirty=!0,b=b.timeline;return this},e._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();--b>-1;)"{self}"===a[b]&&(c[b]=this);return c},e.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:(e[a]=b,e[a+"Params"]=m(c)&&-1!==c.join("").indexOf("{self}")?this._swapSelfInParams(c):c,e[a+"Scope"]=d),"onUpdate"===a&&(this._onUpdate=b)}return this},e.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay},e.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==a&&this.totalTime(this._totalTime*(a/this._duration),!0),this):(this._dirty=!1,this._duration)},e.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration},e.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time},e.totalTime=function(a,b,c){if(g||f.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==a||0===this._duration)&&this.render(a,b,!1)}return this},e.progress=e.totalProgress=function(a,b){return arguments.length?this.totalTime(this.duration()*a,b):this._time/this.duration()},e.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime},e.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||j,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,c=b||0===b?b:this._timeline.totalTime();this._startTime=c-(c-this._startTime)*this._timeScale/a}return this._timeScale=a,this._uncache(!1)},e.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},e.paused=function(a){if(!arguments.length)return this._paused;if(a!=this._paused&&this._timeline){g||a||f.wake();var b=this._timeline,c=b.rawTime(),d=c-this._pauseTime;!a&&b.smoothChildTiming&&(this._startTime+=d,this._uncache(!1)),this._pauseTime=a?c:null,this._paused=a,this._active=this.isActive(),!a&&0!==d&&this._initted&&this.duration()&&this.render(b.smoothChildTiming?this._totalTime:(c-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!a&&this._enabled(!0,!1),this};var D=q("core.SimpleTimeline",function(a){B.call(this,0,a),this.autoRemoveChildren=this.smoothChildTiming=!0});e=D.prototype=new B,e.constructor=D,e.kill()._gc=!1,e._first=e._last=null,e._sortChildren=!1,e.add=e.insert=function(a,b){var c,d;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),c=this._last,this._sortChildren)for(d=a._startTime;c&&c._startTime>d;)c=c._prev;return c?(a._next=c._next,c._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=c,this._timeline&&this._uncache(!0),this},e._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a.timeline=null,a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),this._timeline&&this._uncache(!0)),this},e.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*e._timeScale,b,c)),e=d},e.rawTime=function(){return g||f.wake(),this._totalTime};var E=q("TweenLite",function(b,c,d){if(B.call(this,c,d),this.render=E.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:E.selector(b)||b;var e,f,g,h=b.jquery||b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType),i=this.vars.overwrite;if(this._overwrite=i=null==i?M[E.defaultOverwrite]:"number"==typeof i?i>>0:M[i],(h||b instanceof Array||b.push&&m(b))&&"number"!=typeof b[0])for(this._targets=g=k.call(b,0),this._propLookup=[],this._siblings=[],e=0;e<g.length;e++)f=g[e],f?"string"!=typeof f?f.length&&f!==a&&f[0]&&(f[0]===a||f[0].nodeType&&f[0].style&&!f.nodeType)?(g.splice(e--,1),this._targets=g=g.concat(k.call(f,0))):(this._siblings[e]=P(f,this,!1),1===i&&this._siblings[e].length>1&&Q(f,this,null,1,this._siblings[e])):(f=g[e--]=E.selector(f),"string"==typeof f&&g.splice(e+1,1)):g.splice(e--,1);else this._propLookup={},this._siblings=P(b,this,!1),1===i&&this._siblings.length>1&&Q(b,this,null,1,this._siblings);(this.vars.immediateRender||0===c&&0===this._delay&&this.vars.immediateRender!==!1)&&this.render(-this._delay,!1,!0)},!0),F=function(b){return b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType)},G=function(a,b){var c,d={};for(c in a)L[c]||c in b&&"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c&&"className"!==c&&"border"!==c||!(!I[c]||I[c]&&I[c]._autoCSS)||(d[c]=a[c],delete a[c]);a.css=d};e=E.prototype=new B,e.constructor=E,e.kill()._gc=!1,e.ratio=0,e._firstPT=e._targets=e._overwrittenProps=e._startAt=null,e._notifyPluginsOfEnabled=!1,E.version="1.11.8",E.defaultEase=e._ease=new t(null,null,1,1),E.defaultOverwrite="auto",E.ticker=f,E.autoSleep=!0,E.selector=a.$||a.jQuery||function(b){return a.$?(E.selector=a.$,a.$(b)):a.document?a.document.getElementById("#"===b.charAt(0)?b.substr(1):b):b};var H=E._internals={isArray:m,isSelector:F},I=E._plugins={},J=E._tweenLookup={},K=0,L=H.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},M={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},N=B._rootFramesTimeline=new D,O=B._rootTimeline=new D;O._startTime=f.time,N._startTime=f.frame,O._active=N._active=!0,B._updateRoot=function(){if(O.render((f.time-O._startTime)*O._timeScale,!1,!1),N.render((f.frame-N._startTime)*N._timeScale,!1,!1),!(f.frame%120)){var a,b,c;for(c in J){for(b=J[c].tweens,a=b.length;--a>-1;)b[a]._gc&&b.splice(a,1);0===b.length&&delete J[c]}if(c=O._first,(!c||c._paused)&&E.autoSleep&&!N._first&&1===f._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||f.sleep()}}},f.addEventListener("tick",B._updateRoot);var P=function(a,b,c){var d,e,f=a._gsTweenID;if(J[f||(a._gsTweenID=f="t"+K++)]||(J[f]={target:a,tweens:[]}),b&&(d=J[f].tweens,d[e=d.length]=b,c))for(;--e>-1;)d[e]===b&&d.splice(e,1);return J[f].tweens},Q=function(a,b,c,d,e){var f,g,h,i;if(1===d||d>=4){for(i=e.length,f=0;i>f;f++)if((h=e[f])!==b)h._gc||h._enabled(!1,!1)&&(g=!0);else if(5===d)break;return g}var k,l=b._startTime+j,m=[],n=0,o=0===b._duration;for(f=e.length;--f>-1;)(h=e[f])===b||h._gc||h._paused||(h._timeline!==b._timeline?(k=k||R(b,0,o),0===R(h,k,o)&&(m[n++]=h)):h._startTime<=l&&h._startTime+h.totalDuration()/h._timeScale>l&&((o||!h._initted)&&l-h._startTime<=2e-10||(m[n++]=h)));for(f=n;--f>-1;)h=m[f],2===d&&h._kill(c,a)&&(g=!0),(2!==d||!h._firstPT&&h._initted)&&h._enabled(!1,!1)&&(g=!0);return g},R=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&2*j>f-b?j:(f+=a.totalDuration()/a._timeScale/e)>b+j?0:f-b-j};e._init=function(){var a,b,c,d,e=this.vars,f=this._overwrittenProps,g=this._duration,h=e.immediateRender,i=e.ease;if(e.startAt){if(this._startAt&&this._startAt.render(-1,!0),e.startAt.overwrite=0,e.startAt.immediateRender=!0,this._startAt=E.to(this.target,0,e.startAt),h)if(this._time>0)this._startAt=null;else if(0!==g)return}else if(e.runBackwards&&0!==g)if(this._startAt)this._startAt.render(-1,!0),this._startAt=null;else{c={};for(d in e)L[d]&&"autoCSS"!==d||(c[d]=e[d]);if(c.overwrite=0,c.data="isFromStart",this._startAt=E.to(this.target,0,c),e.immediateRender){if(0===this._time)return}else this._startAt.render(-1,!0)}if(this._ease=i?i instanceof t?e.easeParams instanceof Array?i.config.apply(i,e.easeParams):i:"function"==typeof i?new t(i,e.easeParams):u[i]||E.defaultEase:E.defaultEase,this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length;--a>-1;)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],f?f[a]:null)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,f);if(b&&E._onPluginEvent("_onInitAllProps",this),f&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),e.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=e.onUpdate,this._initted=!0},e._initProps=function(b,c,d,e){var f,g,h,i,j,k;if(null==b)return!1;this.vars.css||b.style&&b!==a&&b.nodeType&&I.css&&this.vars.autoCSS!==!1&&G(this.vars,b);for(f in this.vars){if(k=this.vars[f],L[f])k&&(k instanceof Array||k.push&&m(k))&&-1!==k.join("").indexOf("{self}")&&(this.vars[f]=k=this._swapSelfInParams(k,this));else if(I[f]&&(i=new I[f])._onInitTween(b,this.vars[f],this)){for(this._firstPT=j={_next:this._firstPT,t:i,p:"setRatio",s:0,c:1,f:!0,n:f,pg:!0,pr:i._priority},g=i._overwriteProps.length;--g>-1;)c[i._overwriteProps[g]]=this._firstPT;(i._priority||i._onInitAllProps)&&(h=!0),(i._onDisable||i._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=c[f]=j={_next:this._firstPT,t:b,p:f,f:"function"==typeof b[f],n:f,pg:!1,pr:0},j.s=j.f?b[f.indexOf("set")||"function"!=typeof b["get"+f.substr(3)]?f:"get"+f.substr(3)]():parseFloat(b[f]),j.c="string"==typeof k&&"="===k.charAt(1)?parseInt(k.charAt(0)+"1",10)*Number(k.substr(2)):Number(k)-j.s||0;j&&j._next&&(j._next._prev=j)}return e&&this._kill(e,b)?this._initProps(b,c,d,e):this._overwrite>1&&this._firstPT&&d.length>1&&Q(b,this,c,this._overwrite,d)?(this._kill(c,b),this._initProps(b,c,d,e)):h},e.render=function(a,b,c){var d,e,f,g,h=this._time,i=this._duration;if(a>=i)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete"),0===i&&(g=this._rawPrevTime,this._startTime===this._timeline._duration&&(a=0),(0===a||0>g||g===j)&&g!==a&&(c=!0,g>j&&(e="onReverseComplete")),this._rawPrevTime=g=!b||a||this._rawPrevTime===a?a:j);else if(1e-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==h||0===i&&this._rawPrevTime>0&&this._rawPrevTime!==j)&&(e="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0===i&&(this._rawPrevTime>=0&&(c=!0),this._rawPrevTime=g=!b||a||this._rawPrevTime===a?a:j)):this._initted||(c=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/i,l=this._easeType,m=this._easePower;(1===l||3===l&&k>=.5)&&(k=1-k),3===l&&(k*=2),1===m?k*=k:2===m?k*=k*k:3===m?k*=k*k*k:4===m&&(k*=k*k*k*k),this.ratio=1===l?1-k:2===l?k:.5>a/i?k/2:1-k/2}else this.ratio=this._ease.getRatio(a/i);if(this._time!==h||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!d?this.ratio=this._ease.getRatio(this._time/i):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==h&&a>=0&&(this._active=!0),0===h&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._time||0===i)&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||s))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||(this._time!==h||d)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s)),e&&(this._gc||(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||s),0===i&&this._rawPrevTime===j&&g!==j&&(this._rawPrevTime=0)))}},e._kill=function(a,b){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:E.selector(b)||b;var c,d,e,f,g,h,i,j;if((m(b)||F(b))&&"number"!=typeof b[0])for(c=b.length;--c>-1;)this._kill(a,b[c])&&(h=!0);else{if(this._targets){for(c=this._targets.length;--c>-1;)if(b===this._targets[c]){g=this._propLookup[c]||{},this._overwrittenProps=this._overwrittenProps||[],d=this._overwrittenProps[c]=a?this._overwrittenProps[c]||{}:"all";break}}else{if(b!==this.target)return!1;g=this._propLookup,d=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(g){i=a||g,j=a!==d&&"all"!==d&&a!==g&&("object"!=typeof a||!a._tempKill);for(e in i)(f=g[e])&&(f.pg&&f.t._kill(i)&&(h=!0),f.pg&&0!==f.t._overwriteProps.length||(f._prev?f._prev._next=f._next:f===this._firstPT&&(this._firstPT=f._next),f._next&&(f._next._prev=f._prev),f._next=f._prev=null),delete g[e]),j&&(d[e]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},e.invalidate=function(){return this._notifyPluginsOfEnabled&&E._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=!1,this._propLookup=this._targets?{}:[],this},e._enabled=function(a,b){if(g||f.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;--c>-1;)this._siblings[c]=P(d[c],this,!0);else this._siblings=P(this.target,this,!0)}return B.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?E._onPluginEvent(a?"_onEnable":"_onDisable",this):!1},E.to=function(a,b,c){return new E(a,b,c)},E.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new E(a,b,c)},E.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new E(a,b,d)},E.delayedCall=function(a,b,c,d,e){return new E(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:e,overwrite:0})},E.set=function(a,b){return new E(a,0,b)},E.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:E.selector(a)||a;var c,d,e,f;if((m(a)||F(a))&&"number"!=typeof a[0]){for(c=a.length,d=[];--c>-1;)d=d.concat(E.getTweensOf(a[c],b));for(c=d.length;--c>-1;)for(f=d[c],e=c;--e>-1;)f===d[e]&&d.splice(c,1)}else for(d=P(a).concat(),c=d.length;--c>-1;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d},E.killTweensOf=E.killDelayedCallsTo=function(a,b,c){"object"==typeof b&&(c=b,b=!1);for(var d=E.getTweensOf(a,b),e=d.length;--e>-1;)d[e]._kill(c,a)};var S=q("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(","),this._propName=this._overwriteProps[0],this._priority=b||0,this._super=S.prototype},!0);if(e=S.prototype,S.version="1.10.1",S.API=2,e._firstPT=null,e._addTween=function(a,b,c,d,e,f){var g,h;return null!=d&&(g="number"==typeof d||"="!==d.charAt(1)?Number(d)-c:parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)))?(this._firstPT=h={_next:this._firstPT,t:a,p:b,s:c,c:g,f:"function"==typeof a[b],n:e||b,r:f},h._next&&(h._next._prev=h),h):void 0},e.setRatio=function(a){for(var b,c=this._firstPT,d=1e-6;c;)b=c.c*a+c.s,c.r?b=Math.round(b):d>b&&b>-d&&(b=0),c.f?c.t[c.p](b):c.t[c.p]=b,c=c._next},e._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;--b>-1;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},e._roundProps=function(a,b){for(var c=this._firstPT;c;)(a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")])&&(c.r=b),c=c._next},E._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){for(g=h._next,d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h,(h._next=d)?d._prev=h:f=h,h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=h._next;return c},S.activate=function(a){for(var b=a.length;--b>-1;)a[b].API===S.API&&(I[(new a[b])._propName]=a[b]);return!0},p.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},g=q("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){S.call(this,c,d),this._overwriteProps=e||[]},a.global===!0),h=g.prototype=new S(c);h.constructor=g,g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,S.activate([g]),g},c=a._gsQueue){for(d=0;d<c.length;d++)c[d]();for(e in n)n[e].func||a.console.log("GSAP encountered missing dependency: com.greensock."+e)}g=!1}}(window),(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("easing.Back",["easing.Ease"],function(a){var b,c,d,e=window.GreenSockGlobals||window,f=e.com.greensock,g=2*Math.PI,h=Math.PI/2,i=f._class,j=function(b,c){var d=i("easing."+b,function(){},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,d},k=a.register||function(){},l=function(a,b,c,d){var e=i("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return k(e,a),e},m=function(a,b,c){this.t=a,this.v=b,c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},n=function(b,c){var d=i("easing."+b,function(a){this._p1=a||0===a?a:1.70158,this._p2=1.525*this._p1},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,e.config=function(a){return new d(a)},d},o=l("Back",n("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),n("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),n("BackInOut",function(a){return(a*=2)<1?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),p=i("easing.SlowMo",function(a,b,c){b=b||0===b?b:.7,null==a?a=.7:a>1&&(a=1),this._p=1!==a?b:0,this._p1=(1-a)/2,this._p2=a,this._p3=this._p1+this._p2,this._calcEnd=c===!0},!0),q=p.prototype=new a;return q.constructor=p,q.getRatio=function(a){var b=a+(.5-a)*this._p;return a<this._p1?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},p.ease=new p(.7,.7),q.config=p.config=function(a,b,c){return new p(a,b,c)},b=i("easing.SteppedEase",function(a){a=a||1,this._p1=1/a,this._p2=a+1},!0),q=b.prototype=new a,q.constructor=b,q.getRatio=function(a){return 0>a?a=0:a>=1&&(a=.999999999),(this._p2*a>>0)*this._p1},q.config=b.config=function(a){return new b(a)},c=i("easing.RoughEase",function(b){b=b||{};for(var c,d,e,f,g,h,i=b.taper||"none",j=[],k=0,l=0|(b.points||20),n=l,o=b.randomize!==!1,p=b.clamp===!0,q=b.template instanceof a?b.template:null,r="number"==typeof b.strength?.4*b.strength:.4;--n>-1;)c=o?Math.random():1/l*n,d=q?q.getRatio(c):c,"none"===i?e=r:"out"===i?(f=1-c,e=f*f*r):"in"===i?e=c*c*r:.5>c?(f=2*c,e=f*f*.5*r):(f=2*(1-c),e=f*f*.5*r),o?d+=Math.random()*e-.5*e:n%2?d+=.5*e:d-=.5*e,p&&(d>1?d=1:0>d&&(d=0)),j[k++]={x:c,y:d};for(j.sort(function(a,b){return a.x-b.x}),h=new m(1,1,null),n=l;--n>-1;)g=j[n],h=new m(g.x,g.y,h);this._prev=new m(0,0,0!==h.t?h:h.next)},!0),q=c.prototype=new a,q.constructor=c,q.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&a<=b.t;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},q.config=function(a){return new c(a)},c.ease=new c,l("Bounce",j("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),j("BounceIn",function(a){return(a=1-a)<1/2.75?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),j("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),l("Circ",j("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),j("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),j("CircInOut",function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),d=function(b,c,d){var e=i("easing."+b,function(a,b){this._p1=a||1,this._p2=b||d,this._p3=this._p2/g*(Math.asin(1/this._p1)||0)},!0),f=e.prototype=new a;return f.constructor=e,f.getRatio=c,f.config=function(a,b){return new e(a,b)},e},l("Elastic",d("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*g/this._p2)+1},.3),d("ElasticIn",function(a){return-(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2))},.3),d("ElasticInOut",function(a){return(a*=2)<1?-.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2):this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*g/this._p2)*.5+1},.45)),l("Expo",j("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),j("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),j("ExpoInOut",function(a){return(a*=2)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),l("Sine",j("SineOut",function(a){return Math.sin(a*h)}),j("SineIn",function(a){return-Math.cos(a*h)+1}),j("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),i("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),k(e.SlowMo,"SlowMo","ease,"),k(c,"RoughEase","ease,"),k(b,"SteppedEase","ease,"),o},!0)}),window._gsDefine&&window._gsQueue.pop()(),devgru.module.create("game",["devgru","devgru/game","devgru/math/dimension","devgru/loader","devgru/director","module/game/apimanager","devgru/math/vector","screen/preloader"],function(a,b,c,d,e,f,g,h){"use strict";var i=a.sugar;return function(){var a={},d={ufoTractorBeam:"sprites/game/challenges/ufo-tractorbeam.png",preLoaderUfo:"sprites/gui/preload-ufo.png",preLoaderBackground:"sprites/gui/preloader-bg.png",preLoaderChicken:"sprites/gui/preload-chicken.png"},g=function(){b.setup({canvas:{id:"canvas",dimension:c(640,960)},develop:{debug:!1},sort:!0,sortType:b.SORT_TYPE_STABLE,doubleBuffering:!1,asset:{path:"assets/",image:d,remoteImage:a}},function(){e.addScreen(h()),e.showScreen("Preloader")})};i.isDefined(window.GameAPI)?window.GameAPI.loadAPI(function(b){var c=b.Branding.getLogo().image;f.setAPI(b),c&&(a.brandingLogo=c),g()}):g()}}),devgru.module.create("module/game/apimanager",["devgru","devgru/game"],function(a,b){"use strict";var c=null,d=a.sugar,e=function(){var a=null!==c&&!d.isDefined(c.Branding.getLink("more_games").error)&&!d.isDefined(c.Branding.getLogo().error);return a};return{isAvailable:e,setAPI:function(a){c=a},getAPI:function(){return c},openMoreGames:function(){e()&&c.Branding.getLink("more_games").action()},openBrandLink:function(){e()&&c.Branding.getLogo().action()},requestGameBreak:function(a,f){e()&&c.GameBreak.request(function(){b.pause(),d.isFunction(a)&&a()},function(){b.resume()}),d.isFunction(f)&&f()},showSplashScreen:function(){return null!==c?c.Branding.getSplashScreen().show:!1},openSplashLink:function(){if(null!==c){var a=c.Branding.getSplashScreen();a.show&&a.action()}}}}),devgru.module.create("module/game/audiomanager",["devgru","devgru/loader"],function(a,b){var c,d,e,f=a.sugar,g=!1,h=!1,i=!1,j=!1,k=(document.getElementById("canvas"),""),l=function(a){a?(d=g,e=h,n.muteMusic(!0),n.muteSound(!0)):(g=d,h=e,n.playMusic(k,j))},m=function(a,b){var d,e,g;if(f.isDefined(c))for(f.isDefined(b)&&c.loop(b),c.play(a),d=0,e=c._audioNode.length;e>d;++d)if(g=c._audioNode[d],g._sprite===a){g.timerID=c._onendTimer[c._onendTimer.length-1];break}},n={init:function(a,d){i=a,a&&(c=b.getAsset(d))},setVolume:function(a){var b,d,e;if(f.isDefined(c))for(b=0,d=c._audioNode.length;d>b;++b)e=c._audioNode[b],e.paused||c.volume(a,e.id)},playSound:function(a,c){g||(i?m(a,f.isDefined(c)?c:!1):b.getAudio(a).play())},stopSound:function(a){var d,e,g;if(i){if(!f.isDefined(c))return;for(d=0,e=c._audioNode.length;e>d;++d)g=c._audioNode[d],g._sprite!==a||g.paused||c.stop(g.id,g.timerID)}else b.getAudio(a).stop()},playMusic:function(a,c){k=a,j=f.isDefined(c)?c:!1,h||""===k||(i?m(a,f.isDefined(c)?c:j):(b.getAudio(a).loop(j),b.getAudio(a).play()))},stopMusic:function(a){var d,e,g;if(i){if(!f.isDefined(c))return;for(d=0,e=c._audioNode.length;e>d;++d)g=c._audioNode[d],g._sprite!==a||g.paused||c.stop(g.id,g.timerID)}else b.getAudio(a).stop()},muteSound:function(a){g=a,g&&this.stopAllSound()},muteMusic:function(a,b){h=a,f.isDefined(b)||(b=!1),h?n.stopAllMusic():b&&""!==k&&n.playMusic(k)},stopAllSound:function(){if(i){var a,d,e;if(!f.isDefined(c))return;for(a=0,d=c._audioNode.length;d>a;++a)e=c._audioNode[a],e._sprite&&"sfx"===e._sprite.substring(0,3)&&!e.paused&&c.stop(e.id,e.timerID)}else{var g,h=b.getAssets().audio;for(g in h)h.hasOwnProperty(g)&&"sfx"===g.substring(0,3)&&h[g].stop()}},stopAllMusic:function(){if(i){var a,d,e;if(!f.isDefined(c))return;for(a=0,d=c._audioNode.length;d>a;++a)e=c._audioNode[a],e._sprite&&"music"===e._sprite.substring(0,5)&&!e.paused&&c.stop(e.id,e.timerID)}else{var g,h=b.getAssets().audio;for(g in h)h.hasOwnProperty(g)&&"music"===g.substring(0,5)&&h[g].stop()}}};return"hidden"in document?document.addEventListener("visibilitychange",function(){l(document.hidden)},!1):"mozHidden"in document?document.addEventListener("mozvisibilitychange",function(){l(document.mozHidden)},!1):"webkitHidden"in document?document.addEventListener("webkitvisibilitychange",function(){l(document.webkitHidden)},!1):"msHidden"in document?document.addEventListener("msvisibilitychange",function(){l(document.msHidden)},!1):"onpagehide"in window?(window.addEventListener("pagehide",function(){l(!0)},!1),window.addEventListener("pageshow",function(){l(!1)},!1)):"onblur"in document?(window.addEventListener("blur",function(){l(!0)},!1),window.addEventListener("focus",function(){l(!1)},!1),visHandled=!0):"onfocusout"in document&&(window.addEventListener("focusout",function(){l(!0)},!1),window.addEventListener("focusin",function(){l(!1)},!1)),n}),devgru.module.create("module/game/challenges/alienoverlay",["utils","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/event/system","devgru/component/spritable","devgru/component/fadable"],function(a,b,c,d,e,f,g,h,i){var j,k,l=a.constants,m=!1,n=function(a,b){return j=d(h,i).add({init:function(){this.spritable.setup({image:c.getAsset("alienOverlay"),position:a.position||e(0,0)}),this.z=l.layers.ALIEN_OVERLAY,this.fadable.setFadeSpeed(1),this.fadable.fadeIn(b),this.setName("alienOverlay")
}})},o=function(a){k.getGrid().iterate(function(b,c,d){null!==d&&d.animatable.setAnimation(a===!0?"terrified":"stand")})},p=function(a){b.add(n({position:e(0,0)},function(){o(!0),g.fire("status.challenges.alienoverlay.showed",a)})),k.unselect()},q=function(){var a=b.get("alienOverlay");o(!1),a.fadable.fadeOut(function(){b.remove(a)})},r={init:function(a){k=a,m||(g.on("command.challenges.alienoverlay.show",p),g.on("command.challenges.alienoverlay.hide",q),m=!0)},destroy:function(){g.off("command.challenges.alienoverlay.show",p),g.off("command.challenges.alienoverlay.hide",q)}};return r}),devgru.module.create("module/game/challenges/mutation",["utils","devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/event/system","devgru/component/spritable","devgru/component/fadable","devgru/component/scalable","object/game/mutatedanimal","module/game/savestatemanager","module/gui/speechbubble"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q,r=a.constants,s=b.sugar,t=!1,u=[],v=function(a,b){var d=c.getScroll(),f=b,g=e().add({timer:0,destroy:function(){d.x=0,d.y=0},update:function(e){this.timer>=0&&(this.timer+=e.deltaT),this.timer<a&&(f=b-b*(this.timer/a),d.x=s.getRandom(-f,f),d.y=s.getRandom(-f,f)),this.timer>=1&&c.remove(g)}});c.add(g)},w=function(b){var g=function(a,b,c,d){var e=o.getPosition(),f=TweenMax.to(e,d||2,{bezier:[{x:e.x+200,y:e.y+200},{x:a.x,y:a.y}],ease:c||Power1.easeOut,onComplete:function(){s.removeObject(u,f),o.setPosition(a),b&&b()}});u.push(f)},h=function(b,d){var e=function(d){var e=p.scalable.getScale(),f=function(a){p.fadable.setAlpha(1),c.remove(b,function(){var d=l();d.setup(),d.setPosition(b.getPosition()),d.fadable.setFadeSpeed(2),q.setGridPosition(d),c.add(d,function(){a()})})},g=function(a){var b=TweenLite.to(e,1,{y:1,ease:Power2.easeOut,onComplete:function(){s.removeObject(u,b),a&&a()}});u.push(b),p.fadable.setFadeSpeed(1.5),p.fadable.fadeOut()};a.audio.playSound("sfx_mutate"),v(.5,10),f(function(){g(d)})};e(function(){c.remove(p),d&&d()})},m=function(){return p=e(i,k,j).add({init:function(){var a;this.spritable.setup({image:d.getAsset("ufoSparkBeam"),position:o.getPosition()}),a=this.getDimension(),this.setOrigin(f(a.width/2,0)),this.fadable.setAlpha(0),this.z=r.layers.UFO_BEAM,this.setName("sparkBeam")}})},n=function(){var b=(c.canvas.getDimension(),o.scalable.getScale());c.add(m(),function(){q.getRandomTile(function(c){var d=c.getPosition(),e=f(-200,p.getDimension().height-75),i=d.clone().substract(e);p.setPosition(f(i.x-160,i.y+10)),c.getPosition().x>320&&(e=f(200,p.getDimension().height-75),i=d.clone().substract(e),p.scalable.setScale(f(-1,1)),p.getPosition().x-=74),g(i,function(){h(c,function(){var c=TweenLite.to(b,1.5,{x:2,y:2,ease:Power1.easeIn,onComplete:function(){s.removeObject(u,c)}});u.push(c),a.audio.playSound("sfx_ufoflyaway"),g(f(56,1088),function(){z()},Power1.easeIn,1.5)})},Power1.easeOut)})})};return o=e(i,j,k).add({init:function(){var a;this.spritable.setup({image:d.getAsset("ufo"),position:b.position||f(0,0)}),a=this.getDimension(),this.setOrigin(f(a.width/2,a.height/2)),this.z=r.layers.UFO,this.scalable.setSpeed(80),this.fadable.fadeIn(),this.setName("ufo"),n()}})},x=function(){m.load("shownMutationTutorial",!1)||(speechBubble1=n({string:"What are they up to now?",flipped:!1,lifeTime:3}),speechBubble1.setPosition(f(80,800)),c.add(speechBubble1),TweenLite.to({},3,{onComplete:function(){speechBubble2=n({string:"Oh no!",flipped:!0,lifeTime:4}),speechBubble2.setPosition(f(560,800)),c.add(speechBubble2)}}),TweenLite.to({},7,{onComplete:function(){speechBubble3=n({string:"What is that...? It’s getting in the way, how will I get my animals to the barn now?",flipped:!1,lifeTime:4}),speechBubble3.setPosition(f(80,800)),c.add(speechBubble3),m.save("shownMutationTutorial",!0)}}))},y=function(){a.state.powerups.eds===!0?h.fire("command.powerups.eds.crashufo"):(h.fire("command.tilegrid.activate",!1),h.fire("command.challenges.alienoverlay.show","mutation"),a.audio.stopAllMusic(),a.audio.playMusic("music_alien",!0),x())},z=function(){h.fire("command.challenges.alienoverlay.hide"),c.remove(o,function(){h.fire("command.tilegrid.activate",!0),q.checkContinue(),a.audio.stopAllMusic(),a.audio.playMusic("music_level",!0)})},A=function(a){"mutation"===a&&c.add(w({position:f(-56,0)}))},B=function(){a.killTweens(u)},C={init:function(a){q=a,t||(h.on("command.challenges.mutation.show",y),h.on("command.challenges.mutation.hide",z),h.on("status.challenges.alienoverlay.showed",A),h.on("command.tweens.kill",B),t=!0)},destroy:function(){h.off("command.challenges.mutation.show",y),h.off("command.challenges.mutation.hide",z),h.off("status.challenges.alienoverlay.showed",A),h.off("command.tweens.kill",B)}};return C}),devgru.module.create("module/game/challenges/randomabduction",["utils","devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/event/system","devgru/component/spritable","devgru/component/fadable","devgru/component/scalable","object/gui/targetindicator","module/game/savestatemanager","module/gui/speechbubble"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q,r=a.constants,s=b.sugar,t=!1,u=[],v=!1,w=function(b){var g=function(a,b,c,d,e){var f=o.getPosition(),g=TweenMax.to(f,d||2,{bezier:e||[{x:f.x+200,y:f.y+200},{x:a.x,y:a.y}],ease:c||Power1.easeOut,onComplete:function(){o.setPosition(a),b&&b(),s.removeObject(u,g)}});u.push(g)},h=function(b,d){var e=function(d){var e=p.scalable.getScale(),g=function(d){var g=TweenLite.to(e,1,{x:1,ease:Power3.easeOut,onComplete:function(){var e,h=q.getNeighbours(b,2),i=0;for(a.audio.playSound("sfx_beamup"),s.removeObject(u,g),h.push(b),e=0;e<h.length;++e)!function(a){var b,g=h[a],j=g.getPosition(),k=j.clone(),m=f(o.getPosition().x,o.getPosition().y),n=e/2,p=function(){var a=TweenLite.to(j,3,{x:m.x,y:m.y,ease:Power1.easeOut,onComplete:function(){s.removeObject(u,a),++i,g.originalPosition=k,c.remove(g),q.unsetGridPosition(g),l.setTarget(l.getTarget()-1,!1),i===h.length&&(q.setDirty(!0),d())}});u.push(a)};b=TweenLite.to({},n,{onComplete:function(){s.removeObject(u,b),g.z=r.layers.BEAMED_TILE,g.animatable.setAnimation("beamed"),g.rotatable.setTargetDegree(720,s.getRandom(0,1)),g.rotatable.setSpeed(50+s.getRandom(0,50)),p()}}),u.push(b)}(e)}});u.push(g),p.fadable.fadeIn(),a.audio.playSound("sfx_beamappear")},h=function(a){var b=TweenLite.to(e,1,{x:0,ease:Power2.easeOut,onComplete:function(){s.removeObject(u,b),a&&a()}});u.push(b),p.fadable.setFadeSpeed(1.5),p.fadable.fadeOut()};g(function(){h(d)})};e(function(){c.remove(p),d&&d()})},m=function(){return p=e(i,k,j).add({init:function(){var a;this.spritable.setup({image:d.getAsset("ufoTractorBeam"),position:o.getPosition()}),a=this.getDimension(),this.setOrigin(f(a.width/2,0)),this.scalable.setScale(f(0,1)),this.z=r.layers.UFO_BEAM,this.setName("tractorBeam")}})},n=function(){var b=(c.canvas.getDimension(),o.scalable.getScale());c.add(m(),function(){var c=function(c){var d=c.getPosition(),e=f(0,p.getDimension().height-75),i=d.clone().substract(e);p.setPosition(i),i.y<0&&(e=f(0,p.getDimension().height+i.y-100),i=d.clone().substract(e)),g(i,function(){h(c,function(){var c=TweenLite.to(b,1.5,{x:2,y:2,ease:Power1.easeIn,onComplete:function(){s.removeObject(u,c)}});u.push(c),a.audio.playSound("sfx_ufoflyaway"),g(f(56,1088),function(){z()},Power1.easeIn,1.5),q.compact(function(){})})},Power1.easeOut)};q.getRandomTile(function(a){v===!0&&(a.getPosition().y<300?q.getRandomTile(function(a){c(a)}):c(a)),c(a)})})};return o=e(i,j,k).add({init:function(){var a;this.spritable.setup({image:d.getAsset("ufo"),position:b.position||f(0,0)}),a=this.getDimension(),this.setOrigin(f(a.width/2,a.height/2)),this.z=r.layers.UFO,this.scalable.setSpeed(80),this.fadable.fadeIn(),this.setName("ufo"),n()}})},x=function(){m.load("shownRandomAbductionTutorial",!1)||(speechBubble1=n({string:"The Aliens are back!",flipped:!1,lifeTime:3}),speechBubble1.setPosition(f(80,800)),c.add(speechBubble1),TweenLite.to({},3,{onComplete:function(){speechBubble2=n({string:"They're taking some animals!",flipped:!0,lifeTime:4}),speechBubble2.setPosition(f(560,800)),c.add(speechBubble2),m.save("shownRandomAbductionTutorial",!0)}}))},y=function(){a.state.powerups.eds===!0?h.fire("command.powerups.eds.crashufo"):(h.fire("command.tilegrid.activate",!1),h.fire("command.challenges.alienoverlay.show","randomabduction"),a.audio.stopAllMusic(),a.audio.playMusic("music_alien",!0),x())},z=function(){h.fire("command.challenges.alienoverlay.hide"),c.remove(o,function(){h.fire("command.tilegrid.activate",!0),a.audio.stopAllMusic(),a.audio.playMusic("music_level",!0),q.checkContinue()})},A=function(a){"randomabduction"===a&&c.add(w({position:f(-56,0)}))},B=function(){a.killTweens(u)},C={init:function(a){q=a,t||(h.on("command.challenges.randomabduction.show",y),h.on("command.challenges.randomabduction.hide",z),h.on("status.challenges.alienoverlay.showed",A),h.on("command.tweens.kill",B),t=!0)},destroy:function(){h.off("command.challenges.randomabduction.show",y),h.off("command.challenges.randomabduction.hide",z),h.off("status.challenges.alienoverlay.showed",A),h.off("command.tweens.kill",B)}};return C}),devgru.module.create("module/game/challenges/spawner",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/event/system","object/gui/levelindicator"],function(a,b,c,d,e,f,g,h){var i=a.sugar,j=["ufoflyby","randomabduction","mutation"];return function(){var a,c,e,f,k,l,m,n=!1,o=0,p=30,q=d().add({setup:function(b,c){if(!n){if(n=!0,i.isUndefined(b))throw"Challenge spawner needs settings";if(i.isUndefined(b.likelihood))throw"Challenge spawner needs settings.likelihood";if(a=b.likelihood,k=a.max,i.isUndefined(c))throw"Challenge spawner needs a reference to the tilegrid";l=c}},update:function(b){o>=0&&(o+=b.deltaT),o>=p&&(e=i.getRandom(1,100),c=h.getLevel(),f=c>=k?100:a[c],f>0&&f>=e&&l.isActive()&&l.isDirty()&&l.movesLeft()&&(m=j[i.getRandom(0,j.length-1)],i.isDefined(m)&&g.fire("command.challenges."+m+".show")),o=0),this.base.update(b)},destroy:function(){}});return q.z=2e3,b.add(q),q}}),devgru.module.create("module/game/challenges/totalabduction",["utils","devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/event/system","devgru/component/spritable","devgru/component/fadable","devgru/component/scalable","object/gui/targetindicator","module/game/savestatemanager","module/gui/speechbubble"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q,r,s=a.constants,t=b.sugar,u=!1,v=[],w=!1,x=1,y=function(b){var g=function(a,b,c,d,e){var f=o.getPosition(),g=TweenMax.to(f,d*x||2*x,{bezier:e||[{x:f.x+100,y:f.y+100},{x:a.x,y:a.y}],ease:c||Power1.easeOut,onComplete:function(){o.setPosition(a),b&&b(),t.removeObject(v,g)}});v.push(g)},h=function(b,d){var e=function(b){var d=p.scalable.getScale(),e=function(b){var e=TweenLite.to(d,1*x,{x:1,ease:Power3.easeOut,onComplete:function(){var d,g=q.getTiles(),h=0;for(a.audio.playSound("sfx_beamup"),t.removeObject(v,e),d=0;d<g.length;++d)!function(a){var d=g[a],e=d.getPosition(),i=e.clone(),j=f(o.getPosition().x,o.getPosition().y),k=function(){var a=TweenLite.to(e,3*x,{x:j.x,y:j.y,ease:Power1.easeOut,onComplete:function(){t.removeObject(v,a),++h,d.originalPosition=i,c.remove(d),q.unsetGridPosition(d),h===g.length&&(q.setDirty(!0),b())}});v.push(a)};d.z=s.layers.BEAMED_TILE,d.animatable.setAnimation("beamed"),d.rotatable.setTargetDegree(720,t.getRandom(0,1)),d.rotatable.setSpeed(50+t.getRandom(0,50)),k()}(d)}});a.audio.playSound("sfx_beamappear"),v.push(e),p.fadable.fadeIn()},g=function(a){var b=TweenLite.to(d,1*x,{x:0,ease:Power2.easeOut,onComplete:function(){t.removeObject(v,b),a&&a()}});v.push(b),p.fadable.setFadeSpeed(1.5/x),p.fadable.fadeOut()};e(function(){g(b)})};e(function(){c.remove(p),d&&d()})},l=function(){return p=e(i,k,j).add({init:function(){var a;this.spritable.setup({image:d.getAsset("ufoTractorBeam"),position:o.getPosition()}),a=this.getDimension(),this.setOrigin(f(a.width/2,0)),this.scalable.setScale(f(0,1)),this.z=s.layers.UFO_BEAM,this.setName("tractorBeam")}})},m=function(){var b=(c.canvas.getDimension(),o.scalable.getScale());c.add(l(),function(){var c=function(c){var d=c.getPosition(),e=f(0,p.getDimension().height-75),i=d.clone().substract(e);p.setPosition(i),i.y<0&&(e=f(0,p.getDimension().height+i.y-100),i=d.clone().substract(e)),g(i,function(){h(c,function(){var c=TweenLite.to(b,1.5*x,{x:2,y:2,ease:Power1.easeIn,onComplete:function(){t.removeObject(v,c)}});v.push(c),a.audio.playSound("sfx_ufoflyaway"),g(f(640,1088),function(){B(),t.isDefined(r)&&r()},Power1.easeIn,1.5),q.compact(function(){})})},Power1.easeOut)};q.getRandomTile(function(a){w===!0&&(a.getPosition().y<300?q.getRandomTile(function(a){c(a)}):c(a)),c(a)})})};return o=e(i,j,k).add({init:function(){var a;this.spritable.setup({image:d.getAsset("ufo"),position:b.position||f(0,0)}),a=this.getDimension(),this.setOrigin(f(a.width/2,a.height/2)),this.z=s.layers.UFO,this.scalable.setSpeed(80/x),this.fadable.fadeIn(),this.setName("ufo"),m()}})},z=function(){return m.load("shownTotalAbductionTutorial",!1)?void(x=.5):(speechBubble1=n({string:"We can't move any more animals inside...",flipped:!1,lifeTime:3}),speechBubble1.setPosition(f(80,800)),c.add(speechBubble1),TweenLite.to({},3,{onComplete:function(){speechBubble2=n({string:"And now the aliens are taking them!",flipped:!0,lifeTime:3}),speechBubble2.setPosition(f(560,800)),c.add(speechBubble2)}}),void TweenLite.to({},6,{onComplete:function(){speechBubble3=n({string:"We have to get more animals inside the barn next time...",flipped:!1,lifeTime:3}),speechBubble3.setPosition(f(80,800)),c.add(speechBubble3),m.save("shownTotalAbductionTutorial",!0)}}))},A=function(b){r=b,a.state.powerups.eds===!0?h.fire("command.powerups.eds.crashufo",function(){q.freeAll(),a.state.popups.levelEnd=!1,q.checkContinue()}):(h.fire("command.tilegrid.activate",!1),h.fire("command.challenges.alienoverlay.show","totalabduction"),a.audio.stopAllMusic(),a.audio.playMusic("music_alien",!0),z())},B=function(){h.fire("command.challenges.alienoverlay.hide"),c.remove(o,function(){h.fire("command.tilegrid.activate",!0)})},C=function(a){"totalabduction"===a&&c.add(y({position:f(-56,0)}))},D=function(){a.killTweens(v)},E={init:function(a){q=a,u||(h.on("command.challenges.totalabduction.show",A),h.on("command.challenges.totalmabduction.hide",B),h.on("status.challenges.alienoverlay.showed",C),h.on("command.tweens.kill",D),u=!0)},destroy:function(){h.off("command.challenges.randomabduction.show",A),h.off("command.challenges.randomabduction.hide",B),h.off("status.challenges.alienoverlay.showed",C),h.off("command.tweens.kill",D)}};return E}),devgru.module.create("module/game/challenges/ufoflyby",["utils","devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/event/system","devgru/component/spritable","devgru/component/fadable","devgru/component/scalable","module/game/savestatemanager","module/gui/speechbubble"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n,o,p=a.constants,q=b.sugar,r=!1,s=[],t=function(b){var g=function(a,b,c,d){var e=n.getPosition(),f=TweenMax.to(e,d||2,{bezier:[{x:e.x+200,y:e.y+200},{x:a.x,y:a.y}],ease:c||Power1.easeOut,onComplete:function(){q.removeObject(s,f),n.setPosition(a),b&&b()}});s.push(f)},l=function(b){var g,h=function(a){var b=g.scalable.getScale(),c=function(a){g.fadable.fadeIn();var c=TweenLite.to(b,1,{y:1,ease:Power3.easeOut,onComplete:function(){q.removeObject(s,c),a&&a()}});s.push(c)},d=function(a){var c=TweenLite.to(b,1,{y:0,ease:Power2.easeOut,onComplete:function(){q.removeObject(s,c),a&&a()}});s.push(c),g.fadable.setFadeSpeed(1.5),g.fadable.fadeOut()};c(function(){d(a)})},l=function(){return a.audio.playSound("sfx_beamappear"),g=e(i,k,j).add({init:function(){var a;this.spritable.setup({image:d.getAsset("ufoScanBeam"),position:n.getPosition()}),a=this.getDimension(),this.setOrigin(f(a.width/2,0)),this.scalable.setScale(f(1,0)),this.fadable.setFadeSpeed(2),this.z=p.layers.UFO_BEAM,this.setName("scanBeam")}})};c.add(l(),function(){h(function(){c.remove(g),b&&b()})})},m=function(){var a,b=c.canvas.getDimension(),d=n.scalable.getScale();g(f(b.width/2-20,150),function(){l(function(){h.fire("command.powerups.shuffle.cloud.show"),a=TweenLite.to(d,1.5,{x:2,y:2,ease:Power1.easeIn,onComplete:function(){q.removeObject(s,a)}}),s.push(a),g(f(56,1088),function(){w()},Power1.easeIn,1.5)})},Power1.easeOut)};return n=e(i,j,k).add({init:function(){var a;this.spritable.setup({image:d.getAsset("ufo"),position:b.position||f(0,0)}),a=this.getDimension(),this.setOrigin(f(a.width/2,a.height/2)),this.z=p.layers.UFO,this.scalable.setSpeed(80),this.fadable.fadeIn(),this.setName("ufo"),m()}})},u=function(){l.load("shownUfoFlybyTutorial",!1)||(speechBubble1=m({string:"What’s happening?!",flipped:!1,lifeTime:4}),speechBubble1.setPosition(f(80,800)),c.add(speechBubble1),TweenLite.to({},4,{onComplete:function(){speechBubble2=m({string:"Aliens?! They’re scaring the animals!",flipped:!0,lifeTime:4}),speechBubble2.setPosition(f(560,800)),c.add(speechBubble2)}}),TweenLite.to({},9,{onComplete:function(){speechBubble3=m({string:"The animals are all mixed up differently!",flipped:!1,lifeTime:4}),speechBubble3.setPosition(f(80,800)),c.add(speechBubble3),l.save("shownUfoFlybyTutorial",!0)}}))},v=function(){a.state.powerups.eds===!0?h.fire("command.powerups.eds.crashufo"):(h.fire("command.tilegrid.activate",!1),h.fire("command.challenges.alienoverlay.show","ufoflyby"),u(),a.audio.stopAllMusic(),a.audio.playMusic("music_alien",!0))},w=function(){h.fire("command.challenges.alienoverlay.hide"),c.remove(n,function(){h.fire("command.tilegrid.activate",!0),a.audio.stopAllMusic(),a.audio.playMusic("music_level",!0)})},x=function(a){"ufoflyby"===a&&c.add(t({position:f(-56,0)}))},y=function(){a.killTweens(s)},z={init:function(a){o=a,r||(h.on("command.challenges.ufoflyby.show",v),h.on("command.challenges.ufoflyby.hide",w),h.on("status.challenges.alienoverlay.showed",x),h.on("command.tweens.kill",y),r=!0)},destroy:function(){h.off("command.challenges.ufoflyby.show",v),h.off("command.challenges.ufoflyby.hide",w),h.off("status.challenges.alienoverlay.showed",x),h.off("command.tweens.kill",y)}};return z}),devgru.module.create("module/game/level",["devgru","devgru/game","utils","devgru/event/system","module/gui/popup","module/game/audiomanager","module/game/savestatemanager","object/gui/scoreindicator","object/gui/levelindicator","object/gui/targetindicator","module/game/apimanager","devgru/math/vector"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";a.sugar;return function(){var a=e(),b=function(b,g){var l=c.settings.levelTarget,n=function(b){a=e(),a.show({type:a.TYPE_POWERUP_SELECT,winState:0,score:h.getScore(),bonus:10*i.getLevel(),penalty:10*(j.getTarget()+10-j.getMet()),onHide:b})},o=function(){switch(a=e(),b){case m.ENDSCREEN_TYPE_FAILURE:d.fire("command.pausebutton.disable"),f.stopAllMusic(),f.playMusic("music_failed",!1),a.show({type:a.TYPE_LEVEL_END,winState:0,title:"Level Failed",score:h.getScore(),bonus:10*i.getLevel(),penalty:10*(j.getTarget()+10-j.getMet()),buttonText:"Try again",onHide:function(){f.stopAllMusic(),f.playMusic("music_level",!0),d.fire("command.target.reset"),d.fire("command.score.reset"),d.fire("command.pausebutton.enable"),d.fire("command.tilegrid.create"),d.fire("command.powerupbar.reset"),i.resetLevel(),j.setTarget(l)}});break;case m.ENDSCREEN_TYPE_SUCCESS:d.fire("command.pausebutton.disable"),f.stopAllMusic(),f.playMusic("music_completed",!1),a.show({type:a.TYPE_LEVEL_END,winState:1,title:"Level Complete",score:h.getScore(),bonus:10*i.getLevel(),penalty:10*(j.getTarget()+10-j.getMet()),buttonText:"Continue",onHide:function(){n(function(){k.requestGameBreak(function(){},function(){f.stopAllMusic(),f.playMusic("music_level",!0),d.fire("command.target.reset"),d.fire("command.score.reset"),d.fire("command.level.up"),d.fire("command.pausebutton.enable"),d.fire("command.tilegrid.create")}),j.setTarget(l)})}});break;case m.ENDSCREEN_TYPE_PERFECT:d.fire("command.pausebutton.disable"),f.stopAllMusic(),f.playMusic("music_completed",!1),a.show({type:a.TYPE_LEVEL_END,winState:2,title:"Perfect Level!",score:h.getScore(),bonus:10*i.getLevel(),penalty:10*(j.getTarget()+10-j.getMet()),buttonText:"Continue",onHide:function(){n(function(){k.requestGameBreak(function(){},function(){f.stopAllMusic(),f.playMusic("music_level",!0),d.fire("command.target.reset"),d.fire("command.score.reset"),d.fire("command.level.up"),d.fire("command.pausebutton.enable"),d.fire("command.tilegrid.create"),j.setTarget(l)})})}})}};g>0?d.fire("command.challenges.totalabduction.show",o):o()},l=function(){1!==i.getLevel()||c.state.tutorial||g.load("shownChallengeTutorial",!1)||(d.fire("command.challenges.ufoflyby.show"),g.save("shownChallengeTutorial",!0))},m={init:function(){d.on("level.endscreen.show",b),d.on("status.tilegrid.animated",l)},destroy:function(){d.off("level.endscreen.show",b),d.off("status.tilegrid.animated",l)},ENDSCREEN_TYPE_SUCCESS:0,ENDSCREEN_TYPE_FAILURE:1,ENDSCREEN_TYPE_PERFECT:2};return m.init(),m}}),devgru.module.create("module/game/powerups/eds",["devgru","utils","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/event/system","devgru/component/spritable","devgru/component/fadable","devgru/component/scalable","devgru/component/rotatable"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p,q,r,s=!1,t=a.sugar,u=b.constants,v=[],w=function(a,b){var d=c.getScroll(),f=b,g=e().add({timer:0,destroy:function(){d.x=0,d.y=0},update:function(e){this.timer>=0&&(this.timer+=e.deltaT),this.timer<a&&(f=b-b*(this.timer/a),d.x=t.getRandom(-f,f),d.y=t.getRandom(-f,f)),this.timer>=1&&c.remove(g)}});c.add(g)},x=function(a){var b=e(i,j,k).add({timer:0,timerWait:0,isOpaque:!1,init:function(){var b;this.spritable.setup({image:d.getAsset("edsState2"),position:a.position||f(320,0)}),b=this.getDimension(),this.setOrigin(f(b.width/2,0)),this.scalable.setScale(f(1.1,1.1)),this.z=u.layers.EDS_SHIELD_INNER,this.fadable.setAlpha(0),this.setName("edsInnerShield")},update:function(a){this.isOpaque||(this.timerWait>=0&&(this.timerWait+=a.deltaT),this.timerWait>=10&&(this.timerWait=-1),-1===this.timerWait&&(this.timer+=2*a.deltaT,this.fadable.setAlpha(.45*Math.sin(this.timer)),this.timer>=Math.PI&&(this.fadable.setAlpha(0),this.timerWait=0,this.timer=0))),this.base.update(a)}}),c=e(i,j,k).add({init:function(){var b;this.spritable.setup({image:d.getAsset("edsState1"),position:a.position||f(320,0)}),b=this.getDimension(),this.setOrigin(f(b.width/2,0)),this.scalable.setScale(f(1.1,1.1)),this.z=u.layers.EDS_SHIELD_OUTER,this.setName("edsOuterShield"),this.fadable.fadeIn(function(){},1)}});n=e().add({init:function(){this.setName("EDS"),this.addChild(b),this.addChild(c),this.z=u.layers.EDS_SHIELD},fadeOut:function(a){c.fadable.fadeOut(function(){t.isFunction(a)&&a()}),b.fadable.fadeOut()},setOpaque:function(){b.setOpaque=!0,b.fadable.setAlpha(1)}})},y=function(a){m=e(i,j,k,l).add({shake:!1,shakeSpeed:50,amplitude:8,velocity:f(0,0),timer:0,init:function(){var b;this.spritable.setup({image:d.getAsset("ufo"),position:a.position||f(0,0)}),b=this.getDimension(),this.setOrigin(f(b.width/2,b.height/2)),this.z=u.layers.UFO,this.fadable.fadeIn(),this.setName("ufo")},update:function(a){this.timer+=a.deltaT*this.shakeSpeed,this.shake&&(this.shakeSpeed>3&&(this.shakeSpeed-=.2*a.deltaT*60),this.rotatable.setAngleDegree(this.amplitude*Math.sin(this.timer)),this.velocity.x+=.3*(Math.random()-.5),this.velocity.y+=.3*(Math.random()-.5),this.getPosition().add(this.velocity)),this.base.update(a)}})},z=function(a,b){o=e(i,j,k).add({init:function(){var c;this.spritable.setup({image:d.getAsset("ufoExplosion"),position:a.position||f(0,0)}),c=this.getDimension(),this.setOrigin(f(c.width/2,c.height/2)),this.z=u.layers.EDS_EXPLOSION,this.setName("ufoExplosion"),n.setOpaque(),t.isFunction(b)&&b()}})},A=function(a,b){p=e(i,j,k).add({init:function(){var c,e;this.spritable.setup({image:d.getAsset("edsRipple"),position:a.position||f(0,0)}),c=this.getDimension(),this.setOrigin(f(c.width/2,c.height/2)),this.z=u.layers.EDS_RIPPLE,this.setName("edsRipple"),this.scalable.setScale(f(0,0)),e=TweenMax.to(this.scalable.getScale(),2,{x:1,y:1,ease:Expo.easeOut,onComplete:function(){t.removeObject(v,e)}}),v.push(e),t.isFunction(b)&&b()}})},B=function(a,b){q=e(i,j,k,l).add({timer:0,scale:0,init:function(){var a;this.spritable.setup({image:d.getAsset("ufoCursing")}),a=this.getDimension(),this.setOrigin(f(95,87)),this.z=u.layers.EDS_CURSEBALLOON,this.scalable.setSpeed(600),this.fadable.setFadeSpeed(3),this.fadable.fadeIn(),this.setName("curseBalloon"),t.isFunction(b)&&b()},update:function(a){this.timer+=a.deltaT,this.shakeTimer+=a.deltaT,this.scale=1+.1*Math.sin(10*this.timer),this.setPosition(m.getPosition().clone().add(f(-64,-64))),this.scalable.setScale(f(this.scale,this.scale)),this.base.update(a)}})},C=function(a,b,c,d,e){var f,g=m.getPosition();e&&e.push({x:a.x,y:a.y}),f=TweenMax.to(g,d||2,{bezier:e||[{x:g.x+200,y:g.y+200},{x:a.x,y:a.y}],ease:c||Power1.easeOut,onComplete:function(){t.removeObject(v,f),m.setPosition(a),b&&b()}}),v.push(f)},D=function(a){r=a,h.fire("command.tilegrid.activate",!1);var b,d=c.canvas.getDimension();m.scalable.setScale(f(3,3)),b=TweenLite.to(m.scalable.getScale(),3,{x:1,y:1,onComplete:function(){t.removeObject(v,b)}}),v.push(b),C(f(d.width-200,250),function(){c.add(o)},Power1.easeIn,3,[{x:600,y:600}])},E=function(){F(),c.add(n,function(){b.state.powerups.eds=!0}),c.add(m)},F=function(){var a=c.canvas.getDimension(),d=f(a.width-300,250);x({position:f(320,-4)}),y({position:f(-300,960)}),z({position:d},function(){b.audio.playSound("sfx_explosion"),w(1,10),c.add(p),t.setAnimationFrameTimeout(function(){o.fadable.setFadeSpeed(1),o.fadable.fadeOut(function(){c.remove(o,function(){o=null})})},100),m.shake=!0}),A({position:d},function(){t.setAnimationFrameTimeout(function(){p.fadable.setFadeSpeed(1),p.fadable.fadeOut(function(){c.remove(p,function(){p=null})}),c.add(q)},500)}),B({position:f(d.x+30,d.y-120)},function(){b.audio.playSound("sfx_alienspeech"),t.setAnimationFrameTimeout(function(){q.fadable.setFadeSpeed(5),q.fadable.fadeOut(function(){c.remove(q,function(){q=null,C(f(700,400),function(){c.remove(m,function(){m=null,r&&r()})}),n.fadeOut(function(){c.remove(n,function(){n=null,b.state.powerups.eds=!1,h.fire("command.tilegrid.activate",!0)})})})})},2e3)})},G=function(){b.state.powerups.eds=!1,b.killTweens(v)},H={init:function(){s||(h.on("command.powerups.eds.show",E),h.on("command.powerups.eds.crashufo",D),h.on("command.tweens.kill",G),s=!0)},destroy:function(){h.off("command.powerups.eds.show",showUfo),h.off("command.powerups.eds.crashufo",D),h.off("command.tweens.kill",G)}};return H}),devgru.module.create("module/game/powerups/powerupbar",["devgru","devgru/game","devgru/loader","devgru/math/vector","devgru/math/dimension","devgru/baseobject","devgru/event/system","devgru/component/spritable","devgru/component/animatable","devgru/component/clickable","object/gui/textbox","utils"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=a.sugar;return function(a){var e=8,n=!0,o=[],p=[],q=function(){var a;for(n=!0,a=0;a<o.length;++a)o[a].selected=!1,o[a].updateIcon()},r=function(a){var b;for(b=0;b<o.length;++b)a.total+=o[b].amount,a[o[b].getName()]=o[b].amount},s=f(h).add({init:function(){var a,e=b.canvas.getDimension();this.spritable.setup({image:c.getAsset("powerupBar")}),a=this.getDimension(),this.setOrigin(d(a.width,0)),this.setPosition(d(e.width,120)),g.on("command.powerupbar.count",r)},destroy:function(){var a;for(a=0;a<p.length;++a)g.off(p[a],q);for(a=0;a<o.length;++a)g.off("command.powerups.increment."+o[a].getName(),o[a].incrementAmount),g.off("command.powerupbar.glow",o[a].setGlow),g.off("command.powerupbar.reset",o[a].reset),g.off("command.powerupbar.unselect",o[a].unselect);g.off("command.powerupbar.count",r)}}),t=function(b){var r=k({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#a000b1",fontSize:16,maxWidth:20,linebreaks:!1,margin:d(0,4)}),t=f(h).add({visible:!1,init:function(){var a;this.spritable.setup({image:c.getAsset("powerupCounter")}),a=this.getDimension(),this.setOrigin(d(a.width/2,a.height/2))},draw:function(a){this.visible&&this.base.draw(a)}}),u=f(i).add({init:function(){this.animatable.setup({image:c.getAsset("antTrail"),animation:{frameCount:4,animations:{normal:{fps:10,startFrame:0,endFrame:3}}}}),this.animatable.setAnimation("normal"),this.setPosition(d(7,5))},draw:function(b){var c;(n||w.selected)&&a.isActive()||(c=b.context.globalAlpha,b.context.fillStyle="black",b.context.globalAlpha=.5,b.context.fillRect(11,7,60,60),b.context.globalAlpha=c),!n&&w.selected&&this.base.draw(b)}}),v=!1,w=f(h,j).add({amount:0,selected:!1,alpha:1,phaseShift:0,canUnselect:b.canUnselect||!1,updateIcon:function(){r.setText(this.amount),t.visible=this.amount>1?!0:!1,this.spritable.setup(this.amount>0?{image:c.getAsset(b.icon)}:{image:c.getAsset("iconEmpty")})},incrementAmount:function(a){w.amount+=a,w.updateIcon()},setGlow:function(a){v=a},init:function(){var a;this.spritable.setup({image:c.getAsset(b.icon)}),a=this.getDimension(),this.setPosition(d(-a.width,36+(a.height+e)*o.length)),w.addChild(u),w.addChild(t),t.addChild(r),t.setPosition(d(10,a.height-10)),g.on("command.powerups.increment."+b.name,this.incrementAmount),g.on(b.reactivateEvent,q),p.push(b.reactivateEvent),this.updateIcon(),g.on("command.powerupbar.glow",this.setGlow),g.on("command.powerupbar.reset",this.reset),g.on("command.powerupbar.unselect",this.unselect)},onClickDown:function(){return this.selected&&this.canUnselect?void w.unselect():void(n&&a.isActive()&&!l.state.popups.levelEnd&&m.isDefined(b.callback)&&this.amount>0&&(--this.amount,l.audio.playSound("sfx_select"),n=!1,this.selected=!0,b.callback(this)))},draw:function(a){var b,c;this.base.draw(a),v&&(c=a.context.globalCompositeOperation,b=a.context.globalAlpha,this.phaseShift+=.1*a.deltaT*60,this.alpha=.2+.1*Math.sin(this.phaseShift),a.context.globalCompositeOperation="lighter",a.context.globalAlpha=this.alpha,this.base.draw(a),a.context.globalCompositeOperation=c,a.context.globalAlpha=b)},reset:function(){w.unselect(),w.amount=0,w.updateIcon(),n=!0},unselect:function(){w.selected&&++w.amount,w.selected=!1,n=!0,g.fire("command.tilegrid.onclick",0),a.unselect(),w.updateIcon()}});w.setName(b.name),s.addChild(w),o.push(w)};return t({name:"shuffle",icon:"iconShuffle",callback:function(){var a=b.get("forfeitButton");a&&b.remove(a),g.fire("command.powerups.shuffle.cloud.show"),g.fire("command.powerups.shuffle.sheepdog.show"),q()}}),t({name:"switcheroo",icon:"iconSwitcheroo",callback:function(){g.fire("command.tilegrid.onclick",2)},reactivateEvent:"status.tilegrid.swappedtiles",canUnselect:!0}),t({name:"treat",icon:"iconTreat",callback:function(){g.fire("command.tilegrid.onclick",1)},reactivateEvent:"status.powerups.temptingtreat.hide",canUnselect:!0}),t({name:"eds",icon:"iconEDS",callback:function(a){l.state.powerups.eds?++a.amount:g.fire("command.powerups.eds.show"),l.audio.playSound("sfx_shield"),q()}}),s.setName("powerUpBar"),s}}),devgru.module.create("module/game/powerups/shuffle/cloud",["utils","devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/event/system","devgru/component/spritable","devgru/component/scalable","devgru/component/rotatable","devgru/component/fadable","module/game/audiomanager"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n=a.constants,o=b.sugar,p=!1,q=[],r=function(){var a=0,b=e(i,j,l).add({init:function(){this.z=n.layers.CLOUD_LARGE,this.setName("largeCloud"),this.spritable.setup({image:d.getAsset("dustCloudLarge"),position:f(283,385)});var a=this.getDimension();this.setOrigin(f(a.width/2,a.height/2)),this.fadable.setFadeSpeed(1),this.scaleUp()},scaleUp:function(){var a=this.scalable.getScale(),b=this,c=TweenLite.to(a,.5,{x:1.04,y:1.04,ease:Power1.easeOut,onComplete:function(){o.removeObject(q,c),b.scaleDown()}});q.push(c)},scaleDown:function(){var a=this.scalable.getScale(),b=this,c=TweenLite.to(a,.5,{x:1,y:1,ease:Power1.easeOut,onComplete:function(){o.removeObject(q,c),b.scaleUp()
}});q.push(c)},fadeIn:function(a){this.fadable.fadeIn(a)},fadeOut:function(a){this.fadable.fadeOut(a)},update:function(b){a>=0&&(a+=b.deltaT),this.base.update(b),a>=3&&(h.fire("command.powerups.shuffle.cloud.hide"),a=-1)}});return b},s=function(a){var b=0,c=a.direction||"right",g=a.speed||8,h=e(i,k).add({init:function(){var b;this.spritable.setup({image:d.getAsset(a.asset),position:a.position||f(0,0)}),b=this.getDimension(),this.setOrigin(f(b.width/2,b.height/2)),this.z=n.layers.CLOUD_ANIMAL},draw:function(a){this.base.draw(a),"right"===c&&(b+=g),"left"===c&&(b-=g),this.rotatable.setAngleDegree(b)}});return h},t=function(a){var b=e(i,j).add({init:function(){var b;this.spritable.setup({image:d.getAsset("dustCloudSmall"),position:a.position||f(0,0)}),this.scalable.setScale(a.scale||f(1,1)),b=this.getDimension(),this.setOrigin(f(b.width/2,b.height/2)),this.z=n.layers.CLOUD_DUST}});return b},u=function(a){a.addChild(t({position:f(-50,110),scale:f(1.6,1.4)})),a.addChild(t({position:f(90,120),scale:f(1.4,1.4)})),a.addChild(t({position:f(-50,60)})),a.addChild(t({position:f(90,50),scale:f(.8,.8)})),a.addChild(t({position:f(40,150),scale:f(1.3,1.1)})),a.addChild(t({position:f(-90,-80),scale:f(1.4,1.6)})),a.addChild(t({position:f(100,-85),scale:f(1.3,.8)})),a.addChild(t({position:f(100,-250),scale:f(.8,.7)})),a.addChild(t({position:f(-150,-60),scale:f(.8,.8)})),a.addChild(t({position:f(-250,-100),scale:f(1,1.2)})),a.addChild(t({position:f(255,-80),scale:f(.9,1)})),a.addChild(t({position:f(260,-10),scale:f(.9,.8)})),a.addChild(t({position:f(250,190),scale:f(.8,.7)})),a.addChild(t({position:f(-280,40),scale:f(.6,.6)})),a.addChild(t({position:f(-260,270),scale:f(.6,.6)})),a.addChild(t({position:f(250,90),scale:f(1,1)})),a.addChild(t({position:f(0,270),scale:f(1,1)})),a.addChild(t({position:f(0,-260),scale:f(1,1)})),a.addChild(t({position:f(-200,260),scale:f(1.1,1)})),a.addChild(t({position:f(240,-250),scale:f(1.3,1.3)}))},v=function(){var b=c.canvas.getDimension(),g=e(i).add({timer:0,woof:0,init:function(){var a,c;this.spritable.setup({image:d.getAsset("doge")}),a=this.getDimension(),this.setPosition(f(b.width,b.height)),c=TweenLite.to(this.getPosition(),1,{x:b.width-a.width,y:b.height-a.height,ease:Power4.easeOut,onComplete:function(){o.removeObject(q,c)}}),q.push(c)},update:function(d){this.timer>=0&&(this.timer+=d.deltaT),this.timer>1&&0===this.woof&&(++this.woof,a.audio.playSound("sfx_dog")),this.timer>1.3&&1===this.woof&&(++this.woof,a.audio.playSound("sfx_dog")),this.timer>3&&(this.timer=-1,TweenLite.to(this.getPosition(),1,{x:b.width,y:b.height,ease:Power4.easeOut,onComplete:function(){h.fire("command.powerups.shuffle.sheepdog.hide"),c.remove(g)}}))}});g.z=n.layers.DOGE,c.add(g)},w=function(){var b=r();h.fire("command.tilegrid.activate",!1),b.addChild(s({asset:"chickenCloud1",position:f(-200,-200)})),b.addChild(t({position:f(-180,-120),scale:f(1.7,1.7)})),b.addChild(s({asset:"sheepCloud1",position:f(0,-170),direction:"left"})),b.addChild(t({position:f(-5,-90),scale:f(1.9,1.9)})),b.addChild(s({asset:"chickenCloud2",position:f(170,-170),direction:"left"})),b.addChild(t({position:f(180,-100),scale:f(1.7,1.7)})),b.addChild(s({asset:"piggyCloud2",position:f(-200,110),direction:"left",speed:7})),b.addChild(t({position:f(-170,190),scale:f(2.1,2.1)})),b.addChild(s({asset:"piggyCloud1",position:f(30,-5),speed:6})),b.addChild(t({position:f(30,90),scale:f(2.3,2.3)})),b.addChild(s({asset:"sheepCloud1",position:f(140,130)})),b.addChild(t({position:f(140,180),scale:f(1.5,1.5)})),u(b),c.add(b),b.fadeIn(function(){h.fire("command.tilegrid.shuffle")}),a.audio.playSound("sfx_shuffle")},x=function(){c.get("largeCloud").fadeOut(function(){c.remove(c.get("largeCloud"),function(){h.fire("command.tilegrid.activate",!0),m.checkContinue()})})},y=function(){a.killTweens(q)},z={init:function(a){m=a,p||(h.on("command.powerups.shuffle.cloud.show",w),h.on("command.powerups.shuffle.cloud.hide",x),h.on("command.powerups.shuffle.sheepdog.show",v),h.on("command.tweens.kill",y),p=!0)},destroy:function(){h.off("command.powerups.shuffle.cloud.show",w),h.off("command.powerups.shuffle.cloud.hide",x),h.off("command.powerups.shuffle.sheepdog.show",v),h.off("command.tweens.kill",y)}};return z}),devgru.module.create("module/game/powerups/temptingtreat",["utils","devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/event/system","devgru/component/spritable","devgru/component/scalable","devgru/component/rotatable","devgru/component/fadable"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m,n=a.constants,o=b.sugar;return function(b,g){var p={x:1},q=[],r=!1,s=e(l).add({init:function(){var a,d=null,e=[],f=function(a){var b=TweenLite.to(t.scalable.getScale(),1,{x:1,y:1,ease:Quint.easeOut,onComplete:function(){o.removeObject(q,b),a()}});q.push(b)},i=function(a){var b=TweenLite.to(p,.3,{x:0,onComplete:function(){o.removeObject(q,b),a()}});q.push(b)};if(this.z=n.layers.TEMPTING_TREAT,this.setPosition(b),s.addChild(u),s.addChild(t),f(function(){i(function(){h.fire("status.powerups.temptingtreat.hide"),s.destroy(),c.remove(s),g()})}),d=c.get("powerUpBar"))for(e=d.getChildren(),a=0;a<e.length;++a)"treat"===e[a].getName()&&(e[a].selected=!1)},update:function(a){this.fadable.setAlpha(p.x),this.base.update(a)}}),t=e(i,j).add({init:function(){var a;this.spritable.setup({image:d.getAsset("treatCarrot")}),this.scalable.setScale(f(0,0)),a=this.getDimension(),this.setOrigin(f(a.width/2,a.height/2))}}),u=e(i,j,k).add({init:function(){var a;this.spritable.setup({image:d.getAsset("treatRays")}),this.scalable.setScale(f(.75,.75)),a=this.getDimension(),this.setOrigin(f(a.width/2,a.height/2)),this.rotatable.setTargetDegree(360)}}),v=function(){a.killTweens(q)};return s.setup=function(a){m=a,r||(h.on("command.tweens.kill",v),r=!0)},s.destroy=function(){h.off("command.tweens.kill",v)},c.add(s),s}}),devgru.module.create("module/game/savestatemanager",["devgru"],function(a){"use strict";var b,c=a.sugar,d=document.URL,e={setItem:function(a,b){var c,d=0;e[a]=b;for(c in e)e.hasOwnProperty(c)&&++d;this.length=d},getItem:function(a){var b=e[a];return c.isDefined(b)?b:null},removeItem:function(a){delete e[a]},clear:function(){this.length=0},length:0};try{if(b=window.localStorage,!window.localStorage)throw"No local storage available";window.localStorage.setItem(d+"save","0")}catch(f){alert("Warning: you have disabled cookies on your browser. You cannot save progress in your game."),b=e}return{save:function(a,c){"string"!=typeof a&&(a=JSON.stringify(a)),b.setItem(d+a,JSON.stringify(c))},load:function(a,c){var e;return e=b.getItem(d+a),null===e?c:JSON.parse(e)},remove:function(a){b.removeItem(d+a)},clear:function(){b.clear()},debug:function(){},isEmpty:function(){return 0===b.length}}}),devgru.module.create("module/game/score",["devgru"],function(a){"use strict";var b=a.sugar;return function(){var a,c={init:function(){},destroy:function(){},setup:function(b){a=b.multipliers},getScore:function(c){return b.isDefined(a)?(c>=a.max&&(c=a.max),c*a[c.toString()]):3*c}};return c}}),devgru.module.create("module/game/tilegrid",["devgru","devgru/game","devgru/math/array2d","devgru/math/vector","devgru/math/dimension","object/game/tile","devgru/event/system","module/game/score","module/game/level","utils","module/gui/forfeitbutton","object/gui/targetindicator"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=a.sugar;return function(a){var e,f,n,o,a,p,q=!1,r=3,s=d(0,0),t=d(4,4),u=!0,v=0,w=!1,x=0,y=!0,z=!1,A=i(),B=null,C=!0,D=function(a,b){var c,e,f;return m.isObject(a)&&m.isVector(b)&&(c=a.getDimension(),e=a.getOrigin(),f=d(b.x*(c.width+t.x)+s.x+e.x,b.y*(c.height+t.y)+s.y+e.y)),f},E=function(a,b){var c,e,f;return m.isObject(a)&&m.isVector(b)&&(c=a.getDimension(),e=a.getOrigin(),f=d((b.x-s.x-e.x)/(c.width+t.x),(b.y-s.y-e.y)/(c.height+t.y))),f},F=function(){var c=0;n.iterate(function(e,f,h){h=m.isArray2D(a)?h:a[m.getRandom(0,a.length-1)](),m.isDefined(h)&&null!==h&&(h.setup(u?{scale:!0,fade:!0}:{}),n.set(e,f,h),u===!0?(++c,h.animateToPosition(D(h,d(e,f)),function(){--c,0===c&&g.fire("status.tilegrid.animated")},Sine.easeOut,!0)):h.setTilePosition(D(h,d(e,f))),b.add(h))})},G=function(a){var c=0;n.iterate(function(d,e,f){m.isDefined(f)&&null!==f&&(c++,b.remove(f,function(){--c,0===c&&m.isFunction(a)&&a()}))}),0===c&&m.isFunction(a)&&a()},H=function(){w=!1,n=m.isArray2D(a)?a:c(o.width,o.height),F(),j.state.popups.levelEnd=!1},I=function(a,b,c){var c=c||!0,d=E(a,a.getPosition()),e=a.getType(),f=n.getValue(d.x,d.y-1),g=n.getValue(d.x+1,d.y),h=n.getValue(d.x,d.y+1),i=n.getValue(d.x-1,d.y);m.isDefined(f)&&null!==f&&f.getType()===e&&-1===m.indexOf(b,f)&&(b.push(f),c&&I(f,b)),m.isDefined(g)&&null!==g&&g.getType()===e&&-1===m.indexOf(b,g)&&(b.push(g),c&&I(g,b)),m.isDefined(h)&&null!==h&&h.getType()===e&&-1===m.indexOf(b,h)&&(b.push(h),c&&I(h,b)),m.isDefined(i)&&null!==i&&i.getType()===e&&-1===m.indexOf(b,i)&&(b.push(i),c&&I(i,b))},J=function(){var a,b,c,d=n.get(),e=o.width,f=o.height,g=[],h=!1;for(a=0;e>a;++a){for(b=0;f>b;++b)if(c=d[a][b],m.isDefined(c)&&null!==c){if("blocker"!==c.getType()&&I(c,g,!0),g.length>=r){h=!0;break}g=[]}if(h)break}return h},K=function(){return d(m.getRandom(0,o.width-1),m.getRandom(0,o.height-1))},L=function(a){var b=K();null!==n.getValue(b.x,b.y)&&m.isFunction(a)?a(b):L(a)},M=function(){var a,b,c,d,e=n.get(),f=o.width,g=o.height,h=function(a){var b=K();null===n.getValue(b.x,b.y)?(d=E(a,a.getPosition()),n.unset(d.x,d.y),a.setPosition(D(a,b)),n.set(b.x,b.y,a)):h(a)};if(!w)return void G(function(){u=!1,H(),u=!0});for(a=0;f>a;++a)for(b=0;g>b;++b)c=e[a][b],m.isDefined(c)&&null!==c&&h(c);Z()},N=function(a){var b,c,e,f=0,g=0;for(c=0;c<=o.width-1;++c)for(f=0,e=o.height-1;e>=0;--e)b=n.getValue(c,e),null===b?++f:(f>0&&b.animatable.setAnimation("scared"),n.set(c,e,null),n.set(c,e+f,b),u?(++g,b.animateToPosition(D(b,d(c,e+f)),function(){--g,0===g&&a&&a()})):b.setPosition(D(b,d(c,e+f))));0===g&&a&&a()},O=function(a){var b,c,e,f=0,g=0,h=!1,i=0;for(c=0;c<=o.width-1;++c)for(f=0,g>0&&(h=!0),e=0;e<=o.height-1;++e)b=n.getValue(c,e),h&&null!==b&&(n.set(c,e,null),n.set(c-g,e,b),u===!0?(++i,b.animateToPosition(D(b,d(c-g,e)),function(){--i,0===i&&a&&a()},Sine.easeOut)):b.setPosition(D(b,d(c-g,e)))),null===b&&++f,f!==o.height||++g;0===i&&a&&a()},P=function(){var a,c=[],d=function(){var c={total:0},d={Chicken:0,Pig:0,Sheep:0},e=function(){var c=b.get("forfeitButton");c&&b.remove(c),j.state.popups.levelEnd=!0,0===a?g.fire("level.endscreen.show",A.ENDSCREEN_TYPE_PERFECT,a):l.getMet()>=l.getTarget()?g.fire("level.endscreen.show",A.ENDSCREEN_TYPE_SUCCESS,a):l.getMet()<l.getTarget()&&g.fire("level.endscreen.show",A.ENDSCREEN_TYPE_FAILURE,a)};v=0,C?(g.fire("command.powerupbar.count",c),n.iterate(function(a,b,c){c&&(m.isDefined(d[c.getName()])||(d[c.getName()]=0),d[c.getName()]+=1)}),0===c.total||0===a||0===c.treat&&0===c.eds&&d.Chicken<3&&d.Pig<3&&d.Sheep<3?e():k(e)):g.fire("status.tilegrid.level.completed",a)};n.iterate(function(a,b,d){d&&c.push(d)}),a=c.length,d()},Q=function(a,b){var c=a.getPosition(),e=d(c.x,c.y),f=p.getScore(b),h=v;g.fire("status.tilegrid.score.add",e,f),b>=3&&5>=b&&g.fire("command.floater.create",{type:"small",position:e,score:f}),b>=6&&10>=b&&g.fire("command.floater.create",{type:"medium",position:e,score:f}),b>10&&g.fire("command.floater.create",{type:"large",position:e,score:f}),v+=Math.floor(b/10),5>h&&v>=5&&(g.fire("command.floater.create",{type:"amazing",position:e,score:0}),v=0),3>h&&v>=3&&5>v&&g.fire("command.floater.create",{type:"great",position:e,score:0})},R=function(a){return a.x<0||a.x>=o.width?!1:a.y<0||a.y>=o.height?!1:!0},S=function(a,c,d){var a,e,f=0,g=c.length,h=0;for(f=0;g>f;++f)"blocker"===c[f].getType()&&++h;for(Q(a,c.length-h),w=!0,f=0;g>f;++f)a=c[f],e=E(a,a.getPosition()),n.unset(e.x,e.y),m.isDefined(d)?b.remove(a):a.free()},T=function(a){var b=[];"blocker"!==a.getType()&&I(a,b),b.length>=r?(j.audio.playSound("sfx_pop"),a.playSound(),S(a,b),Z(function(){J()||$.checkContinue(),q=!1})):q=!1},U=function(a){var c,d,e,f=E(a,a.getPosition()),h=[],i={position:a.getPosition(),callback:function(){var c=b.get("forfeitButton");c&&b.remove(c),a.playSound(),S(a,h),Z(function(){J()||$.checkContinue(),q=!1}),x=$.CLICK_TO_REMOVE_GROUP}};for(c=-1;1>=c;++c)for(d=-1;1>=d;++d)R(f.x+c,f.y+d)&&(e=n.getValue(f.x+c,f.y+d),m.isEmpty(e)||h.push(e));j.audio.playSound("sfx_sparkle"),g.fire("status.tilegrid.blockremoved",i)},V=function(a){var c,d,e,f,h=b.get("forfeitButton");null===B?(B=a,B.select(),j.audio.playSound("sfx_button")):B===a?(B.unselect(),B=null,j.audio.playSound("sfx_button")):B.getName()===a.getName()?(B.unselect(),B=a,B.select(),j.audio.playSound("sfx_button")):(h&&b.remove(h),c=B.getPosition().clone(),d=a.getPosition().clone(),e=E(B,B.getPosition()),f=E(a,a.getPosition()),n.set(e.x,e.y,a),n.set(f.x,f.y,B),a.animateToPosition(c,null,Linear.easeOut),B.animateToPosition(d,null,Linear.easeOut),B.unselect(),B=null,g.fire("status.tilegrid.swappedtiles"),x=$.CLICK_TO_REMOVE_GROUP,$.checkContinue(),j.audio.playSound("sfx_woosh")),q=!1},W=function(a){!q&&y&&(q=!0,x===$.CLICK_TO_REMOVE_GROUP?T(a):x===$.CLICK_TO_REMOVE_BLOCK?U(a):x===$.CLICK_TO_SWITCH_TILES&&V(a))},X=function(a){x=a,B&&B.unselect(),B=null},Y=function(a){m.isBoolean(a)&&(y=a)},Z=function(a){z=!0,N(function(){O(function(){m.isFunction(a)&&a(),z=!1})})},$={CLICK_TO_REMOVE_GROUP:0,CLICK_TO_REMOVE_BLOCK:1,CLICK_TO_SWITCH_TILES:2,init:function(){g.on("status.tile.clicked",W),g.on("command.tilegrid.create",H),g.on("command.tilegrid.shuffle",M),g.on("command.tilegrid.onclick",X),g.on("command.tilegrid.activate",Y),g.fire("status.tilegrid.initialized",this)},destroy:function(){g.off("status.tile.clicked",W),g.off("command.tilegrid.create",H),g.off("command.tilegrid.shuffle",M),g.off("command.tilegrid.onclick",X),g.off("command.tilegrid.activate",Y),A.destroy()},destruct:function(a){G(a)},setup:function(a){if(m.isUndefined(a.dimension))throw"A tilegrid needs a dimension";o=a.dimension,m.isDefined(a.animated)&&a.animated===!1&&(u=!1),m.isDefined(a.progressLevel)&&m.isBoolean(a.progressLevel)&&(C=a.progressLevel),p=h(),p.setup({multipliers:{0:2,1:2,2:2,3:2,4:3,5:3,6:3,7:4,8:4,9:4,10:5,11:5,12:5,13:6,14:6,15:6,16:7,17:7,18:7,19:8,max:19}}),H()},setBoundary:function(a){m.isVector(a)&&(s=a)},getBoundary:function(){return s},setName:function(a){e=a},getName:function(){return e},setID:function(a){f=a},getID:function(){return f},getGrid:function(){return n},isActive:function(){return z?y:y},getRandomTile:function(a){L(function(b){var c=n.getValue(b.x,b.y);m.isDefined(c)&&a(c)})},unsetGridPosition:function(a){var b=E(a,a.originalPosition||a.getPosition());n.unset(b.x,b.y)},setGridPosition:function(a){var b=E(a,a.originalPosition||a.getPosition());n.set(b.x,b.y,a)},compact:function(a){Z(a)},getNeighbours:function(a,b){var c,d,e,f=[],g=["north","south","east","west"],h=E(a,a.originalPosition||a.getPosition());for(c=0;4>c;++c){if(e=g[c],m.isDefined(e))switch(e){case"north":d=n.getValue(h.x,h.y-1);break;case"east":d=n.getValue(h.x+1,h.y);break;case"south":d=n.getValue(h.x,h.y+1);break;case"west":d=n.getValue(h.x-1,h.y)}if(m.isDefined(d)&&null!==d&&f.push(d),f.length===b)break}return b?f.slice(0,b):f},setDirty:function(a){m.isBoolean(a)&&(w=a)},isDirty:function(){return w},gridToWorld:function(a,b){return D(a,b)},worldToGrid:function(a,b){return E(a,b)},getTiles:function(){var a=[];return n.iterate(function(b,c,d){m.isDefined(d)&&null!==d&&a.push(d)}),a},checkContinue:function(){J()||j.state.popups.levelEnd!==!1||P()},movesLeft:function(){return J()},unselect:function(){B&&B.unselect(),B=null},freeAll:function(){var a,b=[];n.iterate(function(c,d,e){e&&(a=e,b.push(e),e.getType=function(){return"blocker"})}),S(a,b)}};return $}}),devgru.module.create("module/gui/floater",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/scalable","devgru/component/spritable","devgru/event/system","object/gui/textbox","object/gui/scoreindicator","utils"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=(a.sugar,l.constants);return function(){var a=function(a){var f,i=a.type||"small",k=a.position||e(0,0),o=a.score||0,p="score",q=d(h,g).add({init:function(){var a;this.spritable.setup({image:c.getAsset("fontShine")}),a=this.getDimension(),this.setOrigin(e(a.width/2,3*a.height/4))}}),r=function(){f=j({font:"big_bottom_cartoonregular",align:"center",textBaseline:"middle",margin:e(10,70),lineWidth:1,fontColor:"#ffffff",strokeStyle:"#0000ff",fontSize:50,ySpacing:30}),f.z=m.layers.FLOATER,"small"===i&&(f.setPosition(k),f.setText("+"+o,{fontColor:"#ffffff",strokeStyle:"#0000ff",fontSize:60,lineWidth:4})),"medium"===i&&(f.setPosition(k),f.setText("+"+o,{fontSize:80,gradient:"top-down",gradientColors:["#00FEDA","#00E8FF","#004299"],strokeStyle:["#ffffff","#210073","#01FFFF"],lineWidth:[10,4,2],innerStroke:[!1,!1,!0]})),"large"===i&&(f.setPosition(k),f.setText("+"+o,{fontSize:100,gradient:"top-down",gradientColors:["#ff8a2b","#fff000","#ffa200","#af3e00"],strokeStyle:["#ffffff","#670000","#FFF3B2"],lineWidth:[10,4,3],innerStroke:[!1,!1,!0],overlaySprite:q})),"great"===i&&(f.setPosition(e(320,240)),f.setText("Great!",{fontSize:80,gradient:"top-down",gradientColors:["#00FEDA","#00E8FF","#004299"],strokeStyle:["#ffffff","#210073","#01FFFF"],lineWidth:[10,4,2],innerStroke:[!1,!1,!0]}),p="message",l.audio.playSound("sfx_great")),"amazing"===i&&(f.setPosition(e(320,240)),f.setText("Amazing",{fontSize:100,gradient:"top-down",gradientColors:["#ff8a2b","#fff000","#ffa200","#af3e00"],strokeStyle:["#ffffff","#670000","#FFF3B2"],lineWidth:[10,4,3],innerStroke:[!1,!1,!0],overlaySprite:q}),p="message",l.audio.playSound("sfx_amazing")),"tutorial"===i&&(f.setPosition(e(300,340)),f.setText("Amazing",{fontSize:72,gradient:"top-down",gradientColors:["#ff8a2b","#fff000","#ffa200","#af3e00"],strokeStyle:["#ffffff","#670000","#FFF3B2"],lineWidth:[10,4,3],innerStroke:[!1,!1,!0],overlaySprite:q}),p="message",l.audio.playSound("sfx_great"))};r(),b.add(f,function(a){n(a,o,p)})},f=function(){b.remove(q)},n=function(a,c,d){var f=a.scalable.getScale(),g=a.getPosition(),h=a.getDimension(),j=3,l=k;if(g.x-h.width/2<0&&(g.x-=g.x-h.width/2),g.x+h.width/2>b.canvas.getDimension().width&&(g.x-=g.x+h.width/2-b.canvas.getDimension().width),"score"===d)if(1===j){var m=.9;TweenLite.to(g,m,{x:g.x,y:g.y-160}),a.scalable.setScale(e(.5,.5)),TweenLite.to(f,m,{x:.8,y:.8,ease:Linear.easeOut,onComplete:function(){TweenMax.to(g,1.2,{bezier:[{x:g.x+(l.getPosition().x-g.x)/2,y:g.y+50},{x:l.getPosition().x,y:l.getPosition().y}],ease:Power2.easeIn,onComplete:function(){b.remove(a,function(){i.fire("command.score.add",c)})}}),TweenLite.to(f,1.2,{x:.5,y:.5,ease:Linear.easeOut})}})}else 2===j?(g.y-=160,a.scalable.setScale(e(0,0)),TweenLite.to(f,1,{x:.8,y:.8,ease:Elastic.easeOut,onComplete:function(){TweenMax.to(g,1.2,{bezier:[{x:g.x+(l.getPosition().x-g.x)/2,y:g.y+50},{x:l.getPosition().x,y:l.getPosition().y}],ease:Power2.easeInOut,onComplete:function(){b.remove(a,function(){i.fire("command.score.add",c)})}}),TweenLite.to(f,1.2,{x:.1,y:.1,ease:Power2.easeInOut})}})):3===j&&(g.y-=80,a.scalable.setScale(e(.4,.4)),TweenLite.to({},1,{onComplete:function(){a.fadable.setFadeSpeed(4),a.fadable.fadeOut(function(){b.remove(a,function(){},0)})}}),i.fire("command.score.add",c));"message"===d&&(a.scalable.setScale(e(0,0)),TweenLite.to(f,1,{x:1,y:1,ease:Elastic.easeOut,onComplete:function(){a.fadable.setFadeSpeed(4),a.fadable.fadeOut(function(){b.remove(a)})}}))},o=function(){i.on("command.floater.create",a),i.on("command.floater.remove",f)},p=function(){i.off("command.floater.create",a),i.off("command.floater.remove",f)},q=d().add({init:function(){o()},destroy:function(){p()}});return q}}),devgru.module.create("module/gui/forfeitbutton",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/spritable","devgru/component/scalable","object/gui/clickbutton","object/gui/togglebutton","devgru/event/system","object/gui/textbox","module/game/audiomanager","module/game/savestatemanager","module/game/apimanager","utils","object/gui/targetindicator","module/gui/speechbubble"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=(a.sugar,p.constants);return function(a){var d=null,f=r({string:"",flipped:!0}),g=i({image:c.getAsset("buttonForfeit"),animation:{frameCount:2,animations:{normal:{fps:3,startFrame:0,endFrame:1},down:{startFrame:1,endFrame:1}}},callback:function(){b.remove(g),a()}});g.add({destroy:function(){k.fire("command.powerupbar.glow",!1),k.fire("command.powerupbar.unselect"),b.remove(f)}}),g.setName("forfeitButton"),g.z=s.layers.FORFEIT_BUTTON,g.setPosition(e(600,575)),d=b.get("forfeitButton"),d&&b.remove(d),f.setText(q.getMet()>=q.getTarget()?"Use your power ups to get a higher score, or click the flag to continue!":"There are not enough animals in the barn! Use your power ups or click the flag to give up."),f.setPosition(e(560,900)),b.add(f),k.fire("command.powerupbar.glow",!0),b.add(g)}}),devgru.module.create("module/gui/popup",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/spritable","devgru/component/scalable","object/gui/clickbutton","object/gui/togglebutton","devgru/event/system","object/gui/textbox","module/game/audiomanager","module/game/savestatemanager","module/game/apimanager","utils","module/gui/popups/endscreen","module/gui/popups/pausescreen","module/gui/popups/howtoplayscreen","module/gui/popups/dialogscreen","module/gui/popups/powerupscreen"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=a.sugar,w=p.constants;return function(){var a,f=b.canvas.getDimension(),h=e(f.width/2,f.height/2),j=function(b,c,d){a.getChildren().length=0,q(a,z,b,c,d.score,d.bonus,d.penalty,d.winState,d.buttonText)},m=function(b,f,h,j,k){var m,n,o,p,q,r,s,t,j;m=d(g).add({init:function(){var a;this.spritable.setup({position:e(0,0),image:c.getAsset("popup")}),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),a.addChild(m),n=m.getDimension(),o=d(g).add({init:function(){var a;this.spritable.setup({image:c.getAsset("clothMedium")}),this.setPosition(e(0,16)),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),m.addChild(o),p=o.getDimension(),v.isDefined(b)&&(r=l({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#2B65EC",margin:e(0,4),fontSize:30,text:b}),r.setPosition(e(0,-n.height/2+40)),m.addChild(r)),v.isDefined(f)&&(s=l({font:"heuristicabold",align:"center",fontColor:"#71565e",margin:e(0,4),fontSize:23,maxWidth:320,maxHeight:195,text:f}),s.setPosition(e(0,-p.height/2+40)),o.addChild(s)),v.isDefined(k)&&(t=l({font:"heuristicabold",align:"left",fontColor:"#71565e",margin:e(0,4),fontSize:21,maxWidth:320,maxHeight:200,text:k}),t.setPosition(e(-p.width+315,-p.height+390)),o.addChild(t)),q=i({label:j||"Next",align:"center",image:c.getAsset("button"),position:e(0,p.height/2-70),callback:function(){z(h),this.enable(!1)}}),q.setName("nextButton"),o.addChild(q)},n=function(b){s(a,z,b)},o=function(b,c,d){r(a,z,b,c,d)},p=function(b,c){t(a,z,b,c)},x=function(c){c.popup=a,c.animateOut=z,c.skip=function(c){a.add({update:function(){b.remove(a)}}),v.isDefined(c)&&c()},u(c)},y=function(){h=e(f.width/2,f.height/2),TweenLite.to(a.getPosition(),1,{x:h.x,y:h.y,ease:Back.easeOut,onComplete:function(){a.setPosition(h),k.fire("status.popup.animatedin")}})},z=function(c){h=e(f.width/2,3*f.height/2),TweenLite.to(a.getPosition(),1,{x:h.x,y:h.y,ease:Back.easeIn,onComplete:function(){b.remove(a),v.isDefined(c)&&c()}})},A=function(b){if(a.setPosition(e(f.width/2,-f.height/2)),!v.isDefined(b.type))throw"Popup type is not defined";b.type===a.TYPE_LEVEL_END?j(b.title,b.onHide,b):b.type===a.TYPE_HOW_TO_PLAY?n(b.onHide):b.type===a.TYPE_PAUSE?o(b.onHide,b.onHowToPlay,b.onMainMenu):b.type===a.TYPE_ARE_YOU_SURE?p(b.onYes,b.onNo):b.type===a.TYPE_LEVEL_END_CUSTOM?m(b.title,b.text,b.onHide,b.buttonText,b.score):b.type===a.TYPE_POWERUP_SELECT&&x(b),y()},B=function(a){z(a)};return a=d().add({TYPE_LEVEL_END:0,TYPE_HOW_TO_PLAY:1,TYPE_PAUSE:2,TYPE_ARE_YOU_SURE:3,TYPE_LEVEL_END_CUSTOM:4,TYPE_POWERUP_SELECT:5,show:function(c){A(c),b.add(a)},hide:function(a){B(a)}}),a.z=w.layers.POPUP,a.updateWhenPaused=!0,a}}),devgru.module.create("module/gui/popups/dialogscreen",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/spritable","devgru/component/scalable","object/gui/clickbutton","object/gui/togglebutton","devgru/event/system","object/gui/textbox","module/game/audiomanager","module/game/savestatemanager","module/game/apimanager","utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){a.sugar,p.constants;return function(a,b,f,h){var j,k,m,n,o,p,q,r,s,t=function(){o.enable(!1),p.enable(!1),q.enable(!1)};j=d(g).add({init:function(){var a;this.spritable.setup({position:e(0,0),image:c.getAsset("popupX")}),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),a.addChild(j),k=j.getDimension(),m=d(g).add({init:function(){var a;this.spritable.setup({image:c.getAsset("clothMedium")}),this.setPosition(e(0,16)),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),j.addChild(m),n=m.getDimension(),r=l({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#2B65EC",margin:e(0,4),fontSize:30,text:"Quit"}),r.setPosition(e(0,-k.height/2+40)),j.addChild(r),o=i({label:"Yes",align:"center",image:c.getAsset("buttonSmall"),position:e(-88,n.height/2-68),callback:function(){b(f),t()}}),o.setName("yesButton"),m.addChild(o),p=i({label:"No",align:"center",image:c.getAsset("buttonSmall"),position:e(88,n.height/2-68),callback:function(){b(h),t()}}),p.setName("noButton"),m.addChild(p),q=i({image:c.getAsset("buttonClose"),position:e(n.width/2+22,-n.height/2-26),callback:function(){b(h),t()}}),q.setName("XButton"),m.addChild(q),s=l({font:"heuristicabold",align:"center",fontColor:"#71565e",margin:e(0,4),fontSize:32,text:"Are you sure you want to quit?",textBaseline:"middle",maxWidth:300}),s.setPosition(e(0,-16)),m.addChild(s)}}),devgru.module.create("module/gui/popups/endscreen",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/spritable","devgru/component/scalable","devgru/component/fadable","devgru/component/rotatable","object/gui/clickbutton","object/gui/togglebutton","devgru/event/system","object/gui/textbox","module/game/audiomanager","module/game/savestatemanager","module/game/apimanager","utils","object/gui/counter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";var t=a.sugar,u=r.constants;return function(a,f,l,o,v,w,x,y,z){var A,B,C,D,E,F,G,H,I,z,J,K,L,M,N,O,P,Q=0,R=function(){N=n({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#FEF882",margin:e(0,20),fontSize:72,gradient:"top-down",gradientColors:["#FBF584","#FDB000","#C14900"],strokeStyle:["#170042","#FBF584"],lineWidth:[4,2],innerStroke:[!1,!0],text:"Level Bonus\n+"+w}),N.setPosition(e(320,349)),N.scalable.setScale(e(.75,.75)),N.fadable.setFadeSpeed(1),N.fadable.fadeIn(),TweenLite.to(N.scalable.getScale(),1,{x:1,y:1,onComplete:function(){var c=a.getPosition().clone();c.y+=Q+32,TweenMax.to(N.getPosition(),.25,{x:c.x,y:c.y,ease:Power1.easeOut,onComplete:function(){b.remove(N),S()}}),TweenLite.to(N.scalable.getScale(),.25,{ease:Power1.easeOut,x:0,y:0})}}),N.z=u.layers.POPUP+1,b.add(N)},S=function(){var a=1,b=v+w;b>=60&&(a=b/60),K.add({update:function(c){this.getValue()<b?this.setValue(this.getValue()+Math.ceil(a*c.deltaT*60)):(this.setValue(b),this.update=this.base.update,x>0?V():T()),this.base.update(c)}})},T=function(){N=n({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#FEF882",margin:e(0,20),fontSize:72,gradient:"top-down",gradientColors:["#FBF584","#FDB000","#C14900"],strokeStyle:["#170042","#FBF584"],lineWidth:[4,2],innerStroke:[!1,!0],text:"Perfect bonus\n+"+2*w}),N.setPosition(e(320,349)),N.scalable.setScale(e(.75,.75)),N.fadable.setFadeSpeed(1),N.fadable.fadeIn(),TweenLite.to(N.scalable.getScale(),1,{x:1,y:1,onComplete:function(){var c=a.getPosition().clone();c.y+=Q+32,TweenMax.to(N.getPosition(),.25,{ease:Power1.easeOut,x:c.x,y:c.y,onComplete:function(){b.remove(N),U()}}),TweenLite.to(N.scalable.getScale(),.25,{ease:Power1.easeOut,x:0,y:0})}}),N.z=u.layers.POPUP+1,b.add(N)},U=function(){var a=1,b=v+3*w;b>=60&&(a=b/60*1),K.add({update:function(c){this.getValue()<b?this.setValue(this.getValue()+Math.ceil(a*c.deltaT*60)):(this.setValue(b),this.update=this.base.update,X()),this.base.update(c)}})},V=function(){N=n({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#FEF882",margin:e(0,20),fontSize:72,gradient:"top-down",gradientColors:["#FC8571","#EF0000","#C00020"],strokeStyle:["#000043","#FF825E"],lineWidth:[4,2],innerStroke:[!1,!0],text:"Animals left\n-"+x}),N.setPosition(e(320,349)),N.scalable.setScale(e(.75,.75)),N.fadable.setFadeSpeed(1),N.fadable.fadeIn(),TweenLite.to(N.scalable.getScale(),1,{x:1,y:1,onComplete:function(){var c=a.getPosition().clone();c.y+=Q+32,TweenMax.to(N.getPosition(),.25,{ease:Power1.easeOut,x:c.x,y:c.y,onComplete:function(){b.remove(N),W()}}),TweenLite.to(N.scalable.getScale(),.25,{ease:Power1.easeOut,x:0,y:0})}}),N.z=u.layers.POPUP+1,b.add(N)},W=function(){var a=2,b=v+w-x;b>=60&&(a=b/60*2),K.add({update:function(c){this.getValue()>Math.max(0,b)?this.setValue(this.getValue()-Math.round(a*c.deltaT*60)):(this.setValue(Math.max(0,b)),this.update=this.base.update,X()),this.base.update(c)}})},X=function(){if(0===y)Y();else{var a=function(a,b){O.addChild(d(g,j).add({init:function(){var d;this.spritable.setup({image:c.getAsset("dustCloudSmall")}),d=this.getDimension(),this.setPosition(a),this.setOrigin(e(d.width/2,d.height/2)),this.rotatable.setAngleDegree(b)}}))};P=d(g,h,i).add({basePos:e(0,0),shakePos:e(0,0),timer:0,init:function(){var a;this.spritable.setup({image:c.getAsset(1===y?"winSilver":"winGold")}),a=this.getDimension(),this.basePos=e(0,-a.height/2),this.setOrigin(e(a.width/2,a.height/2)),this.scalable.setScale(e(3,3)),this.fadable.fadeIn(),this.fadable.setFadeSpeed(.75),r.audio.playSound("sfx_woosh")},update:function(a){this.timer>0?(this.timer-=60*a.deltaT,this.shakePos.x=16*(Math.random()-.5)*this.timer/20,this.shakePos.y=16*(Math.random()-.5)*this.timer/20):(this.shakePos.x=0,this.shakePos.y=0),this.setPosition(e(0,0).add(this.shakePos).add(this.basePos)),this.base.update(a)},shake:function(){this.timer=20}}),O=d(h,i).add({visible:!1,scale:1,update:function(a){this.visible&&(this.scalable.setScale(e(this.scale,this.scale)),this.scale+=.001*a.deltaT*60,this.base.update(a))}}),C.addChild(O),C.addChild(P),TweenLite.to(P.scalable.getScale(),.5,{ease:Quad.easeIn,x:1,y:1,onComplete:function(){r.audio.playSound("sfx_hit"),O.visible=!0,O.setPosition(P.getPosition()),a(e(-162,-75),-45),a(e(-162,75),-135),a(e(162,-75),45),a(e(162,75),135),O.fadable.fadeOut(),O.fadable.setFadeSpeed(.75),P.shake(),Y(),r.audio.playSound(1===y?"sfx_great":"sfx_amazing")}})}},Y=function(){var a=K.getValue();Math.max(0,a)>p.load("highscore",0)&&(p.save("highscore",a),I.setText(a.toString()),y>0&&t.setAnimationFrameTimeout(function(){P.addChild(d(g,h,i).add({init:function(){var a,b;this.spritable.setup({image:c.getAsset("newHighScore")}),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2)),this.setPosition(e(-3,-7)),this.fadable.fadeIn(),this.scalable.setScale(e(2,2)),this.scalable.setTarget(e(1,1)),b=n({font:"heuristicabold",align:"center",fontColor:"#71565e",margin:e(0,4),fontSize:28,maxWidth:224,maxHeight:32,text:"New highscore!"}),b.setPosition(e(0,24)),this.addChild(b)}}))},1e3)),C.addChild(E),C.addChild(J),m.off("status.popup.animatedin",R)};A=d(g).add({init:function(){var a;this.spritable.setup({position:e(0,0),image:c.getAsset("popupLarge")}),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),a.addChild(A),B=A.getDimension(),t.isDefined(l)&&(F=n({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#2B65EC",margin:e(0,4),fontSize:30,text:l}),F.setPosition(e(0,-B.height/2+40)),A.addChild(F)),C=d(g).add({init:function(){var a;
this.spritable.setup({image:c.getAsset("clothLarge")}),this.setPosition(e(0,16)),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),A.addChild(C),D=C.getDimension(),E=k({label:z,image:c.getAsset("buttonMedium"),position:e(75,D.height/2-70),callback:function(){f(o),this.enable(!1)}}),E.setName("nextButton"),J=k({label:"",align:"center",image:c.getAsset("buttonSmall"),fontSize:25,margin:e(0,6),position:e(-120,D.height/2-70),callback:function(){q.openMoreGames()}}),J.setName("moreButton"),Q=0===y?50:32,G=n({font:"heuristicabold",align:"left",fontColor:"#71565e",margin:e(0,4),fontSize:28,maxWidth:320,maxHeight:200,text:"Score"}),G.setOrigin(e(G.getDimension().width/2,G.getDimension().height)),G.setPosition(e(0,8+Q)),C.addChild(G),K=s({image:c.getAsset("scoreFont"),align:"center",spacing:e(-14,0),value:v}),K.setPosition(e(0,8+Q)),C.addChild(K),H=n({font:"heuristicabold",align:"right",textBaseline:"bottom",fontColor:"#71565e",margin:e(0,4),fontSize:28,maxWidth:320,maxHeight:200,text:"Best: "}),H.setPosition(e(0,128+Q)),C.addChild(H),I=n({font:"heuristicabold",align:"left",textBaseline:"bottom",fontColor:"#49009F",margin:e(0,4),fontSize:28,maxWidth:320,maxHeight:200,text:p.load("highscore",0).toString()}),I.setPosition(e(0,128+Q)),C.addChild(I),y>0?(L=d(g).add({init:function(){var a;this.spritable.setup({image:c.getAsset("winUnderlay")}),a=this.getDimension(),this.setPosition(e(0,-a.height/2)),this.setOrigin(e(a.width/2,a.height/2))}}),C.addChild(L)):(M=d(g).add({init:function(){var a;this.spritable.setup({image:c.getAsset("lose")}),a=this.getDimension(),this.setPosition(e(0,-a.height/2)),this.setOrigin(e(a.width/2,a.height/2))}}),C.addChild(M)),m.on("status.popup.animatedin",R)}}),devgru.module.create("module/gui/popups/howtoplayscreen",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/spritable","devgru/component/scalable","object/gui/clickbutton","object/gui/togglebutton","devgru/event/system","object/gui/textbox","module/game/audiomanager","module/game/savestatemanager","module/game/apimanager","utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){a.sugar,p.constants;return function(a,b,f){var h,j,k,m,n,o,p,q,r,s,t,u,v,w=2,x=0,y=function(){0===x?(u.visible=!0,v.visible=!1,s.setText("Welcome to Barnyard Scramble!\n\nAll of your animals are mixed up in the field and you must get them back into the barn. They will only go in groups of 3 or more of the same type."),u.setPosition(e(0,s.getPosition().y+s.getDimension().height)),t.setText("Here is a group of pigs which should be cleared"),t.setPosition(e(0,u.getPosition().y+u.getDimension().height+20))):1===x&&(u.visible=!1,v.visible=!0,s.setText("The level is over when there are no more groups of 3 or more. If there are more than 10 animals left in the field, your farm will lose too much money and you will fail the level!"),v.setPosition(e(0,s.getPosition().y+s.getDimension().height)),t.setText("Good luck!"),t.setPosition(e(0,v.getPosition().y+v.getDimension().height+20))),q.visible=!0,r.visible=!0,0===x&&(q.visible=!0,r.visible=!1),x===w-1&&(q.visible=!1,r.visible=!0),n.setText("How to play "+(x+1)+"/"+w)};h=d(g).add({init:function(){var a;this.spritable.setup({position:e(0,0),image:c.getAsset("popupLargeX")}),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),a.addChild(h),j=h.getDimension(),n=l({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#2B65EC",margin:e(0,4),fontSize:30,text:"How to play"}),n.setPosition(e(0,-j.height/2+40)),h.addChild(n),k=d(g).add({init:function(){var a;this.spritable.setup({image:c.getAsset("clothLarge")}),this.setPosition(e(0,16)),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),h.addChild(k),m=k.getDimension(),r=i({image:c.getAsset("buttonLeft"),position:e(-m.height/2+128,m.height/2-80),callback:function(){x>0&&--x,y()}}),r.setName("prevButton"),r.add({visible:!0,draw:function(a){this.visible&&this.base.draw(a)}}),k.addChild(r),q=i({image:c.getAsset("buttonRight"),position:e(m.height/2-128,m.height/2-80),callback:function(){w-1>x&&++x,y()}}),q.setName("nextButton"),q.add({visible:!0,draw:function(a){this.visible&&this.base.draw(a)}}),k.addChild(q),o=i({label:"Close",align:"center",image:c.getAsset("buttonSmall"),position:e(0,m.height/2-80),callback:function(){b(f),this.enable(!1),q.enable(!1),r.enable(!1),p.enable(!1)}}),o.setName("button"),k.addChild(o),p=i({image:c.getAsset("buttonClose"),position:e(m.width/2+26,-m.height/2-21),callback:function(){b(f),this.enable(!1),o.enable(!1),q.enable(!1),r.enable(!1)}}),p.setName("XButton"),k.addChild(p),s=l({font:"heuristicabold",align:"center",fontColor:"#71565e",margin:e(0,4),fontSize:23,text:"",maxWidth:380,maxHeight:500}),s.setPosition(e(0,-m.height/2+42)),k.addChild(s),t=l({font:"heuristicabold",align:"center",fontColor:"#71565e",margin:e(0,4),fontSize:23,text:"",maxWidth:380}),t.setPosition(e(0,-m.height/2+42)),k.addChild(t),u=d(g).add({visible:!0,init:function(){var a;this.spritable.setup({image:c.getAsset("htp1")}),this.setPosition(e(0,16)),a=this.getDimension(),this.setOrigin(e(a.width/2,0))},draw:function(a){this.visible&&this.base.draw(a)}}),k.addChild(u),v=d(g).add({visible:!0,init:function(){var a;this.spritable.setup({image:c.getAsset("htp2")}),this.setPosition(e(0,-16)),a=this.getDimension(),this.setOrigin(e(a.width/2,0))},draw:function(a){this.visible&&this.base.draw(a)}}),k.addChild(v),x=0,y(x)}}),devgru.module.create("module/gui/popups/pausescreen",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/spritable","devgru/component/scalable","object/gui/clickbutton","object/gui/togglebutton","devgru/event/system","object/gui/textbox","module/game/audiomanager","module/game/savestatemanager","module/game/apimanager","utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){a.sugar,p.constants;return function(a,b,f,h,o){var p,q,r,s,t,u,v,w,x,y,z,A=80,B=function(){t.enable(!1),u.enable(!1),v.enable(!1),x.enable(!1),w.enable(!1),y.enable(!1)};k.fire("command.pausebutton.disable"),p=d(g).add({init:function(){var a;this.spritable.setup({position:e(0,0),image:c.getAsset("popupX")}),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),a.addChild(p),q=p.getDimension(),r=d(g).add({init:function(){var a;this.spritable.setup({image:c.getAsset("clothMedium")}),this.setPosition(e(0,16)),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),p.addChild(r),s=r.getDimension(),z=l({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#2B65EC",margin:e(0,4),fontSize:30,text:"Pause"}),z.setPosition(e(0,-q.height/2+40)),p.addChild(z),t=i({label:"Resume",align:"center",image:c.getAsset("button"),position:e(0,-40),callback:function(){b(f),B(),k.fire("command.pausebutton.enable")}}),t.setName("resumeButton"),r.addChild(t),y=i({image:c.getAsset("buttonClose"),position:e(s.width/2+22,-s.height/2-26),callback:function(){b(f),B(),k.fire("command.pausebutton.enable")}}),y.setName("XButton"),r.addChild(y),u=i({label:"How to play",align:"center",image:c.getAsset("button"),position:e(0,t.getPosition().y+A),callback:function(){b(h),B()}}),u.setName("howToPlayButton"),r.addChild(u),v=i({label:"Main menu",align:"center",image:c.getAsset("button"),position:e(0,t.getPosition().y+2*A),callback:function(){b(o),B()}}),v.setName("mainMenuButton"),r.addChild(v),x=j({toggled:n.load("muteMusic",!1),image:c.getAsset("musicToggle"),position:e(-64,-s.height/2+80),callback:function(){m.muteMusic(this.isToggled(),!0),n.save("muteMusic",this.isToggled())}}),x.setName("musicToggle"),r.addChild(x),w=j({toggled:n.load("muteSound",!1),position:e(64,-s.height/2+80),image:c.getAsset("soundToggle"),callback:function(){m.muteSound(this.isToggled()),n.save("muteSound",this.isToggled())}}),w.setName("soundToggle"),r.addChild(w)}}),devgru.module.create("module/gui/popups/powerupscreen",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/spritable","devgru/component/animatable","devgru/component/clickable","devgru/component/scalable","object/gui/clickbutton","object/gui/togglebutton","devgru/event/system","object/gui/textbox","module/game/audiomanager","module/game/savestatemanager","module/game/apimanager","utils","object/gui/levelindicator"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){{var t=a.sugar;r.constants}return function(a){var b,f,j,l,o,p,q,u,v=a.popup,w=a.animateOut,x=d(),y={total:0},z=0,A=function(){o.enable(!1),p.enable(!1)},B=function(){t.isDefined(u)&&(A(),m.fire("command.powerups.increment."+u,1),w(a.onHide))},C=function(a){t.isDefined(q)&&j.removeChild(q),q=n({font:"heuristicabold",align:"center",fontColor:"#71565e",margin:e(0,4),fontSize:26,text:a,maxWidth:330,maxHeight:330}),q.name="powerupDescription",q.setPosition(e(0,-100)),j.addChild(q)},D=[],E=function(a){u=a,r.audio.playSound("sfx_select")},F=function(){var a=0,b=D.length;for(a;b>a;++a)D[a].selected=!1},G=function(a){var b,f=d(h).add({init:function(){this.animatable.setup({image:c.getAsset("antTrail"),animation:{frameCount:4,animations:{normal:{fps:10,startFrame:0,endFrame:3}}}}),this.animatable.setAnimation("normal"),this.setPosition(e(5,5))},draw:function(a){k.selected&&this.base.draw(a)}}),j=15,k=d(g,i).add({selected:!1,init:function(){this.spritable.setup({image:c.getAsset(a.icon)}),b=this.getDimension(),this.setPosition(e((b.width+j)*D.length,-230)),k.addChild(f)},onClickDown:function(){F(),E(a.type),this.selected=!0,C(a.description)}});x.addChild(k),D.push(k),x.getPosition().x=-((b.width+j)*D.length)/2+j/2,++z};b=d(g).add({init:function(){var a;this.spritable.setup({position:e(0,0),image:c.getAsset("popupLargeX")}),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),v.addChild(b),f=b.getDimension(),j=d(g).add({init:function(){var a;this.spritable.setup({image:c.getAsset("clothLarge")}),this.setPosition(e(0,16)),a=this.getDimension(),this.setOrigin(e(a.width/2,a.height/2))}}),b.addChild(j),l=j.getDimension(),j.addChild(x),title=n({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#2B65EC",margin:e(0,4),fontSize:30,text:"Select a powerup!"}),title.setPosition(e(0,-f.height/2+40)),b.addChild(title),o=k({label:"Select",align:"center",image:c.getAsset("buttonMedium"),position:e(0,l.height/2-68),callback:function(){B()}}),o.setName("selectButton"),j.addChild(o),p=k({image:c.getAsset("buttonClose"),position:e(l.width/2+25,-l.height/2-20),callback:function(){w(a.onHide),A()}}),p.setName("XButton"),j.addChild(p),m.fire("command.powerupbar.count",y),y.shuffle<r.maxPowerups.SHUFFLE&&G({type:"shuffle",icon:"iconShuffleSelect",description:"Your helpful dog will round up all the animals and move them to a different position in the field"}),y.switcheroo<r.maxPowerups.SWITCHEROO&&G({type:"switcheroo",icon:"iconSwitcherooSelect",description:"Select one animal in the field, then select any another that you would like to swap it with. The animals will change positions. If you select the wrong animal, just click it again to deselect it!"}),y.treat<r.maxPowerups.TREAT&&G({type:"treat",icon:"iconTreatSelect",description:"Click on an animal or position in the field and all animals surrounding it will be taken to the barn."}),y.eds<r.maxPowerups.EDS&&s.getLevel()%5===0&&G({type:"eds",icon:"iconEDSSelect",description:"Prevent those pesky aliens from interfering with your animals by using this Extraterrestrial Defense Shield."}),C("Click on a power-up to see what it does, press select when you have chosen the perfect power-up!"),0===z&&a.skip(a.onHide)}}),devgru.module.create("module/gui/speechbubble",["utils","devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/spritable","devgru/component/scalable","devgru/component/rotatable","devgru/component/fadable","object/gui/textbox"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=(b.sugar,a.constants);return function(a){var b=a.flipped||!1,g=a.lifeTime,n=330,o={degree:90},p=0,q=l({font:"heuristicabold",align:"left",fontColor:"#71565e",margin:f(0,4),fontSize:28,maxWidth:n,maxHeight:100,text:a.string}),r=e(h,i,j,k).add({z:m.layers.SPEECHBUBBLE,init:function(){this.spritable.setup({image:d.getAsset("speechBubbleSmall")}),this.setOrigin(f(77,182)),this.addChild(q),this.scalable.setScale(f(0,0)),TweenLite.to(this.scalable.getScale(),.75,{ease:Elastic.easeOut.config(1,1),x:b?-1:1,y:1}),TweenLite.to(o,.75,{ease:Elastic.easeOut.config(1,1),degree:0})},update:function(a){p+=a.deltaT,g&&p>g&&(this.fadable.setFadeSpeed(2),this.fadable.fadeOut(function(){c.remove(r)}),g=null),this.rotatable.setAngleDegree(o.degree),q.scalable.setScale(f(b?-1:1,1)),q.setPosition(f(-30+b*n,-144)),this.base.update(a)},setText:function(a){q.setText(a)}});return r.setName("speechBubble"),r}}),devgru.module.create("object/game/barn",["devgru/loader","devgru/baseobject","devgru/math/vector","devgru/component/spritable"],function(a,b,c,d){return function(e){var e=e||"back",f=b(d).add({init:function(){this.spritable.setup({position:c(544,650),image:a.getAsset("barnBackground")})},draw:function(a,b,c){this.base.draw(a,b,c)}}),g=b(d).add({init:function(){this.spritable.setup({position:c(544,610),image:a.getAsset("barnForeground")})},draw:function(a,b,c){this.base.draw(a,b,c)}});return"back"===e?f:g}}),devgru.module.create("object/game/chicken",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/animatable","devgru/component/scalable","devgru/component/movable","devgru/component/fadable","devgru/component/rotatable","object/game/tile","utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=a.sugar;return function(){var a,b=n.getRandom(10,50),e=n.getRandom(1,2),o=f(48,48),p=function(){return{frameCount:6,animations:{stand:{loopCount:b,fps:3,startFrame:0,endFrame:0,onComplete:function(){b=n.getRandom(5,100),q("move")}},scared:{loopCount:1,fps:1,startFrame:2,endFrame:2,onComplete:function(){e=n.getRandom(1,2),q("stand")}},terrified:{startFrame:2,endFrame:2},move:{loopCount:e,fps:3,startFrame:0,endFrame:1,onComplete:function(){e=n.getRandom(1,2),q("stand")}},run:{fps:7,startFrame:3,endFrame:4},beamed:{loopCount:20,fps:1,startFrame:5,endFrame:5}}}},q=function(a){r.animatable.setup({image:c.getAsset("chicken"),animation:p(a)}),r.animatable.setAnimation(a),o=r.animatable.getDimension()},r=d(g,h,i,j,k).add({setup:function(){q("stand"),r.setName("Chicken"),a="chicken"},getType:function(){return a},getDimension:function(){return o},playSound:function(){m.audio.playSound("sfx_chicken")}});return l(r),r}}),devgru.module.create("object/game/fence",["devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/spritable"],function(a,b,c,d,e,f){return function(){var a=!1,e=c(f).add({init:function(){a||(a=!0,this.spritable.setup({position:d(8,85),image:b.getAsset("fence")}))}});return e}}),devgru.module.create("object/game/grass",["devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/spritable"],function(a,b,c,d,e,f){return function(){var a=c(f).add({init:function(){this.spritable.setup({position:d(0,0),image:b.getAsset("grassBackground")})}});return a}}),devgru.module.create("object/game/mutatedanimal",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/animatable","devgru/component/scalable","devgru/component/movable","devgru/component/fadable","devgru/component/rotatable","object/game/tile","utils"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=a.sugar;return function(){var a,b=m.getRandom(10,50),e=m.getRandom(1,2),n=f(48,48),o=function(){return{frameCount:7,animations:{stand:{loopCount:b,fps:3,startFrame:0,endFrame:0,onComplete:function(){var a="move"+m.getRandom(1,2);b=m.getRandom(5,20),p(a)}},scared:{loopCount:1,fps:1,startFrame:0,endFrame:0,onComplete:function(){e=m.getRandom(1,2),p("stand")}},move1:{loopCount:e,fps:3,startFrame:0,endFrame:1,onComplete:function(){e=m.getRandom(1,2),p("stand")}},move2:{loopCount:e,fps:3,startFrame:2,endFrame:4,onComplete:function(){e=m.getRandom(1,2),p("stand")}},run:{fps:6,startFrame:5,endFrame:6}}}},p=function(a){q.animatable.setup({image:c.getAsset("mutatedAnimal"),animation:o(a)}),q.animatable.setAnimation(a),n=q.animatable.getDimension()},q=d(g,h,i,j,k).add({setup:function(){p("stand"),q.setName("mutatedAnimal"),a="blocker"},getType:function(){return a},getDimension:function(){return n},playSound:function(){}});return l(q),q}}),devgru.module.create("object/game/pig",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/animatable","devgru/component/scalable","devgru/component/movable","devgru/component/fadable","devgru/component/rotatable","object/game/tile","utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=a.sugar;return function(){var a,b=n.getRandom(10,50),e=n.getRandom(1,2),o=f(48,48),p=function(){return{frameCount:7,animations:{stand:{loopCount:b,fps:3,startFrame:0,endFrame:0,onComplete:function(){b=n.getRandom(5,100),q("move")}},scared:{loopCount:1,fps:1,startFrame:3,endFrame:3,onComplete:function(){e=n.getRandom(1,2),q("stand")}},terrified:{startFrame:3,endFrame:3},move:{loopCount:e,fps:3,startFrame:0,endFrame:2,onComplete:function(){e=n.getRandom(1,2),q("stand")}},run:{fps:6,startFrame:4,endFrame:5},beamed:{loopCount:20,fps:1,startFrame:6,endFrame:6}}}},q=function(a){r.animatable.setup({image:c.getAsset("pig"),animation:p(a)}),r.animatable.setAnimation(a),o=r.animatable.getDimension()},r=d(g,h,i,j,k).add({setup:function(){q("stand"),r.setName("Pig"),a="pig"},getType:function(){return a},getDimension:function(){return o},playSound:function(){m.audio.playSound("sfx_pig")}});return l(r),r}}),devgru.module.create("object/game/sheep",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/animatable","devgru/component/scalable","devgru/component/movable","devgru/component/fadable","devgru/component/rotatable","object/game/tile","utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=a.sugar;return function(){var a,b=n.getRandom(10,50),e=n.getRandom(1,3),o=f(48,48),p=function(){return{frameCount:8,animations:{stand:{loopCount:b,fps:3,startFrame:0,endFrame:0,onComplete:function(){b=n.getRandom(5,100),q("move")}},scared:{loopCount:1,fps:1,startFrame:4,endFrame:4,onComplete:function(){e=n.getRandom(1,3),q("stand")}},terrified:{startFrame:4,endFrame:4},move:{loopCount:e,fps:3,startFrame:1,endFrame:3,onComplete:function(){e=n.getRandom(1,3),q("stand")}},run:{fps:7,startFrame:5,endFrame:6},beamed:{loopCount:20,fps:1,startFrame:7,endFrame:7}}}},q=function(a){r.animatable.setup({image:c.getAsset("sheep"),animation:p(a)}),r.animatable.setAnimation(a),o=r.animatable.getDimension()},r=d(g,h,i,j,k).add({setup:function(){q("stand"),r.setName("Sheep"),a="sheep"},getType:function(){return a},getDimension:function(){return o},playSound:function(){m.audio.playSound("sfx_sheep")}});return l(r),r}}),devgru.module.create("object/game/tile",["devgru","devgru/game","devgru/loader","devgru/math/vector","devgru/baseobject","devgru/math/dimension","devgru/event/system","utils","devgru/component/spritable","devgru/component/rotatable"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=a.sugar,l=h.constants,m=!1;return function(a){var f,h,n=!1,o=!1,p=!1,q=function(){n=!0,a.scalable.setScale(d(0,0)),a.scalable.setTarget(d(1,1))},r=function(){a.fadable.setFadeSpeed(2.5)},s=function(){p=!1,b.remove(a)};return a.add({init:function(){g.fire("status.tile.initialized",this),g.on("command.tile.remove",s),g.on("command.tile.unselect",this.unselect)},destroy:function(){g.off("command.tile.remove",s),g.off("command.tile.unselect",this.unselect)},setup:function(a){var b;return this.base.setup(),k.isDefined(a)&&(k.isDefined(a.scale)&&a.scale===!0&&k.isDefined(this.scalable)&&q(),k.isDefined(a.fade)&&a.fade===!0&&k.isDefined(this.fadable)&&r()),b=this.getDimension(),this.setOrigin(d(b.width/2,b.height/2)),f=this.getPosition(),this.z=l.layers.TILE,this},pointerDown:function(a){n===!1&&o===!1&&m===!1&&this.animatable.getBoundingBox().hasPosition(a.position)&&g.fire("status.tile.clicked",this)},update:function(a){this.base.update(a),n&&this.scalable.atTarget()&&(n=!1),o&&this.scalable.atTarget()&&(h(),o=!1),p&&(this.z=l.layers.FREED+f.y,this.movable.atTarget()&&(p=!1,b.remove(this)))},setTilePosition:function(b){a.setPosition(b)},animateToPosition:function(b,c,d,e){var f,g;if(m=!0,f=.4,g=a.getPosition(),e&&(f=b.x/450),!k.isVector(b))throw b;TweenLite.to(g,f,{x:b.x,y:b.y,ease:d||Bounce.easeOut,onComplete:function(){a.setPosition(b),c&&c(),m=!1}})},scaleDown:function(a){o=!0,this.scalable.setTarget(d(0,0)),h=a},fadeOut:function(a){this.fadable.fadeOut(a)},free:function(){g.fire("command.target.increase"),this.animatable.setAnimation("run"),this.setPosition(d(150,k.getRandom(690,730))),this.movable.setMoveSpeed(k.getRandom(100,350)),this.movable.setTarget(d(590,800)),p=!0},select:function(){var b=e(i,j).add({angle:0,init:function(){var a;this.spritable.setup({image:c.getAsset("selectionCircle")}),a=this.getDimension(),this.setOrigin(d(a.width/2,a.height/2))},update:function(a){this.angle+=.5*a.deltaT*60,this.rotatable.setAngleDegree(this.angle)}});a.addChild(b)},unselect:function(){a.getChildren().length=0}}),a}}),devgru.module.create("object/game/titlerays",["devgru/loader","devgru/baseobject","devgru/math/vector","devgru/component/spritable","devgru/component/rotatable","devgru/component/scalable","devgru/component/fadable"],function(a,b,c,d,e,f){return function(){var g,h,i,j,k,l=document.createElement("canvas"),m=l.getContext("2d");return l.width=640,l.height=640,h=b(d,f,e).add({angle:0,init:function(){this.spritable.setup({image:a.getAsset("rays")}),this.setOrigin(c(320,320)),this.scalable.setScale(c(1.2,1.2))},update:function(a){this.angle+=.05*a.deltaT*60,this.rotatable.setAngleDegree(this.angle)},draw:function(a){this.base.draw(a)}}),i=b(d,f).add({scale:1,timer:0,init:function(){this.spritable.setup({image:a.getAsset("rayArea")}),this.setOrigin(c(320,320)),this.scalable.setScale(c(1.1,.9))},update:function(a){this.timer+=.025*a.deltaT*60,this.scale=1.25+.25*Math.sin(this.timer)},draw:function(a){a.context.globalCompositeOperation="destination-in",this.base.draw(a),a.context.globalCompositeOperation="source-over"}}),j=b(d).add({init:function(){this.spritable.setup({image:a.getAsset("raysColor")}),this.setOrigin(c(320,320))},draw:function(a){a.context.globalCompositeOperation="source-atop",this.base.draw(a),a.context.globalCompositeOperation="source-over"}}),k=b(d,f).add({scale:1,timer:0,init:function(){this.spritable.setup({image:a.getAsset("raysSpecks")}),this.setOrigin(c(320,320))},update:function(a){this.timer+=.002*a.deltaT*60,this.scale=1.15+.15*-Math.cos(this.timer),this.scalable.setScale(c(this.scale,this.scale))}}),g=b(d).add({init:function(){this.spritable.setup({image:l,position:c(320,320)}),this.setOrigin(c(320,320))},draw:function(){m.clearRect(0,0,640,640),this.base.draw({context:m})},getImage:function(){return l}}),g.addChild(h),g.addChild(i),g.addChild(j),g.addChild(k),g}}),devgru.module.create("object/game/trees",["devgru/loader","devgru/baseobject","devgru/math/vector","devgru/component/spritable"],function(a,b,c,d){return function(e){var e=e||"back",f=b(d).add({init:function(){this.spritable.setup({position:c(0,0),image:a.getAsset("treesTop")})},draw:function(a,b,c){this.base.draw(a,b,c)}}),g=b(d).add({init:function(){this.spritable.setup({position:c(0,480),image:a.getAsset("treesBottom")})},draw:function(a,b,c){this.base.draw(a,b,c)}});return"back"===e?f:g}}),devgru.module.create("object/gui/clickbutton",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/scalable","devgru/component/animatable","devgru/component/clickable","devgru/component/hoverable","devgru/component/fadable","object/gui/textbox","utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=a.sugar;return function(a){var b,c=!0,f=!1,o=!1,p=function(c,d){b=l({font:"heuristicabold",align:"center",textBaseline:"middle",margin:a.margin||e(0,8),fontColor:"#ffffff",fontSize:a.fontSize||35,text:c,maxWidth:d,linebreaks:!1})},q=function(){s.animatable.setAnimation(f&&o?"down":"normal")},r=function(){f=!1,q()},s=d(h,i,j,g,k).add({init:function(){this.animatable.setup({position:a.position,image:a.image,animation:n.isDefined(a.animation)?a.animation:{frameCount:2,animations:{normal:{startFrame:0,endFrame:0},down:{startFrame:1,endFrame:1}}}}),this.setOrigin(e(this.animatable.getDimension().width,this.animatable.getDimension().height).scale(.5)),a.label&&(p(a.label,a.maxWidth||this.animatable.getDimension().width),this.addChild(b)),q(),a.init&&a.init.apply(this)},onClickDown:function(){c&&(f=!0,q())},onClickUp:function(){c&&f&&o&&n.isDefined(a.callback)&&n.isFunction(a.callback)&&(m.audio.playSound("sfx_button"),a.callback.apply(s))},hoverOver:function(){o=!0,q()},hoverOut:function(){o=!1,q()},enable:function(a){c=a},pointerDown:function(a){this.hoverable.pointerMove(a),this.base.pointerDown(a)}});return s.register("pointerUp",r,"button"),s}}),devgru.module.create("object/gui/counter",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/scalable","devgru/component/rotatable","devgru/component/fadable","devgru/component/animatable"],function(a,b,c,d,e,f,g,h,i,j){"use strict";a.sugar;return function(a){var b=a.value||0,c=a.spacing||e(0,0),f=a.align||"right",k=0,l=function(){return Math.floor(b).toString().length},m=function(){return d(j).add({init:function(){this.animatable.setup({image:a.image,animation:{frameCount:10,animations:{0:{startFrame:0,endFrame:0},1:{startFrame:1,endFrame:1},2:{startFrame:2,endFrame:2},3:{startFrame:3,endFrame:3},4:{startFrame:4,endFrame:4},5:{startFrame:5,endFrame:5},6:{startFrame:6,endFrame:6},7:{startFrame:7,endFrame:7},8:{startFrame:8,endFrame:8},9:{startFrame:9,endFrame:9}}}}),k=this.animatable.getDimension().width}})},n=function(){var a,d,g,h=b.toString(),i=l(),j=o.getChildren(),n=j.length-i;if(0>n)for(a=0;a<Math.abs(n);++a)o.addChild(m());else if(n>0)for(a=0;a<Math.abs(n);++a)j.pop();for(a=0;a<j.length;++a)g=j[a],g.setPosition(e((k+c.x)*a,0)),g.animatable.setAnimation(h.substr(a,1));if("right"===f)for(a=0;a<j.length;++a)g=j[a],d=g.getPosition().clone(),d.substract(e((k+c.x)*i-c.x,0)),g.setPosition(d);else if("center"===f)for(a=0;a<j.length;++a)g=j[a],d=g.getPosition().clone(),d.add(e(((k+c.x)*i-c.x)/-2,0)),g.setPosition(d)},o=d(g,h,i).add({init:function(){n()},setValue:function(a){b=a,n()},getValue:function(){return b}});return o}}),devgru.module.create("object/gui/levelindicator",["devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/event/system","object/gui/textbox","devgru/component/spritable"],function(a,b,c,d,e,f,g){var h,i,j=1,k=function(){h=f({font:"heuristicabold",align:"center",fontColor:"#810541",fontSize:27,margin:d(0,4)})},l=function(){i=f({font:"heuristicabold",align:"center",fontColor:"#810541",fontSize:18,margin:d(0,2)})},m=function(){l(),k()},n=function(){h.setText(++j)},o=c(g).add({init:function(){var a;this.spritable.setup({image:b.getAsset("levelIndicator"),position:d(96,0)}),this.setOrigin(d(this.getDimension().width/2,0)),e.on("command.level.up",n),m(),a=this.getPosition(),h.setPosition(d(0,34)),h.setText(j),i.setPosition(d(0,17)),i.setText("level"),this.addChild(h),this.addChild(i)},destroy:function(){var a=this.getChildren();a.length=0,e.off("command.level.up",n)},getLevel:function(){return j},resetLevel:function(){j=1,h.setText(j)}});return o}),devgru.module.create("object/gui/scoreindicator",["devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/event/system","object/gui/textbox","devgru/component/spritable"],function(a,b,c,d,e,f,g,h){var i,j,k=0,l=function(){i=g({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#2B65EC",fontSize:27,margin:d(0,4)})},m=function(){j=g({font:"heuristicabold",align:"center",fontColor:"#2B65EC",fontSize:18,margin:d(0,0)})},n=function(){m(),l()},o=function(a){k+=a,i.setText(k)},p=function(a){k-=a,i.setText(k)},q=function(){k=0,i.setText(k)},r=c(h).add({init:function(){var c,e,g;this.spritable.setup({image:b.getAsset("scoreIndicator"),position:d(a.canvas.getDimension().width/2,0)}),this.setOrigin(d(this.getDimension().width/2,0)),f.on("command.score.add",o),f.on("command.score.subtract",p),f.on("command.score.reset",q),n(),c=this.getPosition(),e=0,g=48,i.setPosition(d(e,g)),i.setText(k),j.setPosition(d(e,c.y+17)),j.setText("score"),this.addChild(i),this.addChild(j)},destroy:function(){var a=this.getChildren();a.length=0,f.off("command.score.add",o),f.off("command.score.subtract",p),f.off("command.score.reset",q)},getScore:function(){return k},resetScore:function(){q()}});return r}),devgru.module.create("object/gui/targetindicator",["devgru","devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/event/system","object/gui/textbox","devgru/component/spritable"],function(a,b,c,d,e,f,g,h){var i,j,k,l,m=a.sugar,n=0,o=function(){i=g({font:"heuristicabold",align:"center",margin:e(0,4),fontColor:"#C11B17",fontSize:27,maxWidth:80})},p=function(){j=g({text:"target",font:"heuristicabold",align:"center",margin:e(0,0),fontColor:"#C11B17",fontSize:18})},q=function(){p(),o()},r=function(){i.setText(++n+"/"+l,{fontColor:l>n?"#C11B17":"#04b500"})},s=function(a){a===!0&&(n=0),i.setText(n+"/"+l,{fontColor:l>n?"#C11B17":"#04b500"})},t=function(){l=k,n=0,i.setText(n+"/"+l,{fontColor:l>n?"#C11B17":"#04b500"})},u=d(h).add({init:function(){var a;this.spritable.setup({image:c.getAsset("targetIndicator"),position:e(b.canvas.getDimension().width-96,0)}),this.setOrigin(e(this.getDimension().width/2,0)),f.on("command.target.increase",r),f.on("command.target.reset",t),q(),a=this.getPosition(),i.setPosition(e(0,34)),i.setText(n+"/"+l),j.setPosition(e(0,17)),this.addChild(i),this.addChild(j)},destroy:function(){var a=this.getChildren();a.length=0,f.off("command.target.increase",r),f.off("command.target.reset",t)},setTarget:function(a,b){l=k=a,m.isUndefined(b)&&(b=!0),m.isDefined(i)&&s(b)},getTarget:function(){return l},getMet:function(){return n}});return u}),devgru.module.create("object/gui/text",["devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension"],function(a,b,c,d){return function(){var a=!1,b=d(0,0),e="",f="#ad6e36",g="#000000",h=!1,i=1,j=30,k="heuristicabold",l="center",m=d(0,0),n=c().add({init:function(){a||(a=!0)},draw:function(a){var c=a.context;c.save(),c.font=j+"px "+k,c.fillStyle=f,c.strokeStyle=g,c.textBaseline="top",c.textAlign=l,c.fillText(e,b.x+m.x,b.y+m.y),h&&(c.lineWidth=i,c.strokeText(e,b.x+m.x,b.y+m.y)),c.restore()},setOffset:function(a){m=a},setPosition:function(a){b=a},getPosition:function(){return b},setText:function(a){e=a},setColor:function(a){f=a},setFont:function(a){k=a},setAlign:function(a){l=a},setFontSize:function(a){j=a},setBorderColor:function(a){g=a},setUseBorder:function(a){h=a},setBorderSize:function(a){i=a}});return n}}),devgru.module.create("object/gui/textbox",["devgru","devgru/math/vector","devgru/math/dimension","devgru/math/rectangle","devgru/baseobject","devgru/component/scalable","devgru/component/rotatable","devgru/component/fadable"],function(a,b,c,d,e,f,g,h){"use strict";return function(d){var i,j,k,l,m=a.sugar,n="",o=!0,p="normal",q=["black","white"],r="left",s="arial",t=37,u="black",v=[0],w=0,x=["black"],y=[!1],z="top",A=[],B=b(0,0),C=0,D=null,E=document.createElement("canvas"),F=E.getContext("2d"),G=1,H=1,I="source-over",J=function(a){var b,c,e;if(a.gradient&&(l=a.gradient),a.gradientColors)for(q=[],b=0,c=a.gradientColors.length;c>b;++b)q[b]=a.gradientColors[b];for(a.overlaySprite&&(D=a.overlaySprite,D.initialized||(D.init(),D.initialized=!0)),a.align&&(r=a.align),m.isDefined(a.ySpacing)&&(C=a.ySpacing),a.font&&(s=a.font),m.isDefined(a.fontSize)&&(t=a.fontSize),a.fontColor&&(u=a.fontColor),a.textBaseline&&(z=a.textBaseline),m.isDefined(a.fontWeight)&&(p=a.fontWeight),m.isDefined(a.lineWidth)&&(v=m.isArray(a.lineWidth)?a.lineWidth:[a.lineWidth]),a.strokeStyle&&(x=m.isArray(a.strokeStyle)?a.strokeStyle:[a.strokeStyle]),a.innerStroke&&(y=m.isArray(a.innerStroke)?a.innerStroke:[a.innerStroke]),e=Math.max(v.length,x.length,y.length);v.length<e;)v.push(0);
for(;x.length<e;)x.push("black");for(;y.length<e;)y.push(!1);for(w=0,b=0,c=v.length;c>b;++b)w=Math.max(w,2*v[b]);m.isDefined(a.linebreaks)&&(o=a.linebreaks),j=m.isDefined(a.maxWidth)?a.maxWidth:null,k=m.isDefined(a.maxHeight)?a.maxHeight:null,m.isDefined(a.margin)&&(B=a.margin),a.textID?(i=a.textID,Q.setTextID(i,j,k)):Q.setText(a.text?d.text:n)},K=function(){{var a,d,e,f,g,h=b(w/2,w/2),i=Q.getOrigin();Q.getPosition()}switch(E.width=G+w+2*B.x,E.height=H+w+2*B.y,Q.setDimension(c(E.width,E.height)),Q.updateBoundingBox(),D&&(g=E.width/D.getDimension().width,D.scalable&&D.scalable.setScale(b(g,g))),r){default:case"left":i.x=0;break;case"center":i.x=B.x+G/2;break;case"right":i.x=B.x+G}switch(z){default:case"top":i.y=0;break;case"middle":i.y=H/2;break;case"bottom":i.y=H}for(N(F),a=0;a<A.length;++a){for(F.fillStyle=m.isDefined(A[a].gradient)?A[a].gradient:u,e=h.x+i.x,f=h.y+(a+1)*t+B.y+C*a,F.globalCompositeOperation="source-over",F.fillText(A[a].string,e,f),m.isEmpty(D)||(F.globalCompositeOperation="source-atop",D.setPosition(b(e,f-t)),D.draw({canvas:E,context:F})),F.globalCompositeOperation="source-atop",d=0;d<v.length;++d)v[d]&&y[d]&&(F.lineWidth=2*v[d],F.strokeStyle=x[d],F.strokeText(A[a].string,e,f));for(F.globalCompositeOperation="destination-over",d=v.length-1;d>=0;--d)v[d]&&!y[d]&&(F.lineWidth=2*v[d],F.strokeStyle=x[d],F.strokeText(A[a].string,e,f))}M(F)},L=function(a){a.context.drawImage(E,0,0)},M=function(a){a.textAlign="left",a.textBaseline="bottom",a.lineWidth=0,a.strokeStyle="black",a.fillStyle="black",a.globalCompositeOperation=I,a.restore()},N=function(a){a.save(),a.textAlign=r,a.textBaseline="bottom",a.font=p+" "+t.toString()+"px "+s,I=a.globalCompositeOperation},O=function(){var a,b,c,d,e,f,g,h,i=(""+n).split("\n");for(A.length=[],G=1,H=1,N(F),c=0;c<i.length;++c){if(b=i[c],a=F.measureText(b).width,o&&!m.isEmpty(j)&&a>j){for(d=0;a>j;)if(++d,f=b.slice(0,b.length-d),a=F.measureText(f).width,d===b.length){d=b.length-1;break}h=f.lastIndexOf(" "),h>0&&h!=f.length&&(d+=f.length-h),g=b.slice(b.length-d,b.length),b=b.slice(0,b.length-d)," "===g.charAt(0)&&(g=g.slice(1)),0!=g.length&&i.splice(c+1,0,g),a=F.measureText(b).width}a>G&&(G=a),e=P(a,c),A.push({string:b,width:a,gradient:e}),H+=t+C}},P=function(a,b){var c,d,e,f,g,h={x:0,y:0},i={x:0,y:0};if(l){switch(f=(t+C)*b,g=(t+C)*(b+1),l){default:case"top-down":h.x=0,h.y=f,i.x=0,i.y=g;break;case"down-top":h.x=0,h.y=g,i.x=0,i.y=f;break;case"left-right":h.x=0,h.y=0,i.x=a,i.y=0;break;case"right-left":h.x=a,h.y=0,i.x=0,i.y=0;break;case"topleft-downright":h.x=0,h.y=f,i.x=a,i.y=g;break;case"topright-downleft":h.x=a,h.y=f,i.x=0,i.y=g;break;case"downleft-topright":h.x=0,h.y=g,i.x=a,i.y=f;break;case"downright-topleft":h.x=a,h.y=g,i.x=0,i.y=f}for(h.x+=w/2,h.y+=w/2,i.x+=w/2,i.y+=w/2,c=F.createLinearGradient(h.x,h.y,i.x,i.y),e=0;e<q.length;++e)d=e*(1/(q.length-1)),c.addColorStop(d,q[e]);return c}},Q=e(f,g,h).add({getText:function(){return n},setText:function(a,b){for(b&&J(b),n=a,O();t>0&&(!m.isEmpty(j)&&G>j||!m.isEmpty(k)&&H>k);)t-=1,O();K()},setTextID:function(a){i=a}});return Q.register("draw",L,"spritable"),d&&J(d),Q}}),devgru.module.create("object/gui/togglebutton",["devgru","devgru/game","devgru/loader","devgru/director","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/animatable","devgru/component/clickable","devgru/component/hoverable","devgru/component/rotatable","object/gui/textbox","module/game/audiomanager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=a.sugar;return function(a){var b=!0,c=n.isDefined(a.toggled)?a.toggled:!1,d=!1,g=!1,l=function(){p.animatable.setAnimation(c?"toggled":"normal")},o=function(){d=!1,l()},p=e(h,i,j,k).add({init:function(){this.animatable.setup({position:a.position,image:a.image,animation:n.isDefined(a.animation)?a.animation:{frameCount:2,animations:{normal:{startFrame:0,endFrame:0},toggled:{startFrame:1,endFrame:1}}}}),this.setOrigin(f(this.animatable.getDimension().width,this.animatable.getDimension().height).scale(.5)),l(),a.init&&a.init.apply(this)},onClickDown:function(){b&&(d=!0,l())},onClickUp:function(){b&&d&&g&&n.isDefined(a.callback)&&n.isFunction(a.callback)&&(c=!c,a.callback.apply(p),m.playSound("sfx_button"))},hoverOver:function(){g=!0,l()},hoverOut:function(){g=!1,l()},enable:function(a){b=a},isToggled:function(){return c},pointerDown:function(a){this.hoverable.pointerMove(a),this.base.pointerDown(a)},toggle:function(b,d){c=b,d&&n.isFunction(a.callback)&&a.callback.apply(p),l()}});return p.register("pointerUp",o,"button"),p}}),devgru.module.create("object/gui/topbar",["devgru/game","devgru/loader","devgru/baseobject","devgru/math/vector","devgru/math/dimension","devgru/component/spritable"],function(a,b,c,d,e,f){return function(){var a=!1,e=c(f).add({init:function(){a||(a=!0,this.spritable.setup({position:d(0,0),image:b.getAsset("barTop")}))}});return e}}),devgru.module.create("screen/game",["utils","devgru/game","devgru/loader","devgru/director","devgru/math/vector","devgru/screen","devgru/baseobject","devgru/event/system","devgru/math/dimension","object/game/grass","object/game/trees","object/game/fence","object/gui/topbar","object/gui/levelindicator","object/gui/scoreindicator","object/gui/targetindicator","module/game/tilegrid","object/game/tile","object/game/barn","object/game/pig","object/game/sheep","object/game/chicken","object/game/mutatedanimal","object/gui/clickbutton","module/gui/floater","module/gui/popup","module/game/audiomanager","module/game/apimanager","module/game/powerups/shuffle/cloud","module/game/powerups/temptingtreat","module/game/challenges/alienoverlay","module/game/challenges/ufoflyby","module/game/challenges/randomabduction","module/game/challenges/totalabduction","module/game/challenges/mutation","module/game/powerups/eds","module/game/powerups/powerupbar","module/game/challenges/spawner"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L){var M=a.constants;return function(){var r,w,N=f("Game").add({onShow:function(){A.stopAllMusic(),A.playMusic("music_level",!0),h.on("status.tilegrid.blockremoved",O)},onHide:function(){var a=document.getElementById("flyby");null!==a&&document.body.removeChild(a);var b=document.getElementById("randomabduction");null!==b&&document.body.removeChild(b);var c=document.getElementById("mutation");null!==c&&document.body.removeChild(c),h.off("status.tilegrid.blockremoved",O)}}),O=function(a){var b=D(a.position,a.callback);b.setup(r)},P=function(){r=q([t,u,v]),r.setBoundary(e(29,135)),r.setup({dimension:i(10,10)}),r.setName("tileGrid"),r.setID(1),r.z=1,b.add(r)},Q=function(){b.add(y())},R=function(){var f,i,q,t,u=j(),v=k("back"),y=k("front"),A=s("back"),C=s("front"),D=l(),E=m(),F=function(){f.enable(!1),f.visible=!1,t.visible=!0},G=function(){f.enable(!0),f.visible=!0,t.visible=!1};p.setTarget(a.settings.levelTarget),u.setName("grassBackground"),u.z=M.layers.GRASS_BACKGROUND,N.addObject(u),v.setName("treesBackground"),v.z=M.layers.TREES_BACKGROUND,N.addObject(v),A.setName("barnBackground"),A.z=M.layers.BARN_BACKGROUND,N.addObject(A),D.setName("fenceBackground"),D.z=M.layers.FENCE_BACKGROUND,N.addObject(D),P(),E.setName("topBar"),E.z=M.layers.TOPBAR,N.addObject(E),n.setName("levelIndicator"),n.z=M.layers.INDICATOR,N.addObject(n),p.setName("targetIndicator"),p.z=M.layers.INDICATOR,N.addObject(p),o.setName("scoreIndicator"),o.z=M.layers.INDICATOR,N.addObject(o),C.setName("barnForeground"),C.z=M.layers.BARN_FOREGROUND,N.addObject(C),y.setName("treesForeground"),y.z=M.layers.TREES_FOREGROUND,N.addObject(y),f=x({image:c.getAsset("buttonPause"),position:e(42,918),callback:function(){var a=z(),c=z(),e=z(),f={type:a.TYPE_PAUSE,onHide:function(){TweenMax.resumeAll(!0,!0),b.resume()},onHowToPlay:function(){c.show(g)},onMainMenu:function(){e.show(h)}},g={type:a.TYPE_HOW_TO_PLAY,onHide:function(){a.show(f)}},h={type:a.TYPE_ARE_YOU_SURE,onYes:function(){TweenMax.resumeAll(!0,!0),b.resume(),n.resetLevel(),o.resetScore(),b.removeAll(),d.showScreen("Menu")},onNo:function(){a.show(f)}};b.pause(),TweenMax.pauseAll(!0,!0),a.show(f)}}),f.setName("pauseButton"),f.z=M.layers.PAUSE_BUTTON,N.addObject(f),h.on("command.pausebutton.disable",F),h.on("command.pausebutton.enable",G),f.add({visible:!0,destroy:function(){h.off("command.pausebutton.disable",F),h.off("command.pausebutton.enable",G)},draw:function(a){this.visible&&this.base.draw(a)}}),t=g().add({visible:!1,alpha:0,updateWhenPaused:!0,update:function(a){this.visible&&this.alpha<.5&&(this.alpha+=.01*a.deltaT*60),!this.visible&&this.alpha>0&&(this.alpha-=.01*a.deltaT*60),this.alpha<0&&(this.alpha=0)},draw:function(a){var c=b.canvas.getDimension();a.context.globalAlpha=this.alpha,a.context.fillStyle="#460061",a.context.fillRect(0,0,c.width,c.height),a.context.globalAlpha=1}}),t.z=M.layers.DARK_OVERLAY,N.addObject(t);try{w=x({image:c.getAsset("brandingLogo"),animation:{frameCount:1,animations:{normal:{startFrame:0,endFrame:0},down:{startFrame:0,endFrame:0}}},callback:function(){B.openBrandLink()},init:function(){var a=b.canvas.getDimension(),c=this.getDimension();this.setOrigin(e(c.width/2,c.height)),w.setPosition(e(a.width/2,a.height-16))}}),w.setName("brandingButton"),w.z=M.layers.BRANDING,w.updateWhenPaused=!0,b.add(w)}catch(H){w=null}i=K(r),i.z=M.layers.POWERUPBAR,N.addObject(i),q=L().setup({likelihood:{1:0,2:0,3:0,4:10,5:20,6:30,7:40,8:50,9:60,10:70,11:80,12:90,max:13}},r)},S=function(){R(),Q(),C.init(r),E.init(r),F.init(r),G.init(r),H.init(r),I.init(r),J.init()};return S(),N.z=0,N}}),devgru.module.create("screen/menu",["utils","devgru","devgru/game","devgru/event/system","devgru/loader","devgru/director","devgru/math/vector","devgru/screen","devgru/math/dimension","object/gui/clickbutton","object/gui/togglebutton","devgru/baseobject","devgru/component/spritable","devgru/component/fadable","screen/game","module/game/apimanager","module/gui/popup","module/game/audiomanager","module/game/savestatemanager","object/game/titlerays","screen/tutorial","devgru/director","module/gui/speechbubble","object/gui/textbox"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,f,v,w){{var x=a.constants;b.sugar}return function(){var a,b,i,v,y,z,A,B,C,D,E,F,G,H,I,J,K=h("Menu").add({onShow:function(){d.fire("command.tweens.kill"),r.stopAllMusic(),r.playMusic("music_mainmenu",!0),L(!0),v.toggle(s.load("muteMusic",!1)),y.toggle(s.load("muteSound",!1)),c.add(D),c.add(E),c.add(v),c.add(y),z&&c.add(z)},onHide:function(){c.remove(v),c.remove(y),c.remove(D),c.remove(E),z&&c.remove(z)}}),L=function(c){a.enable(c),b.enable(c),A.enable(c),i.enable(c)},M=function(){f.addScreen(o()),f.showScreen("Game")},N=function(){f.addScreen(u()),f.showScreen("Tutorial")},O=function(){G=l(n).add({init:function(){this.fadable.setFadeSpeed(2),this.fadable.fadeIn(function(){})}}),E=l(n),D=l(m,n).add({init:function(){this.spritable.setup({position:g(0,0),image:e.getAsset("menuBackground")}),this.z=x.layers.MENU_BACKGROUND}}),C=l(m,n).add({rays:t(),init:function(){this.spritable.setup({image:this.rays.getImage(),position:g(0,-80)}),this.addChild(this.rays),this.fadable.setFadeSpeed(.5),this.fadable.fadeIn()}}),E.addChild(C),B=l(m).add({init:function(){this.spritable.setup({image:e.getAsset("textLogo"),position:g(0,40)})}}),E.addChild(B),a=j({label:"Start",align:"center",image:e.getAsset("buttonMedium"),callback:function(){s.load("visited",!1)?M():N(),L(!1)}}),a.setName("startButton"),a.z=x.layers.BRANDING,b=j({label:"How to play",align:"center",image:e.getAsset("button"),callback:function(){var a=q();L(!1),a.show({type:a.TYPE_HOW_TO_PLAY,onHide:function(){L(!0)}})}}),b.setName("howToPlayButton"),b.z=x.layers.MENU_BUTTON,A=j({image:e.getAsset("buttonCredits"),callback:function(){L(!1),J.enable(!0),C.fadable.setFadeSpeed(2),C.fadable.fadeOut(),E.fadable.setFadeSpeed(2),E.fadable.fadeOut(function(){c.add(G)})}}),A.setName("creditsButton"),A.z=x.layers.MENU_BUTTON,i=j({label:"",align:"center",image:e.getAsset("button"),callback:function(){p.openMoreGames()}}),i.setName("moreButton"),i.z=x.layers.MENU_BUTTON,v=k({toggled:s.load("muteMusic",!1),image:e.getAsset("musicToggle"),callback:function(){r.muteMusic(this.isToggled(),!0),s.save("muteMusic",this.isToggled())}}),v.setName("musicToggle"),v.z=x.layers.MENU_BUTTON,y=k({toggled:s.load("muteSound",!1),image:e.getAsset("soundToggle"),callback:function(){r.muteSound(this.isToggled()),s.save("muteSound",this.isToggled())}}),y.setName("soundToggle"),y.z=x.layers.MENU_BUTTON;try{z=j({image:e.getAsset("brandingLogo"),animation:{frameCount:1,animations:{normal:{startFrame:0,endFrame:0},down:{startFrame:0,endFrame:0}}},callback:function(){p.openBrandLink()},init:function(){var a=c.canvas.getDimension(),b=this.getDimension();z.setPosition(g(b.width/2,a.height-b.height/2-32))}}),z.setName("brandingButton"),z.z=x.layers.MENU_BUTTON,z.updateWhenPaused=!0}catch(d){z=null}E.addChild(a),E.addChild(b),E.addChild(A),p.isAvailable()&&E.addChild(i),H=l(m).add({init:function(){this.spritable.setup({image:e.getAsset("speechBubbleXL")})}}),H.setPosition(g(16,87)),G.addChild(H),I=w({text:"DEVGRU",font:"heuristicabold",linebreaks:!1,align:"center",fontColor:"#71565e",margin:g(0,4),fontSize:28,maxWidth:470,maxHeight:550}),I.setPosition(g(262,70)),H.addChild(I),J=j({image:e.getAsset("buttonClose"),position:g(480,42),callback:function(){this.enable(!1),G.fadable.fadeOut(function(){c.remove(G),E.fadable.fadeIn(function(){}),C.fadable.fadeIn(),L(!0)})}}),J.setName("XButton"),H.addChild(J),F=l(m).add({init:function(){var a;this.spritable.setup({image:e.getAsset("creditsChicken"),position:g(canvas.width,canvas.height)}),a=this.getDimension(),this.setOrigin(g(a.width,a.height))}}),F.setName("chicken"),G.addChild(F)},P=function(){var d=c.canvas.getDimension(),e=g(d.width/2,d.height/2);a.setPosition(e),b.setPosition(e.add(g(0,96))),i.setPosition(e.add(g(0,96))),v.setPosition(g(d.width-128,48)),y.setPosition(g(d.width-48,48)),A.setPosition(g(48,48))},Q=function(){O(),P()};return Q(),K.z=0,K}}),devgru.module.create("screen/preloader",["utils","devgru","devgru/game","devgru/loader","devgru/director","devgru/math/vector","devgru/screen","devgru/math/dimension","object/gui/clickbutton","devgru/baseobject","devgru/component/spritable","devgru/component/rotatable","devgru/component/scalable","module/game/apimanager","module/game/audiomanager","module/game/savestatemanager","screen/menu","screen/splashscreen","object/gui/textbox"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";var t=b.sugar,u={background:"sprites/scenery/background.png",fence:"sprites/scenery/fence.png",treesTop:"sprites/scenery/trees-top.png",treesBottom:"sprites/scenery/trees-bottom.png",startBackground:"sprites/gui/startscreen.png",barTop:"sprites/gui/topbar-background.png",targetIndicator:"sprites/gui/target-indicator.png",scoreIndicator:"sprites/gui/score-indicator.png",levelIndicator:"sprites/gui/level-indicator.png",popup:"sprites/gui/popup.png",popupLarge:"sprites/gui/popup-large.png",popupX:"sprites/gui/popup-x.png",popupLargeX:"sprites/gui/popup-large-x.png",winGold:"sprites/gui/win-gold.png",winSilver:"sprites/gui/win-silver.png",lose:"sprites/gui/lose.png",newHighScore:"sprites/gui/new-highscore.png",winUnderlay:"sprites/gui/win-plaque-underlay.png",textfieldSmall:"sprites/gui/textfield-small.png",button:"spritesheets/gui/btn.png",buttonMedium:"spritesheets/gui/btn-medium.png",buttonSmall:"spritesheets/gui/btn-small.png",buttonLeft:"spritesheets/gui/btn-left.png",buttonRight:"spritesheets/gui/btn-right.png",buttonPause:"spritesheets/gui/pause-btn.png",buttonClose:"spritesheets/gui/close-btn.png",buttonCredits:"spritesheets/gui/btn-credits.png",buttonForfeit:"spritesheets/gui/btn-forfeit.png",buttonShare:"spritesheets/gui/btn-share.png",musicToggle:"spritesheets/gui/btn-music.png",soundToggle:"spritesheets/gui/btn-sound.png",menuBackground:"sprites/gui/startscreen.png",clothSmall:"sprites/gui/cloth-small.png",clothMedium:"sprites/gui/cloth-medium.png",clothLarge:"sprites/gui/cloth-large.png",fontShine:"sprites/gui/font-shine.png",htp1:"sprites/game/howtoplay-screenshot-a-100pct.png",htp2:"sprites/game/howtoplay-screenshot-b-100pct.png",textLogo:"sprites/gui/textlogo.png",textLogoRays:"sprites/gui/textlogo-rays.png",rayArea:"sprites/gui/textlogo-whiteblob.png",rays:"sprites/gui/textlogo-raysoverlay.png",raysColor:"sprites/gui/textlogo-coloroverlay.png",raysSpecks:"sprites/gui/textlogo-dustspeckles.png",scoreFont:"spritesheets/gui/score-font.png",creditsChicken:"sprites/gui/chicken.png",grassBackground:"sprites/scenery/background.png",barnForeground:"sprites/game/barn-fg-b.png",barnBackground:"sprites/game/barn-bg.png",pig:"spritesheets/game/pig.png",chicken:"spritesheets/game/chicken.png",sheep:"spritesheets/game/sheep.png",selectionCircle:"sprites/game/selection-circle.png",powerupBar:"sprites/gui/powerup-bar-bg.png",antTrail:"spritesheets/gui/ant-trail.png",iconCardboard:"sprites/gui/icon-cardboardcow-powerup.png",iconEDS:"sprites/gui/icon-eds-powerup.png",iconShuffle:"sprites/gui/icon-shuffle-powerup.png",iconSwitcheroo:"sprites/gui/icon-switcheroo-powerup.png",iconTreat:"sprites/gui/icon-temptingtreat-powerup.png",iconEDSSelect:"sprites/gui/icon-eds-powerup-noborder.png",iconShuffleSelect:"sprites/gui/icon-shuffle-powerup-noborder.png",iconSwitcherooSelect:"sprites/gui/icon-switcheroo-powerup-noborder.png",iconTreatSelect:"sprites/gui/icon-temptingtreat-powerup-noborder.png",iconEmpty:"sprites/gui/icon-empty-powerup.png",powerupCounter:"sprites/gui/ind-powerup-count.png",doge:"sprites/game/powerups/shuffle/doge.png",treatCarrot:"sprites/game/powerups/treat/tempting-treat-carrot.png",treatRays:"sprites/game/powerups/treat/tempting-treat-rays.png",chickenCloud1:"sprites/game/powerups/shuffle/chicken-cloud01.png",chickenCloud2:"sprites/game/powerups/shuffle/chicken-cloud02.png",dustCloudLarge:"sprites/game/powerups/shuffle/dustcloud-large.png",dustCloudSmall:"sprites/game/powerups/shuffle/dustcloud-small.png",piggyCloud1:"sprites/game/powerups/shuffle/piggy-cloud01.png",piggyCloud2:"sprites/game/powerups/shuffle/piggy-cloud02.png",sheepCloud1:"sprites/game/powerups/shuffle/sheep-cloud01.png",alienOverlay:"sprites/game/challenges/alienoverlay.png",ufoScanBeam:"sprites/game/challenges/ufo-scanbeam.png",ufo:"sprites/game/challenges/ufo.png",zibboLogo:"sprites/gui/branding.png",edsState1:"sprites/game/powerups/eds-state01.png",edsState2:"sprites/game/powerups/eds-state02.png",edsRipple:"sprites/game/powerups/eds-ripple.png",ufoCursing:"sprites/game/powerups/ufo-cursing.png",ufoExplosion:"sprites/game/powerups/ufo-explosion.png",mutatedAnimal:"spritesheets/game/mutated-animal.png",ufoSparkBeam:"sprites/game/challenges/ufo-sparkbeam.png",hintHand:"spritesheets/gui/tap.png",speechBubble:"sprites/gui/speechbubble.png",speechBubbleSmall:"sprites/gui/speechbubble-small.png",speechBubbleXL:"sprites/gui/speechbubble-xlarge.png"},v={music_alien:["music_alien.mp3","music_alien.ogg","music_alien.ac3"],music_completed:["music_completed.mp3","music_completed.ogg","music_completed.ac3"],music_failed:["music_failed.mp3","music_failed.ogg","music_failed.ac3"],music_level:["music_level.mp3","music_level.ogg","music_level.ac3"],music_mainmenu:["music_mainmenu.mp3","music_mainmenu.ogg","music_mainmenu.ac3"],sfx_alienspeech:["sfx_alienspeech.mp3","sfx_alienspeech.ogg","sfx_alienspeech.ac3"],sfx_amazing:["sfx_amazing.mp3","sfx_amazing.ogg","sfx_amazing.ac3"],sfx_beamappear:["sfx_beamappear.mp3","sfx_beamappear.ogg","sfx_beamappear.ac3"],sfx_beamup:["sfx_beamup.mp3","sfx_beamup.ogg","sfx_beamup.ac3"],sfx_button:["sfx_button.mp3","sfx_button.ogg","sfx_button.ac3"],sfx_chicken:["sfx_chicken.mp3","sfx_chicken.ogg","sfx_chicken.ac3"],sfx_dog:["sfx_dog.mp3","sfx_dog.ogg","sfx_dog.ac3"],sfx_explosion:["sfx_explosion.mp3","sfx_explosion.ogg","sfx_explosion.ac3"],sfx_great:["sfx_great.mp3","sfx_great.ogg","sfx_great.ac3"],sfx_hit:["sfx_hit.mp3","sfx_hit.ogg","sfx_hit.ac3"],sfx_mutate:["sfx_mutate.mp3","sfx_mutate.ogg","sfx_mutate.ac3"],sfx_pig:["sfx_pig.mp3","sfx_pig.ogg","sfx_pig.ac3"],sfx_pop:["sfx_pop.mp3","sfx_pop.ogg","sfx_pop.ac3"],sfx_select:["sfx_select.mp3","sfx_select.ogg","sfx_select.ac3"],sfx_sheep:["sfx_sheep.mp3","sfx_sheep.ogg","sfx_sheep.ac3"],sfx_shield:["sfx_shield.mp3","sfx_shield.ogg","sfx_shield.ac3"],sfx_shuffle:["sfx_shuffle.mp3","sfx_shuffle.ogg","sfx_shuffle.ac3"],sfx_silence:["sfx_silence.mp3","sfx_silence.ogg","sfx_silence.ac3"],sfx_sparkle:["sfx_sparkle.mp3","sfx_sparkle.ogg","sfx_sparkle.ac3"],sfx_ufoflyaway:["sfx_ufoflyaway.mp3","sfx_ufoflyaway.ogg","sfx_ufoflyaway.ac3"],sfx_wood:["sfx_wood.mp3","sfx_wood.ogg","sfx_wood.ac3"],sfx_woosh:["sfx_woosh.mp3","sfx_woosh.ogg","sfx_woosh.ac3"]};return function(){var a,b,h,w,x,w,y=f(320,700),z=f(320,300),A=s({font:"heuristicabold",align:"center",textBaseline:"middle",fontColor:"#2B65EC",margin:f(0,4),fontSize:30,maxWidth:300,text:"Loading animals..."}),B=g("Preloader").add({onShow:function(){var g,B=c.canvas.getDimension(),C=function(){e.addScreen(q()),n.showSplashScreen()?(e.addScreen(r()),e.showScreen("SplashScreen")):e.showScreen("Menu"),o.playSound("sfx_silence"),o.muteMusic(p.load("muteMusic",!1)),o.muteSound(p.load("muteSound",!1))},D=function(){o.init(!1,"audio"),navigator.userAgent.match("iPod")||navigator.userAgent.match("iPad")||navigator.userAgent.match("iPhone")?(g=i({position:f(B.width/2,B.height/2),label:"Click to start",align:"center",image:d.getAsset("buttonMedium"),maxWidth:160,callback:function(){C(),c.remove(g)}}),g.scalable.setScale(f(2,2)),c.add(g),a.fadable.setFadeSpeed(1.3),a.fadable.fadeOut()):(a.fadable.setFadeSpeed(1.3),a.fadable.fadeOut(),t.setAnimationFrameTimeout(function(){C()},1e3))},E=function(b){a.setText("- "+b+"%"),a.percentage=b/100};h=j(k).add({z:2,init:function(){var a;this.spritable.setup({image:d.getAsset("preLoaderUfo"),position:z}),a=this.getDimension(),this.setOrigin(f(a.width/2,a.height/2))}}),w=j(k,m).add({init:function(){var a;this.spritable.setup({image:d.getAsset("ufoTractorBeam"),position:z}),a=this.getDimension(),this.setOrigin(f(a.width/2,0)),this.scalable.setScale(f(1.5,1.5))}}),x=j(k,l).add({z:1,angle:0,init:function(){var a;this.spritable.setup({image:d.getAsset("preLoaderChicken")}),a=this.getDimension(),this.setOrigin(f(a.width/2,a.height/2))},update:function(b){var c=a.getPosition();this.setPosition(f(y.x,c.y)),this.angle+=60*b.deltaT,this.rotatable.setAngleDegree(this.angle),this.base.update(b)}}),a=s({font:"heuristicabold",fontSize:52,align:"left",textBaseline:"middle",fontColor:"#FFFFFF",strokeStyle:"#340075",lineWidth:4,margin:f(0,4),text:"- 0%"}).add({z:3,percentage:0,update:function(a){var b=this.getPosition().y,c=y.y+(z.y-y.y)*this.percentage;this.setPosition(f(y.x+64,b+(c-b)/10)),this.base.update(a)}}),a.setPosition(y),b=j(k).add({init:function(){this.spritable.setup({image:d.getAsset("preLoaderBackground")})}}),A.setPosition(f(320,72)),A.z=4,c.add(b),c.add(a),c.add(x),c.add(w),c.add(h),c.add(A),d.setAssets(d.ASSET_TYPE_IMAGE,u),d.setAssets(d.ASSET_TYPE_AUDIO,v),d.load(D,E)},onHide:function(){c.remove(x),c.remove(A),c.remove(h),c.remove(w),c.remove(b),c.remove(a)}});return B}}),devgru.module.create("screen/splashscreen",["utils","devgru/game","devgru/loader","devgru/director","devgru/math/vector","devgru/screen","devgru/math/dimension","object/gui/clickbutton","devgru/baseobject","module/game/apimanager"],function(a,b,c,d,e,f,g,h,i,j){b.sugar;return function(){var a,g,k=b.canvas.getDimension(),l=f("SplashScreen").add({onShow:function(){a=h({image:c.getAsset("zibboLogo"),animation:{frameCount:1,animations:{normal:{startFrame:0,endFrame:0},down:{startFrame:0,endFrame:0}}},callback:function(){j.openSplashLink()},init:function(){var a=b.canvas.getDimension(),c=this.getDimension();this.setOrigin(e(c.width/2,c.height/2)),this.setPosition(e(a.width/2,a.height/2)),this.fadable.setAlpha(0),this.fadable.setFadeSpeed(2),this.fadable.fadeIn(function(){},1)}}),a.setName("brandingButton"),a.z=2,g=i().add({timer:0,draw:function(a){a.context.fillStyle="#ffffff",a.context.fillRect(0,0,k.width,k.height)},update:function(b){this.timer>=0&&(this.timer+=60*b.deltaT),this.timer>180&&(this.timer=-1,a.fadable.setAlpha(1),a.fadable.fadeOut(function(){m()},0))}}),g.z=1,b.add(a),b.add(g)},onHide:function(){b.remove(a),b.remove(g)}}),m=function(){d.showScreen("Menu")};return l}}),devgru.module.create("screen/tutorial",["utils","devgru","devgru/game","devgru/loader","devgru/director","devgru/math/vector","devgru/math/array2d","devgru/screen","devgru/baseobject","devgru/event/system","devgru/math/dimension","object/game/grass","object/game/trees","object/game/fence","object/gui/topbar","module/game/tilegrid","object/game/tile","object/game/barn","object/game/pig","object/game/sheep","object/game/chicken","object/gui/clickbutton","module/gui/floater","module/gui/popup","module/game/audiomanager","module/game/apimanager","devgru/director","screen/game","devgru/component/animatable","devgru/component/fadable","module/game/savestatemanager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,e,A,B,C,D){var E=a.constants,F=b.sugar;return function(){var b,q,b,G,H=0,I=function(){var a=[{dimension:k(3,3),objects:[u(),u(),u(),null,u(),u(),null,null,u()],amazing:!0,hintHand:f(1,1)},{dimension:k(5,3),objects:[u(),u(),u(),null,s(),s(),null,null,s(),null,u(),u(),null,null,u()],amazing:!0,hintHand:f(1,1)},{dimension:k(3,3),objects:[u(),u(),u(),t(),t(),t(),null,u(),u()],amazing:!0,failedText:"Try to clear ALL animals in the field.\n\nSometimes clearing one group earlier will let you reach another group!"},{dimension:k(10,5),objects:[null,t(),t(),u(),u(),null,null,s(),t(),u(),null,null,u(),u(),u(),null,s(),t(),u(),u(),null,null,s(),t(),t(),null,null,null,s(),s(),null,null,u(),u(),u(),null,s(),u(),t(),t(),null,s(),u(),s(),t(),s(),s(),s(),s(),t()],amazing:!0,failedText:"Try to clear ALL animals in the field.\n\nSometimes clearing one group earlier will let you reach another group!",finishText:"-"}];return a[H]},J=function(e){q=i(B,C).add({init:function(){var c,g=b.getGrid().getValue(e.x,e.y);this.setName("hintHand"),this.animatable.setup({image:d.getAsset("hintHand"),position:b.gridToWorld(g,e),animation:{frameCount:2,animations:{point:{fps:3,startFrame:0,endFrame:1}}}}),c=this.animatable.getDimension(),this.setOrigin(f(5,15)),this.animatable.setAnimation("point"),this.fadable.setFadeSpeed(1.5),this.fadable.fadeIn(),this.z=a.constants.layers.HINTHAND}}),c.add(q)},K=function(){var a=0,d=I(H),e=d.objects,h=d.dimension,i=g(h.width,h.height),k=(d.target,d.hintHand);i.iterate(function(b,c){i.set(b,c,e[a]),++a}),b=p(i),b.setName("level"+H),b.setBoundary(f(29,135+52*(10-h.height))),b.setup({dimension:h,progressLevel:!1}),b.setID(H),b.z=0,c.add(b,function(){j.fire("command.score.reset"),F.isDefined(k)&&J(k)})},L=function(){F.isDefined(b)?b.destruct(function(){c.remove(b,function(){K()})}):K()},M=function(){b.destruct(function(){c.remove(b,function(){c.removeAll(),e.addScreen(A()),e.showScreen("Game")})})},N=function(){var a=I(H).amazing;F.isDefined(a)&&j.fire("command.floater.create",{type:"tutorial"})},O=function(a,b,c,d){var e=x();e.show({type:e.TYPE_LEVEL_END_CUSTOM,title:a,text:b,buttonText:c,onHide:function(){F.isFunction(d)&&d()}})},P=function(a){var b=I(H),c=b.failedText,d=b.finishText;a>0?F.isDefined(c)&&(y.stopAllMusic(),y.playMusic("music_failed",!1),O("Level Failed",c,"Try again",function(){y.stopAllMusic(),y.playMusic("music_level",!0),L()})):(N(),F.isDefined(d)?(y.stopAllMusic(),y.playMusic("music_completed",!1),F.setAnimationFrameTimeout(function(){D.save("visited",!0),j.fire("command.score.reset"),M()},2)):(++H,L()))},Q=function(){F.isDefined(q)&&(c.remove(q),hinthand=void 0)},R=h("Tutorial").add({onShow:function(){j.on("status.tilegrid.level.completed",P),j.on("status.tile.clicked",Q),y.stopAllMusic(),y.playMusic("music_level",!0),a.state.tutorial=!0},onHide:function(){j.off("status.tilegrid.level.completed",P),j.off("status.tile.clicked",Q),a.state.tutorial=!1}}),S=function(){c.add(w())},T=function(){var a,b,g=l(),h=m("back"),k=m("front"),p=r("back"),q=r("front"),s=n(),t=o(),u=function(){a.enable(!1),a.visible=!1,b.visible=!0},w=function(){a.enable(!0),a.visible=!0,b.visible=!1};g.setName("grassBackground"),g.z=E.layers.GRASS_BACKGROUND,R.addObject(g),h.setName("treesBackground"),h.z=E.layers.TREES_BACKGROUND,R.addObject(h),p.setName("barnBackground"),p.z=E.layers.BARN_BACKGROUND,R.addObject(p),s.setName("fenceBackground"),s.z=E.layers.FENCE_BACKGROUND,R.addObject(s),K(),t.setName("topBar"),t.z=E.layers.TOPBAR,R.addObject(t),q.setName("barnForeground"),q.z=E.layers.BARN_FOREGROUND,R.addObject(q),k.setName("treesForeground"),k.z=E.layers.TREES_FOREGROUND,R.addObject(k),a=v({image:d.getAsset("buttonPause"),position:f(42,918),callback:function(){var a=x(),b=x(),d=x(),f={type:a.TYPE_PAUSE,onHide:function(){TweenMax.resumeAll(!0,!0),c.resume()},onHowToPlay:function(){b.show(g)},onMainMenu:function(){d.show(h)}},g={type:a.TYPE_HOW_TO_PLAY,onHide:function(){a.show(f)}},h={type:a.TYPE_ARE_YOU_SURE,onYes:function(){TweenMax.resumeAll(!0,!0),c.resume(),c.removeAll(),e.showScreen("Menu")},onNo:function(){a.show(f)}};c.pause(),TweenMax.pauseAll(!0,!0),a.show(f)}}),a.setName("pauseButton"),a.z=E.layers.PAUSE_BUTTON,R.addObject(a),j.on("command.pausebutton.disable",u),j.on("command.pausebutton.enable",w),a.add({visible:!0,destroy:function(){j.off("command.pausebutton.disable",u),j.off("command.pausebutton.enable",w)},draw:function(a){this.visible&&this.base.draw(a)}}),b=i().add({visible:!1,alpha:0,updateWhenPaused:!0,update:function(a){this.visible&&this.alpha<.5&&(this.alpha+=.01*a.deltaT*60),!this.visible&&this.alpha>0&&(this.alpha-=.01*a.deltaT*60),this.alpha<0&&(this.alpha=0)},draw:function(a){var b=c.canvas.getDimension();a.context.globalAlpha=this.alpha,a.context.fillStyle="#460061",a.context.fillRect(0,0,b.width,b.height),a.context.globalAlpha=1}}),b.z=E.layers.DARK_OVERLAY,R.addObject(b);try{G=v({image:d.getAsset("brandingLogo"),animation:{frameCount:1,animations:{normal:{startFrame:0,endFrame:0},down:{startFrame:0,endFrame:0}}},callback:function(){z.openBrandLink()},init:function(){var a=c.canvas.getDimension(),b=this.getDimension();this.setOrigin(f(b.width/2,b.height)),G.setPosition(f(a.width/2,a.height-16))}}),G.setName("brandingButton"),G.z=E.layers.BRANDING,G.updateWhenPaused=!0,c.add(G)}catch(y){G=null}},U=function(){T(),S()};return U(),R.z=0,R}}),devgru.module.create("utils",["devgru","devgru/math/vector","module/game/audiomanager"],function(a,b,c){"use strict";var d=a.sugar;return{audio:c,settings:{levelTarget:90},state:{powerups:{eds:!1},popups:{levelEnd:!1},tutorial:!1},maxPowerups:{SHUFFLE:99,SWITCHEROO:99,TREAT:99,EDS:99},constants:{layers:{MENU_BACKGROUND:0,MENU_BUTTON:10,GRASS_BACKGROUND:20,TREES_BACKGROUND:30,BARN_BACKGROUND:40,FENCE_BACKGROUND:50,TILE:1e3,BEAMED_TILE:4045,FREED:1e3,BARN_FOREGROUND:2200,TREES_FOREGROUND:2300,CLOUD_LARGE:4e3,CLOUD_ANIMAL:4010,CLOUD_DUST:4020,DOGE:5510,TEMPTING_TREAT:4e3,ALIEN_OVERLAY:4030,UFO_BEAM:4040,UFO:4050,EDS_SHIELD:2100,EDS_SHIELD_INNER:2110,EDS_SHIELD_OUTER:2120,EDS_EXPLOSION:4060,EDS_RIPPLE:4030,EDS_CURSEBALLOON:4030,PAUSE_BUTTON:5200,FORFEIT_BUTTON:5300,POWERUPBAR:5400,TOPBAR:5500,INDICATOR:5600,FLOATER:6e3,DARK_OVERLAY:7e3,HINTHAND:7100,SPEECHBUBBLE:7200,POPUP:8e3,BRANDING:9e3}},killTweens:function(a){var b,c=0,d=a.length;for(c;d>c;++c)b=a[c],b.kill();a=[]},debugMover:function(a){a.add({pointerUp:function(){var b=(a.getPosition(),a.getName());d.isDefined(b)||(b=""),a.hold&&(a.hold=!1)},pointerDown:function(c){var d=a.getPosition();a.getBoundingBox().hasPosition(c.position)&&(a.offset=b(d.x-c.position.x,d.y-c.position.y),a.setPosition(b(c.position.x+a.offset.x,c.position.y+a.offset.y)),a.hold=!0)},pointerMove:function(c){a.hold&&a.setPosition(b(c.position.x+a.offset.x,c.position.y+a.offset.y))}})}}});